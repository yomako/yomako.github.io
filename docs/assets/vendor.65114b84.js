function tn(e,t){const r=Object.create(null),i=e.split(",");for(let n=0;n<i.length;n++)r[i[n]]=!0;return t?n=>!!r[n.toLowerCase()]:n=>!!r[n]}const Ah="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",kh=tn(Ah),Mh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Rh=tn(Mh);function uo(e){return!!e||e===""}function oi(e){if(Q(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=yt(i)?Ih(i):oi(i);if(n)for(const s in n)t[s]=n[s]}return t}else{if(yt(e))return e;if(Et(e))return e}}const Oh=/;(?![^(]*\))/g,Lh=/:(.+)/;function Ih(e){const t={};return e.split(Oh).forEach(r=>{if(r){const i=r.split(Lh);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function li(e){let t="";if(yt(e))t=e;else if(Q(e))for(let r=0;r<e.length;r++){const i=li(e[r]);i&&(t+=i+" ")}else if(Et(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function Dh(e){if(!e)return null;let{class:t,style:r}=e;return t&&!yt(t)&&(e.class=li(t)),r&&(e.style=oi(r)),e}function Nh(e,t){if(e.length!==t.length)return!1;let r=!0;for(let i=0;r&&i<e.length;i++)r=Pe(e[i],t[i]);return r}function Pe(e,t){if(e===t)return!0;let r=oa(e),i=oa(t);if(r||i)return r&&i?e.getTime()===t.getTime():!1;if(r=Q(e),i=Q(t),r||i)return r&&i?Nh(e,t):!1;if(r=Et(e),i=Et(t),r||i){if(!r||!i)return!1;const n=Object.keys(e).length,s=Object.keys(t).length;if(n!==s)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!Pe(e[a],t[a]))return!1}}return String(e)===String(t)}function en(e,t){return e.findIndex(r=>Pe(r,t))}const Fh=e=>yt(e)?e:e==null?"":Q(e)||Et(e)&&(e.toString===po||!rt(e.toString))?JSON.stringify(e,go,2):String(e),go=(e,t)=>t&&t.__v_isRef?go(e,t.value):ur(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,n])=>(r[`${i} =>`]=n,r),{})}:Xe(t)?{[`Set(${t.size})`]:[...t.values()]}:Et(t)&&!Q(t)&&!vo(t)?String(t):t,ut={},fr=[],Qt=()=>{},Gh=()=>!1,Bh=/^on[^a-z]/,hi=e=>Bh.test(e),gs=e=>e.startsWith("onUpdate:"),xt=Object.assign,ps=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Hh=Object.prototype.hasOwnProperty,ht=(e,t)=>Hh.call(e,t),Q=Array.isArray,ur=e=>rn(e)==="[object Map]",Xe=e=>rn(e)==="[object Set]",oa=e=>e instanceof Date,rt=e=>typeof e=="function",yt=e=>typeof e=="string",vs=e=>typeof e=="symbol",Et=e=>e!==null&&typeof e=="object",ms=e=>Et(e)&&rt(e.then)&&rt(e.catch),po=Object.prototype.toString,rn=e=>po.call(e),Uh=e=>rn(e).slice(8,-1),vo=e=>rn(e)==="[object Object]",_s=e=>yt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ur=tn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nn=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Wh=/-(\w)/g,Vt=nn(e=>e.replace(Wh,(t,r)=>r?r.toUpperCase():"")),zh=/\B([A-Z])/g,se=nn(e=>e.replace(zh,"-$1").toLowerCase()),ci=nn(e=>e.charAt(0).toUpperCase()+e.slice(1)),Wr=nn(e=>e?`on${ci(e)}`:""),ti=(e,t)=>!Object.is(e,t),dr=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},zi=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Ae=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let la;const jh=()=>la||(la=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let $t;class bs{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&$t&&(this.parent=$t,this.index=($t.scopes||($t.scopes=[])).push(this)-1)}run(t){if(this.active)try{return $t=this,t()}finally{$t=this.parent}}on(){$t=this}off(){$t=this.parent}stop(t){if(this.active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function Yh(e){return new bs(e)}function mo(e,t=$t){t&&t.active&&t.effects.push(e)}function Vh(){return $t}function Kh(e){$t&&$t.cleanups.push(e)}const ys=e=>{const t=new Set(e);return t.w=0,t.n=0,t},_o=e=>(e.w&ke)>0,bo=e=>(e.n&ke)>0,Xh=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ke},$h=e=>{const{deps:t}=e;if(t.length){let r=0;for(let i=0;i<t.length;i++){const n=t[i];_o(n)&&!bo(n)?n.delete(e):t[r++]=n,n.w&=~ke,n.n&=~ke}t.length=r}},Hn=new WeakMap;let Ir=0,ke=1;const Un=30;let ne;const je=Symbol(""),Wn=Symbol("");class fi{constructor(t,r=null,i){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,mo(this,i)}run(){if(!this.active)return this.fn();let t=ne,r=Ee;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ne,ne=this,Ee=!0,ke=1<<++Ir,Ir<=Un?Xh(this):ha(this),this.fn()}finally{Ir<=Un&&$h(this),ke=1<<--Ir,ne=this.parent,Ee=r,this.parent=void 0}}stop(){this.active&&(ha(this),this.onStop&&this.onStop(),this.active=!1)}}function ha(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}function qh(e,t){e.effect&&(e=e.effect.fn);const r=new fi(e);t&&(xt(r,t),t.scope&&mo(r,t.scope)),(!t||!t.lazy)&&r.run();const i=r.run.bind(r);return i.effect=r,i}function Jh(e){e.effect.stop()}let Ee=!0;const yo=[];function $e(){yo.push(Ee),Ee=!1}function qe(){const e=yo.pop();Ee=e===void 0?!0:e}function Kt(e,t,r){if(Ee&&ne){let i=Hn.get(e);i||Hn.set(e,i=new Map);let n=i.get(r);n||i.set(r,n=ys()),Co(n)}}function Co(e,t){let r=!1;Ir<=Un?bo(e)||(e.n|=ke,r=!_o(e)):r=!e.has(ne),r&&(e.add(ne),ne.deps.push(e))}function de(e,t,r,i,n,s){const a=Hn.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(r==="length"&&Q(e))a.forEach((l,h)=>{(h==="length"||h>=i)&&o.push(l)});else switch(r!==void 0&&o.push(a.get(r)),t){case"add":Q(e)?_s(r)&&o.push(a.get("length")):(o.push(a.get(je)),ur(e)&&o.push(a.get(Wn)));break;case"delete":Q(e)||(o.push(a.get(je)),ur(e)&&o.push(a.get(Wn)));break;case"set":ur(e)&&o.push(a.get(je));break}if(o.length===1)o[0]&&zn(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);zn(ys(l))}}function zn(e,t){for(const r of Q(e)?e:[...e])(r!==ne||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const Qh=tn("__proto__,__v_isRef,__isVue"),So=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(vs)),Zh=sn(),tc=sn(!1,!0),ec=sn(!0),rc=sn(!0,!0),ca=ic();function ic(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const i=at(this);for(let s=0,a=this.length;s<a;s++)Kt(i,"get",s+"");const n=i[t](...r);return n===-1||n===!1?i[t](...r.map(at)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){$e();const i=at(this)[t].apply(this,r);return qe(),i}}),e}function sn(e=!1,t=!1){return function(i,n,s){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return t;if(n==="__v_raw"&&s===(e?t?ko:Ao:t?Po:To).get(i))return i;const a=Q(i);if(!e&&a&&ht(ca,n))return Reflect.get(ca,n,s);const o=Reflect.get(i,n,s);return(vs(n)?So.has(n):Qh(n))||(e||Kt(i,"get",n),t)?o:At(o)?!a||!_s(n)?o.value:o:Et(o)?e?Ss(o):ln(o):o}}const nc=wo(),sc=wo(!0);function wo(e=!1){return function(r,i,n,s){let a=r[i];if(mr(a)&&At(a)&&!At(n))return!1;if(!e&&!mr(n)&&(ws(n)||(n=at(n),a=at(a)),!Q(r)&&At(a)&&!At(n)))return a.value=n,!0;const o=Q(r)&&_s(i)?Number(i)<r.length:ht(r,i),l=Reflect.set(r,i,n,s);return r===at(s)&&(o?ti(n,a)&&de(r,"set",i,n):de(r,"add",i,n)),l}}function ac(e,t){const r=ht(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&de(e,"delete",t,void 0),i}function oc(e,t){const r=Reflect.has(e,t);return(!vs(t)||!So.has(t))&&Kt(e,"has",t),r}function lc(e){return Kt(e,"iterate",Q(e)?"length":je),Reflect.ownKeys(e)}const xo={get:Zh,set:nc,deleteProperty:ac,has:oc,ownKeys:lc},Eo={get:ec,set(e,t){return!0},deleteProperty(e,t){return!0}},hc=xt({},xo,{get:tc,set:sc}),cc=xt({},Eo,{get:rc}),Cs=e=>e,an=e=>Reflect.getPrototypeOf(e);function vi(e,t,r=!1,i=!1){e=e.__v_raw;const n=at(e),s=at(t);t!==s&&!r&&Kt(n,"get",t),!r&&Kt(n,"get",s);const{has:a}=an(n),o=i?Cs:r?Ts:ei;if(a.call(n,t))return o(e.get(t));if(a.call(n,s))return o(e.get(s));e!==n&&e.get(t)}function mi(e,t=!1){const r=this.__v_raw,i=at(r),n=at(e);return e!==n&&!t&&Kt(i,"has",e),!t&&Kt(i,"has",n),e===n?r.has(e):r.has(e)||r.has(n)}function _i(e,t=!1){return e=e.__v_raw,!t&&Kt(at(e),"iterate",je),Reflect.get(e,"size",e)}function fa(e){e=at(e);const t=at(this);return an(t).has.call(t,e)||(t.add(e),de(t,"add",e,e)),this}function ua(e,t){t=at(t);const r=at(this),{has:i,get:n}=an(r);let s=i.call(r,e);s||(e=at(e),s=i.call(r,e));const a=n.call(r,e);return r.set(e,t),s?ti(t,a)&&de(r,"set",e,t):de(r,"add",e,t),this}function da(e){const t=at(this),{has:r,get:i}=an(t);let n=r.call(t,e);n||(e=at(e),n=r.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return n&&de(t,"delete",e,void 0),s}function ga(){const e=at(this),t=e.size!==0,r=e.clear();return t&&de(e,"clear",void 0,void 0),r}function bi(e,t){return function(i,n){const s=this,a=s.__v_raw,o=at(a),l=t?Cs:e?Ts:ei;return!e&&Kt(o,"iterate",je),a.forEach((h,c)=>i.call(n,l(h),l(c),s))}}function yi(e,t,r){return function(...i){const n=this.__v_raw,s=at(n),a=ur(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=n[e](...i),c=r?Cs:t?Ts:ei;return!t&&Kt(s,"iterate",l?Wn:je),{next(){const{value:f,done:u}=h.next();return u?{value:f,done:u}:{value:o?[c(f[0]),c(f[1])]:c(f),done:u}},[Symbol.iterator](){return this}}}}function be(e){return function(...t){return e==="delete"?!1:this}}function fc(){const e={get(s){return vi(this,s)},get size(){return _i(this)},has:mi,add:fa,set:ua,delete:da,clear:ga,forEach:bi(!1,!1)},t={get(s){return vi(this,s,!1,!0)},get size(){return _i(this)},has:mi,add:fa,set:ua,delete:da,clear:ga,forEach:bi(!1,!0)},r={get(s){return vi(this,s,!0)},get size(){return _i(this,!0)},has(s){return mi.call(this,s,!0)},add:be("add"),set:be("set"),delete:be("delete"),clear:be("clear"),forEach:bi(!0,!1)},i={get(s){return vi(this,s,!0,!0)},get size(){return _i(this,!0)},has(s){return mi.call(this,s,!0)},add:be("add"),set:be("set"),delete:be("delete"),clear:be("clear"),forEach:bi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=yi(s,!1,!1),r[s]=yi(s,!0,!1),t[s]=yi(s,!1,!0),i[s]=yi(s,!0,!0)}),[e,r,t,i]}const[uc,dc,gc,pc]=fc();function on(e,t){const r=t?e?pc:gc:e?dc:uc;return(i,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(ht(r,n)&&n in i?r:i,n,s)}const vc={get:on(!1,!1)},mc={get:on(!1,!0)},_c={get:on(!0,!1)},bc={get:on(!0,!0)},To=new WeakMap,Po=new WeakMap,Ao=new WeakMap,ko=new WeakMap;function yc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Cc(e){return e.__v_skip||!Object.isExtensible(e)?0:yc(Uh(e))}function ln(e){return mr(e)?e:hn(e,!1,xo,vc,To)}function Mo(e){return hn(e,!1,hc,mc,Po)}function Ss(e){return hn(e,!0,Eo,_c,Ao)}function Sc(e){return hn(e,!0,cc,bc,ko)}function hn(e,t,r,i,n){if(!Et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const a=Cc(e);if(a===0)return e;const o=new Proxy(e,a===2?i:r);return n.set(e,o),o}function Ye(e){return mr(e)?Ye(e.__v_raw):!!(e&&e.__v_isReactive)}function mr(e){return!!(e&&e.__v_isReadonly)}function ws(e){return!!(e&&e.__v_isShallow)}function xs(e){return Ye(e)||mr(e)}function at(e){const t=e&&e.__v_raw;return t?at(t):e}function Es(e){return zi(e,"__v_skip",!0),e}const ei=e=>Et(e)?ln(e):e,Ts=e=>Et(e)?Ss(e):e;function Ps(e){Ee&&ne&&(e=at(e),Co(e.dep||(e.dep=ys())))}function cn(e,t){e=at(e),e.dep&&zn(e.dep)}function At(e){return!!(e&&e.__v_isRef===!0)}function Fi(e){return Ro(e,!1)}function wc(e){return Ro(e,!0)}function Ro(e,t){return At(e)?e:new xc(e,t)}class xc{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:at(t),this._value=r?t:ei(t)}get value(){return Ps(this),this._value}set value(t){t=this.__v_isShallow?t:at(t),ti(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:ei(t),cn(this))}}function Ec(e){cn(e)}function Oo(e){return At(e)?e.value:e}const Tc={get:(e,t,r)=>Oo(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return At(n)&&!At(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function As(e){return Ye(e)?e:new Proxy(e,Tc)}class Pc{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:r,set:i}=t(()=>Ps(this),()=>cn(this));this._get=r,this._set=i}get value(){return this._get()}set value(t){this._set(t)}}function Ac(e){return new Pc(e)}function kc(e){const t=Q(e)?new Array(e.length):{};for(const r in e)t[r]=Lo(e,r);return t}class Mc{constructor(t,r,i){this._object=t,this._key=r,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Lo(e,t,r){const i=e[t];return At(i)?i:new Mc(e,t,r)}class Rc{constructor(t,r,i,n){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new fi(t,()=>{this._dirty||(this._dirty=!0,cn(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const t=at(this);return Ps(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Oc(e,t,r=!1){let i,n;const s=rt(e);return s?(i=e,n=Qt):(i=e.get,n=e.set),new Rc(i,n,s||!n,r)}Promise.resolve();const zr=[];function Io(e,...t){$e();const r=zr.length?zr[zr.length-1].component:null,i=r&&r.appContext.config.warnHandler,n=Lc();if(i)ae(i,r,11,[e+t.join(""),r&&r.proxy,n.map(({vnode:s})=>`at <${El(r,s.type)}>`).join(`
`),n]);else{const s=[`[Vue warn]: ${e}`,...t];n.length&&s.push(`
`,...Ic(n)),console.warn(...s)}qe()}function Lc(){let e=zr[zr.length-1];if(!e)return[];const t=[];for(;e;){const r=t[0];r&&r.vnode===e?r.recurseCount++:t.push({vnode:e,recurseCount:0});const i=e.component&&e.component.parent;e=i&&i.vnode}return t}function Ic(e){const t=[];return e.forEach((r,i)=>{t.push(...i===0?[]:[`
`],...Dc(r))}),t}function Dc({vnode:e,recurseCount:t}){const r=t>0?`... (${t} recursive calls)`:"",i=e.component?e.component.parent==null:!1,n=` at <${El(e.component,e.type,i)}`,s=">"+r;return e.props?[n,...Nc(e.props),s]:[n+s]}function Nc(e){const t=[],r=Object.keys(e);return r.slice(0,3).forEach(i=>{t.push(...Do(i,e[i]))}),r.length>3&&t.push(" ..."),t}function Do(e,t,r){return yt(t)?(t=JSON.stringify(t),r?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?r?t:[`${e}=${t}`]:At(t)?(t=Do(e,at(t.value),!0),r?t:[`${e}=Ref<`,t,">"]):rt(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=at(t),r?t:[`${e}=`,t])}function ae(e,t,r,i){let n;try{n=i?e(...i):e()}catch(s){Je(s,t,r)}return n}function jt(e,t,r,i){if(rt(e)){const s=ae(e,t,r,i);return s&&ms(s)&&s.catch(a=>{Je(a,t,r)}),s}const n=[];for(let s=0;s<e.length;s++)n.push(jt(e[s],t,r,i));return n}function Je(e,t,r,i=!0){const n=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,o=r;for(;s;){const h=s.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](e,a,o)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){ae(l,null,10,[e,a,o]);return}}Fc(e,r,n,i)}function Fc(e,t,r,i=!0){console.error(e)}let ji=!1,jn=!1;const Ut=[];let fe=0;const jr=[];let Dr=null,or=0;const Yr=[];let Se=null,lr=0;const No=Promise.resolve();let ks=null,Yn=null;function Ms(e){const t=ks||No;return e?t.then(this?e.bind(this):e):t}function Gc(e){let t=fe+1,r=Ut.length;for(;t<r;){const i=t+r>>>1;ri(Ut[i])<e?t=i+1:r=i}return t}function Rs(e){(!Ut.length||!Ut.includes(e,ji&&e.allowRecurse?fe+1:fe))&&e!==Yn&&(e.id==null?Ut.push(e):Ut.splice(Gc(e.id),0,e),Fo())}function Fo(){!ji&&!jn&&(jn=!0,ks=No.then(Bo))}function Bc(e){const t=Ut.indexOf(e);t>fe&&Ut.splice(t,1)}function Go(e,t,r,i){Q(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?i+1:i))&&r.push(e),Fo()}function Hc(e){Go(e,Dr,jr,or)}function Os(e){Go(e,Se,Yr,lr)}function Ls(e,t=null){if(jr.length){for(Yn=t,Dr=[...new Set(jr)],jr.length=0,or=0;or<Dr.length;or++)Dr[or]();Dr=null,or=0,Yn=null,Ls(e,t)}}function Yi(e){if(Yr.length){const t=[...new Set(Yr)];if(Yr.length=0,Se){Se.push(...t);return}for(Se=t,Se.sort((r,i)=>ri(r)-ri(i)),lr=0;lr<Se.length;lr++)Se[lr]();Se=null,lr=0}}const ri=e=>e.id==null?1/0:e.id;function Bo(e){jn=!1,ji=!0,Ls(e),Ut.sort((r,i)=>ri(r)-ri(i));const t=Qt;try{for(fe=0;fe<Ut.length;fe++){const r=Ut[fe];r&&r.active!==!1&&ae(r,null,14)}}finally{fe=0,Ut.length=0,Yi(),ji=!1,ks=null,(Ut.length||jr.length||Yr.length)&&Bo(e)}}let hr,Ci=[];function Ho(e,t){var r,i;hr=e,hr?(hr.enabled=!0,Ci.forEach(({event:n,args:s})=>hr.emit(n,...s)),Ci=[]):typeof window!="undefined"&&window.HTMLElement&&!(!((i=(r=window.navigator)===null||r===void 0?void 0:r.userAgent)===null||i===void 0)&&i.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{Ho(s,t)}),setTimeout(()=>{hr||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Ci=[])},3e3)):Ci=[]}function Uc(e,t,...r){const i=e.vnode.props||ut;let n=r;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in i){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:u}=i[c]||ut;u?n=r.map(g=>g.trim()):f&&(n=r.map(Ae))}let o,l=i[o=Wr(t)]||i[o=Wr(Vt(t))];!l&&s&&(l=i[o=Wr(se(t))]),l&&jt(l,e,6,n);const h=i[o+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,jt(h,e,6,n)}}function Uo(e,t,r=!1){const i=t.emitsCache,n=i.get(e);if(n!==void 0)return n;const s=e.emits;let a={},o=!1;if(!rt(e)){const l=h=>{const c=Uo(h,t,!0);c&&(o=!0,xt(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(i.set(e,null),null):(Q(s)?s.forEach(l=>a[l]=null):xt(a,s),i.set(e,a),a)}function Is(e,t){return!e||!hi(t)?!1:(t=t.slice(2).replace(/Once$/,""),ht(e,t[0].toLowerCase()+t.slice(1))||ht(e,se(t))||ht(e,t))}let zt=null,fn=null;function ii(e){const t=zt;return zt=e,fn=e&&e.type.__scopeId||null,t}function Wc(e){fn=e}function zc(){fn=null}const jc=e=>Ds;function Ds(e,t=zt,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&qn(-1);const s=ii(t),a=e(...n);return ii(s),i._d&&qn(1),a};return i._n=!0,i._c=!0,i._d=!0,i}function Gi(e){const{type:t,vnode:r,proxy:i,withProxy:n,props:s,propsOptions:[a],slots:o,attrs:l,emit:h,render:c,renderCache:f,data:u,setupState:g,ctx:d,inheritAttrs:C}=e;let p,y;const m=ii(e);try{if(r.shapeFlag&4){const w=n||i;p=Ht(c.call(w,w,f,s,g,u,d)),y=l}else{const w=t;p=Ht(w.length>1?w(s,{attrs:l,slots:o,emit:h}):w(s,null)),y=t.props?l:Vc(l)}}catch(w){$r.length=0,Je(w,e,1),p=_t(Nt)}let b=p;if(y&&C!==!1){const w=Object.keys(y),{shapeFlag:A}=b;w.length&&A&7&&(a&&w.some(gs)&&(y=Kc(y,a)),b=Re(b,y))}return r.dirs&&(b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&(b.transition=r.transition),p=b,ii(m),p}function Yc(e){let t;for(let r=0;r<e.length;r++){const i=e[r];if(Me(i)){if(i.type!==Nt||i.children==="v-if"){if(t)return;t=i}}else return}return t}const Vc=e=>{let t;for(const r in e)(r==="class"||r==="style"||hi(r))&&((t||(t={}))[r]=e[r]);return t},Kc=(e,t)=>{const r={};for(const i in e)(!gs(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r};function Xc(e,t,r){const{props:i,children:n,component:s}=e,{props:a,children:o,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?pa(i,a,h):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const u=c[f];if(a[u]!==i[u]&&!Is(h,u))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?pa(i,a,h):!0:!!a;return!1}function pa(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(t[s]!==e[s]&&!Is(r,s))return!0}return!1}function Ns({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const $c=e=>e.__isSuspense,qc={name:"Suspense",__isSuspense:!0,process(e,t,r,i,n,s,a,o,l,h){e==null?Qc(t,r,i,n,s,a,o,l,h):Zc(e,t,r,i,n,a,o,l,h)},hydrate:tf,create:Fs,normalize:ef},Jc=qc;function ni(e,t){const r=e.props&&e.props[t];rt(r)&&r()}function Qc(e,t,r,i,n,s,a,o,l){const{p:h,o:{createElement:c}}=l,f=c("div"),u=e.suspense=Fs(e,n,i,t,f,r,s,a,o,l);h(null,u.pendingBranch=e.ssContent,f,null,i,u,s,a),u.deps>0?(ni(e,"onPending"),ni(e,"onFallback"),h(null,e.ssFallback,t,r,i,null,s,a),gr(u,e.ssFallback)):u.resolve()}function Zc(e,t,r,i,n,s,a,o,{p:l,um:h,o:{createElement:c}}){const f=t.suspense=e.suspense;f.vnode=t,t.el=e.el;const u=t.ssContent,g=t.ssFallback,{activeBranch:d,pendingBranch:C,isInFallback:p,isHydrating:y}=f;if(C)f.pendingBranch=u,ie(u,C)?(l(C,u,f.hiddenContainer,null,n,f,s,a,o),f.deps<=0?f.resolve():p&&(l(d,g,r,i,n,null,s,a,o),gr(f,g))):(f.pendingId++,y?(f.isHydrating=!1,f.activeBranch=C):h(C,n,f),f.deps=0,f.effects.length=0,f.hiddenContainer=c("div"),p?(l(null,u,f.hiddenContainer,null,n,f,s,a,o),f.deps<=0?f.resolve():(l(d,g,r,i,n,null,s,a,o),gr(f,g))):d&&ie(u,d)?(l(d,u,r,i,n,f,s,a,o),f.resolve(!0)):(l(null,u,f.hiddenContainer,null,n,f,s,a,o),f.deps<=0&&f.resolve()));else if(d&&ie(u,d))l(d,u,r,i,n,f,s,a,o),gr(f,u);else if(ni(t,"onPending"),f.pendingBranch=u,f.pendingId++,l(null,u,f.hiddenContainer,null,n,f,s,a,o),f.deps<=0)f.resolve();else{const{timeout:m,pendingId:b}=f;m>0?setTimeout(()=>{f.pendingId===b&&f.fallback(g)},m):m===0&&f.fallback(g)}}function Fs(e,t,r,i,n,s,a,o,l,h,c=!1){const{p:f,m:u,um:g,n:d,o:{parentNode:C,remove:p}}=h,y=Ae(e.props&&e.props.timeout),m={vnode:e,parent:t,parentComponent:r,isSVG:a,container:i,hiddenContainer:n,anchor:s,deps:0,pendingId:0,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(b=!1){const{vnode:w,activeBranch:A,pendingBranch:T,pendingId:E,effects:M,parentComponent:O,container:I}=m;if(m.isHydrating)m.isHydrating=!1;else if(!b){const P=A&&T.transition&&T.transition.mode==="out-in";P&&(A.transition.afterLeave=()=>{E===m.pendingId&&u(T,I,L,0)});let{anchor:L}=m;A&&(L=d(A),g(A,O,m,!0)),P||u(T,I,L,0)}gr(m,T),m.pendingBranch=null,m.isInFallback=!1;let D=m.parent,k=!1;for(;D;){if(D.pendingBranch){D.effects.push(...M),k=!0;break}D=D.parent}k||Os(M),m.effects=[],ni(w,"onResolve")},fallback(b){if(!m.pendingBranch)return;const{vnode:w,activeBranch:A,parentComponent:T,container:E,isSVG:M}=m;ni(w,"onFallback");const O=d(A),I=()=>{!m.isInFallback||(f(null,b,E,O,T,null,M,o,l),gr(m,b))},D=b.transition&&b.transition.mode==="out-in";D&&(A.transition.afterLeave=I),m.isInFallback=!0,g(A,T,null,!0),D||I()},move(b,w,A){m.activeBranch&&u(m.activeBranch,b,w,A),m.container=b},next(){return m.activeBranch&&d(m.activeBranch)},registerDep(b,w){const A=!!m.pendingBranch;A&&m.deps++;const T=b.vnode.el;b.asyncDep.catch(E=>{Je(E,b,0)}).then(E=>{if(b.isUnmounted||m.isUnmounted||m.pendingId!==b.suspenseId)return;b.asyncResolved=!0;const{vnode:M}=b;Zn(b,E,!1),T&&(M.el=T);const O=!T&&b.subTree.el;w(b,M,C(T||b.subTree.el),T?null:d(b.subTree),m,a,l),O&&p(O),Ns(b,M.el),A&&--m.deps===0&&m.resolve()})},unmount(b,w){m.isUnmounted=!0,m.activeBranch&&g(m.activeBranch,r,b,w),m.pendingBranch&&g(m.pendingBranch,r,b,w)}};return m}function tf(e,t,r,i,n,s,a,o,l){const h=t.suspense=Fs(t,i,r,e.parentNode,document.createElement("div"),null,n,s,a,o,!0),c=l(e,h.pendingBranch=t.ssContent,r,h,s,a);return h.deps===0&&h.resolve(),c}function ef(e){const{shapeFlag:t,children:r}=e,i=t&32;e.ssContent=va(i?r.default:r),e.ssFallback=i?va(r.fallback):_t(Nt)}function va(e){let t;if(rt(e)){const r=yr&&e._c;r&&(e._d=!1,mn()),e=e(),r&&(e._d=!0,t=oe,gl())}return Q(e)&&(e=Yc(e)),e=Ht(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(r=>r!==e)),e}function Wo(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):Os(e)}function gr(e,t){e.activeBranch=t;const{vnode:r,parentComponent:i}=e,n=r.el=t.el;i&&i.subTree===r&&(i.vnode.el=n,Ns(i,n))}function zo(e,t){if(kt){let r=kt.provides;const i=kt.parent&&kt.parent.provides;i===r&&(r=kt.provides=Object.create(i)),r[e]=t}}function Vr(e,t,r=!1){const i=kt||zt;if(i){const n=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(n&&e in n)return n[e];if(arguments.length>1)return r&&rt(t)?t.call(i.proxy):t}}function rf(e,t){return ui(e,null,t)}function jo(e,t){return ui(e,null,{flush:"post"})}function nf(e,t){return ui(e,null,{flush:"sync"})}const ma={};function Kr(e,t,r){return ui(e,t,r)}function ui(e,t,{immediate:r,deep:i,flush:n,onTrack:s,onTrigger:a}=ut){const o=kt;let l,h=!1,c=!1;if(At(e)?(l=()=>e.value,h=ws(e)):Ye(e)?(l=()=>e,i=!0):Q(e)?(c=!0,h=e.some(Ye),l=()=>e.map(y=>{if(At(y))return y.value;if(Ye(y))return ze(y);if(rt(y))return ae(y,o,2)})):rt(e)?t?l=()=>ae(e,o,2):l=()=>{if(!(o&&o.isUnmounted))return f&&f(),jt(e,o,3,[u])}:l=Qt,t&&i){const y=l;l=()=>ze(y())}let f,u=y=>{f=p.onStop=()=>{ae(y,o,4)}};if(Cr)return u=Qt,t?r&&jt(t,o,3,[l(),c?[]:void 0,u]):l(),Qt;let g=c?[]:ma;const d=()=>{if(!!p.active)if(t){const y=p.run();(i||h||(c?y.some((m,b)=>ti(m,g[b])):ti(y,g)))&&(f&&f(),jt(t,o,3,[y,g===ma?void 0:g,u]),g=y)}else p.run()};d.allowRecurse=!!t;let C;n==="sync"?C=d:n==="post"?C=()=>Ot(d,o&&o.suspense):C=()=>{!o||o.isMounted?Hc(d):d()};const p=new fi(l,C);return t?r?d():g=p.run():n==="post"?Ot(p.run.bind(p),o&&o.suspense):p.run(),()=>{p.stop(),o&&o.scope&&ps(o.scope.effects,p)}}function sf(e,t,r){const i=this.proxy,n=yt(e)?e.includes(".")?Yo(i,e):()=>i[e]:e.bind(i,i);let s;rt(t)?s=t:(s=t.handler,r=t);const a=kt;Oe(this);const o=ui(n,s.bind(i),r);return a?Oe(a):Te(),o}function Yo(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function ze(e,t){if(!Et(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),At(e))ze(e.value,t);else if(Q(e))for(let r=0;r<e.length;r++)ze(e[r],t);else if(Xe(e)||ur(e))e.forEach(r=>{ze(r,t)});else if(vo(e))for(const r in e)ze(e[r],t);return e}function Gs(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return gi(()=>{e.isMounted=!0}),pn(()=>{e.isUnmounting=!0}),e}const Xt=[Function,Array],af={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Xt,onEnter:Xt,onAfterEnter:Xt,onEnterCancelled:Xt,onBeforeLeave:Xt,onLeave:Xt,onAfterLeave:Xt,onLeaveCancelled:Xt,onBeforeAppear:Xt,onAppear:Xt,onAfterAppear:Xt,onAppearCancelled:Xt},setup(e,{slots:t}){const r=Ie(),i=Gs();let n;return()=>{const s=t.default&&un(t.default(),!0);if(!s||!s.length)return;const a=at(e),{mode:o}=a,l=s[0];if(i.isLeaving)return xn(l);const h=_a(l);if(!h)return xn(l);const c=_r(h,a,i,r);Ke(h,c);const f=r.subTree,u=f&&_a(f);let g=!1;const{getTransitionKey:d}=h.type;if(d){const C=d();n===void 0?n=C:C!==n&&(n=C,g=!0)}if(u&&u.type!==Nt&&(!ie(h,u)||g)){const C=_r(u,a,i,r);if(Ke(u,C),o==="out-in")return i.isLeaving=!0,C.afterLeave=()=>{i.isLeaving=!1,r.update()},xn(l);o==="in-out"&&h.type!==Nt&&(C.delayLeave=(p,y,m)=>{const b=Vo(i,u);b[String(u.key)]=u,p._leaveCb=()=>{y(),p._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=m})}return l}}},Bs=af;function Vo(e,t){const{leavingVNodes:r}=e;let i=r.get(t.type);return i||(i=Object.create(null),r.set(t.type,i)),i}function _r(e,t,r,i){const{appear:n,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:h,onEnterCancelled:c,onBeforeLeave:f,onLeave:u,onAfterLeave:g,onLeaveCancelled:d,onBeforeAppear:C,onAppear:p,onAfterAppear:y,onAppearCancelled:m}=t,b=String(e.key),w=Vo(r,e),A=(E,M)=>{E&&jt(E,i,9,M)},T={mode:s,persisted:a,beforeEnter(E){let M=o;if(!r.isMounted)if(n)M=C||o;else return;E._leaveCb&&E._leaveCb(!0);const O=w[b];O&&ie(e,O)&&O.el._leaveCb&&O.el._leaveCb(),A(M,[E])},enter(E){let M=l,O=h,I=c;if(!r.isMounted)if(n)M=p||l,O=y||h,I=m||c;else return;let D=!1;const k=E._enterCb=P=>{D||(D=!0,P?A(I,[E]):A(O,[E]),T.delayedLeave&&T.delayedLeave(),E._enterCb=void 0)};M?(M(E,k),M.length<=1&&k()):k()},leave(E,M){const O=String(e.key);if(E._enterCb&&E._enterCb(!0),r.isUnmounting)return M();A(f,[E]);let I=!1;const D=E._leaveCb=k=>{I||(I=!0,M(),k?A(d,[E]):A(g,[E]),E._leaveCb=void 0,w[O]===e&&delete w[O])};w[O]=e,u?(u(E,D),u.length<=1&&D()):D()},clone(E){return _r(E,t,r,i)}};return T}function xn(e){if(di(e))return e=Re(e),e.children=null,e}function _a(e){return di(e)?e.children?e.children[0]:void 0:e}function Ke(e,t){e.shapeFlag&6&&e.component?Ke(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function un(e,t=!1){let r=[],i=0;for(let n=0;n<e.length;n++){const s=e[n];s.type===Lt?(s.patchFlag&128&&i++,r=r.concat(un(s.children,t))):(t||s.type!==Nt)&&r.push(s)}if(i>1)for(let n=0;n<r.length;n++)r[n].patchFlag=-2;return r}function Hs(e){return rt(e)?{setup:e,name:e.name}:e}const si=e=>!!e.type.__asyncLoader;function of(e){rt(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:i,delay:n=200,timeout:s,suspensible:a=!0,onError:o}=e;let l=null,h,c=0;const f=()=>(c++,l=null,u()),u=()=>{let g;return l||(g=l=t().catch(d=>{if(d=d instanceof Error?d:new Error(String(d)),o)return new Promise((C,p)=>{o(d,()=>C(f()),()=>p(d),c+1)});throw d}).then(d=>g!==l&&l?l:(d&&(d.__esModule||d[Symbol.toStringTag]==="Module")&&(d=d.default),h=d,d)))};return Hs({name:"AsyncComponentWrapper",__asyncLoader:u,get __asyncResolved(){return h},setup(){const g=kt;if(h)return()=>En(h,g);const d=m=>{l=null,Je(m,g,13,!i)};if(a&&g.suspense||Cr)return u().then(m=>()=>En(m,g)).catch(m=>(d(m),()=>i?_t(i,{error:m}):null));const C=Fi(!1),p=Fi(),y=Fi(!!n);return n&&setTimeout(()=>{y.value=!1},n),s!=null&&setTimeout(()=>{if(!C.value&&!p.value){const m=new Error(`Async component timed out after ${s}ms.`);d(m),p.value=m}},s),u().then(()=>{C.value=!0,g.parent&&di(g.parent.vnode)&&Rs(g.parent.update)}).catch(m=>{d(m),p.value=m}),()=>{if(C.value&&h)return En(h,g);if(p.value&&i)return _t(i,{error:p.value});if(r&&!y.value)return _t(r)}}})}function En(e,{vnode:{ref:t,props:r,children:i}}){const n=_t(e,r,i);return n.ref=t,n}const di=e=>e.type.__isKeepAlive,lf={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const r=Ie(),i=r.ctx;if(!i.renderer)return t.default;const n=new Map,s=new Set;let a=null;const o=r.suspense,{renderer:{p:l,m:h,um:c,o:{createElement:f}}}=i,u=f("div");i.activate=(m,b,w,A,T)=>{const E=m.component;h(m,b,w,0,o),l(E.vnode,m,b,w,E,o,A,m.slotScopeIds,T),Ot(()=>{E.isDeactivated=!1,E.a&&dr(E.a);const M=m.props&&m.props.onVnodeMounted;M&&Gt(M,E.parent,m)},o)},i.deactivate=m=>{const b=m.component;h(m,u,null,1,o),Ot(()=>{b.da&&dr(b.da);const w=m.props&&m.props.onVnodeUnmounted;w&&Gt(w,b.parent,m),b.isDeactivated=!0},o)};function g(m){Tn(m),c(m,r,o,!0)}function d(m){n.forEach((b,w)=>{const A=qi(b.type);A&&(!m||!m(A))&&C(w)})}function C(m){const b=n.get(m);!a||b.type!==a.type?g(b):a&&Tn(a),n.delete(m),s.delete(m)}Kr(()=>[e.include,e.exclude],([m,b])=>{m&&d(w=>Nr(m,w)),b&&d(w=>!Nr(b,w))},{flush:"post",deep:!0});let p=null;const y=()=>{p!=null&&n.set(p,Pn(r.subTree))};return gi(y),gn(y),pn(()=>{n.forEach(m=>{const{subTree:b,suspense:w}=r,A=Pn(b);if(m.type===A.type){Tn(A);const T=A.component.da;T&&Ot(T,w);return}g(m)})}),()=>{if(p=null,!t.default)return null;const m=t.default(),b=m[0];if(m.length>1)return a=null,m;if(!Me(b)||!(b.shapeFlag&4)&&!(b.shapeFlag&128))return a=null,b;let w=Pn(b);const A=w.type,T=qi(si(w)?w.type.__asyncResolved||{}:A),{include:E,exclude:M,max:O}=e;if(E&&(!T||!Nr(E,T))||M&&T&&Nr(M,T))return a=w,b;const I=w.key==null?A:w.key,D=n.get(I);return w.el&&(w=Re(w),b.shapeFlag&128&&(b.ssContent=w)),p=I,D?(w.el=D.el,w.component=D.component,w.transition&&Ke(w,w.transition),w.shapeFlag|=512,s.delete(I),s.add(I)):(s.add(I),O&&s.size>parseInt(O,10)&&C(s.values().next().value)),w.shapeFlag|=256,a=w,b}}},hf=lf;function Nr(e,t){return Q(e)?e.some(r=>Nr(r,t)):yt(e)?e.split(",").includes(t):e.test?e.test(t):!1}function Ko(e,t){$o(e,"a",t)}function Xo(e,t){$o(e,"da",t)}function $o(e,t,r=kt){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(dn(t,i,r),r){let n=r.parent;for(;n&&n.parent;)di(n.parent.vnode)&&cf(i,t,r,n),n=n.parent}}function cf(e,t,r,i){const n=dn(t,e,i,!0);vn(()=>{ps(i[t],n)},r)}function Tn(e){let t=e.shapeFlag;t&256&&(t-=256),t&512&&(t-=512),e.shapeFlag=t}function Pn(e){return e.shapeFlag&128?e.ssContent:e}function dn(e,t,r=kt,i=!1){if(r){const n=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;$e(),Oe(r);const o=jt(t,r,e,a);return Te(),qe(),o});return i?n.unshift(s):n.push(s),s}}const ge=e=>(t,r=kt)=>(!Cr||e==="sp")&&dn(e,t,r),qo=ge("bm"),gi=ge("m"),Jo=ge("bu"),gn=ge("u"),pn=ge("bum"),vn=ge("um"),Qo=ge("sp"),Zo=ge("rtg"),tl=ge("rtc");function el(e,t=kt){dn("ec",e,t)}let Vn=!0;function ff(e){const t=il(e),r=e.proxy,i=e.ctx;Vn=!1,t.beforeCreate&&ba(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:h,created:c,beforeMount:f,mounted:u,beforeUpdate:g,updated:d,activated:C,deactivated:p,beforeDestroy:y,beforeUnmount:m,destroyed:b,unmounted:w,render:A,renderTracked:T,renderTriggered:E,errorCaptured:M,serverPrefetch:O,expose:I,inheritAttrs:D,components:k,directives:P,filters:L}=t;if(h&&uf(h,i,null,e.appContext.config.unwrapInjectedRef),a)for(const K in a){const Z=a[K];rt(Z)&&(i[K]=Z.bind(r))}if(n){const K=n.call(r,r);Et(K)&&(e.data=ln(K))}if(Vn=!0,s)for(const K in s){const Z=s[K],nt=rt(Z)?Z.bind(r,r):rt(Z.get)?Z.get.bind(r,r):Qt,q=!rt(Z)&&rt(Z.set)?Z.set.bind(r):Qt,st=Tl({get:nt,set:q});Object.defineProperty(i,K,{enumerable:!0,configurable:!0,get:()=>st.value,set:ft=>st.value=ft})}if(o)for(const K in o)rl(o[K],i,r,K);if(l){const K=rt(l)?l.call(r):l;Reflect.ownKeys(K).forEach(Z=>{zo(Z,K[Z])})}c&&ba(c,e,"c");function Y(K,Z){Q(Z)?Z.forEach(nt=>K(nt.bind(r))):Z&&K(Z.bind(r))}if(Y(qo,f),Y(gi,u),Y(Jo,g),Y(gn,d),Y(Ko,C),Y(Xo,p),Y(el,M),Y(tl,T),Y(Zo,E),Y(pn,m),Y(vn,w),Y(Qo,O),Q(I))if(I.length){const K=e.exposed||(e.exposed={});I.forEach(Z=>{Object.defineProperty(K,Z,{get:()=>r[Z],set:nt=>r[Z]=nt})})}else e.exposed||(e.exposed={});A&&e.render===Qt&&(e.render=A),D!=null&&(e.inheritAttrs=D),k&&(e.components=k),P&&(e.directives=P)}function uf(e,t,r=Qt,i=!1){Q(e)&&(e=Kn(e));for(const n in e){const s=e[n];let a;Et(s)?"default"in s?a=Vr(s.from||n,s.default,!0):a=Vr(s.from||n):a=Vr(s),At(a)&&i?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[n]=a}}function ba(e,t,r){jt(Q(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function rl(e,t,r,i){const n=i.includes(".")?Yo(r,i):()=>r[i];if(yt(e)){const s=t[e];rt(s)&&Kr(n,s)}else if(rt(e))Kr(n,e.bind(r));else if(Et(e))if(Q(e))e.forEach(s=>rl(s,t,r,i));else{const s=rt(e.handler)?e.handler.bind(r):t[e.handler];rt(s)&&Kr(n,s,e)}}function il(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!n.length&&!r&&!i?l=t:(l={},n.length&&n.forEach(h=>Vi(l,h,a,!0)),Vi(l,t,a)),s.set(t,l),l}function Vi(e,t,r,i=!1){const{mixins:n,extends:s}=t;s&&Vi(e,s,r,!0),n&&n.forEach(a=>Vi(e,a,r,!0));for(const a in t)if(!(i&&a==="expose")){const o=df[a]||r&&r[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const df={data:ya,props:He,emits:He,methods:He,computed:He,beforeCreate:Dt,created:Dt,beforeMount:Dt,mounted:Dt,beforeUpdate:Dt,updated:Dt,beforeDestroy:Dt,beforeUnmount:Dt,destroyed:Dt,unmounted:Dt,activated:Dt,deactivated:Dt,errorCaptured:Dt,serverPrefetch:Dt,components:He,directives:He,watch:pf,provide:ya,inject:gf};function ya(e,t){return t?e?function(){return xt(rt(e)?e.call(this,this):e,rt(t)?t.call(this,this):t)}:t:e}function gf(e,t){return He(Kn(e),Kn(t))}function Kn(e){if(Q(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Dt(e,t){return e?[...new Set([].concat(e,t))]:t}function He(e,t){return e?xt(xt(Object.create(null),e),t):t}function pf(e,t){if(!e)return t;if(!t)return e;const r=xt(Object.create(null),e);for(const i in t)r[i]=Dt(e[i],t[i]);return r}function vf(e,t,r,i=!1){const n={},s={};zi(s,_n,1),e.propsDefaults=Object.create(null),nl(e,t,n,s);for(const a in e.propsOptions[0])a in n||(n[a]=void 0);r?e.props=i?n:Mo(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function mf(e,t,r,i){const{props:n,attrs:s,vnode:{patchFlag:a}}=e,o=at(n),[l]=e.propsOptions;let h=!1;if((i||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let u=c[f];const g=t[u];if(l)if(ht(s,u))g!==s[u]&&(s[u]=g,h=!0);else{const d=Vt(u);n[d]=Xn(l,o,d,g,e,!1)}else g!==s[u]&&(s[u]=g,h=!0)}}}else{nl(e,t,n,s)&&(h=!0);let c;for(const f in o)(!t||!ht(t,f)&&((c=se(f))===f||!ht(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(n[f]=Xn(l,o,f,void 0,e,!0)):delete n[f]);if(s!==o)for(const f in s)(!t||!ht(t,f)&&!0)&&(delete s[f],h=!0)}h&&de(e,"set","$attrs")}function nl(e,t,r,i){const[n,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(Ur(l))continue;const h=t[l];let c;n&&ht(n,c=Vt(l))?!s||!s.includes(c)?r[c]=h:(o||(o={}))[c]=h:Is(e.emitsOptions,l)||(!(l in i)||h!==i[l])&&(i[l]=h,a=!0)}if(s){const l=at(r),h=o||ut;for(let c=0;c<s.length;c++){const f=s[c];r[f]=Xn(n,l,f,h[f],e,!ht(h,f))}}return a}function Xn(e,t,r,i,n,s){const a=e[r];if(a!=null){const o=ht(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&rt(l)){const{propsDefaults:h}=n;r in h?i=h[r]:(Oe(n),i=h[r]=l.call(null,t),Te())}else i=l}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===se(r))&&(i=!0))}return i}function sl(e,t,r=!1){const i=t.propsCache,n=i.get(e);if(n)return n;const s=e.props,a={},o=[];let l=!1;if(!rt(e)){const c=f=>{l=!0;const[u,g]=sl(f,t,!0);xt(a,u),g&&o.push(...g)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return i.set(e,fr),fr;if(Q(s))for(let c=0;c<s.length;c++){const f=Vt(s[c]);Ca(f)&&(a[f]=ut)}else if(s)for(const c in s){const f=Vt(c);if(Ca(f)){const u=s[c],g=a[f]=Q(u)||rt(u)?{type:u}:u;if(g){const d=xa(Boolean,g.type),C=xa(String,g.type);g[0]=d>-1,g[1]=C<0||d<C,(d>-1||ht(g,"default"))&&o.push(f)}}}const h=[a,o];return i.set(e,h),h}function Ca(e){return e[0]!=="$"}function Sa(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function wa(e,t){return Sa(e)===Sa(t)}function xa(e,t){return Q(t)?t.findIndex(r=>wa(r,e)):rt(t)&&wa(t,e)?0:-1}const al=e=>e[0]==="_"||e==="$stable",Us=e=>Q(e)?e.map(Ht):[Ht(e)],_f=(e,t,r)=>{const i=Ds((...n)=>Us(t(...n)),r);return i._c=!1,i},ol=(e,t,r)=>{const i=e._ctx;for(const n in e){if(al(n))continue;const s=e[n];if(rt(s))t[n]=_f(n,s,i);else if(s!=null){const a=Us(s);t[n]=()=>a}}},ll=(e,t)=>{const r=Us(t);e.slots.default=()=>r},bf=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=at(t),zi(t,"_",r)):ol(t,e.slots={})}else e.slots={},t&&ll(e,t);zi(e.slots,_n,1)},yf=(e,t,r)=>{const{vnode:i,slots:n}=e;let s=!0,a=ut;if(i.shapeFlag&32){const o=t._;o?r&&o===1?s=!1:(xt(n,t),!r&&o===1&&delete n._):(s=!t.$stable,ol(t,n)),a=t}else t&&(ll(e,t),a={default:1});if(s)for(const o in n)!al(o)&&!(o in a)&&delete n[o]};function Cf(e,t){const r=zt;if(r===null)return e;const i=r.proxy,n=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,o,l,h=ut]=t[s];rt(a)&&(a={mounted:a,updated:a}),a.deep&&ze(o),n.push({dir:a,instance:i,value:o,oldValue:void 0,arg:l,modifiers:h})}return e}function re(e,t,r,i){const n=e.dirs,s=t&&t.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&($e(),jt(l,r,8,[e.el,o,e,t]),qe())}}function hl(){return{app:null,config:{isNativeTag:Gh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sf=0;function wf(e,t){return function(i,n=null){n!=null&&!Et(n)&&(n=null);const s=hl(),a=new Set;let o=!1;const l=s.app={_uid:Sf++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:Rl,get config(){return s.config},set config(h){},use(h,...c){return a.has(h)||(h&&rt(h.install)?(a.add(h),h.install(l,...c)):rt(h)&&(a.add(h),h(l,...c))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,c){return c?(s.components[h]=c,l):s.components[h]},directive(h,c){return c?(s.directives[h]=c,l):s.directives[h]},mount(h,c,f){if(!o){const u=_t(i,n);return u.appContext=s,c&&t?t(u,h):e(u,h,f),o=!0,l._container=h,h.__vue_app__=l,$s(u.component)||u.component.proxy}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,c){return s.provides[h]=c,l}};return l}}function Ki(e,t,r,i,n=!1){if(Q(e)){e.forEach((u,g)=>Ki(u,t&&(Q(t)?t[g]:t),r,i,n));return}if(si(i)&&!n)return;const s=i.shapeFlag&4?$s(i.component)||i.component.proxy:i.el,a=n?null:s,{i:o,r:l}=e,h=t&&t.r,c=o.refs===ut?o.refs={}:o.refs,f=o.setupState;if(h!=null&&h!==l&&(yt(h)?(c[h]=null,ht(f,h)&&(f[h]=null)):At(h)&&(h.value=null)),rt(l))ae(l,o,12,[a,c]);else{const u=yt(l),g=At(l);if(u||g){const d=()=>{if(e.f){const C=u?c[l]:l.value;n?Q(C)&&ps(C,s):Q(C)?C.includes(s)||C.push(s):u?c[l]=[s]:(l.value=[s],e.k&&(c[e.k]=l.value))}else u?(c[l]=a,ht(f,l)&&(f[l]=a)):At(l)&&(l.value=a,e.k&&(c[e.k]=a))};a?(d.id=-1,Ot(d,r)):d()}}}let ye=!1;const Si=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",An=e=>e.nodeType===8;function xf(e){const{mt:t,p:r,o:{patchProp:i,nextSibling:n,parentNode:s,remove:a,insert:o,createComment:l}}=e,h=(p,y)=>{if(!y.hasChildNodes()){r(null,p,y),Yi();return}ye=!1,c(y.firstChild,p,null,null,null),Yi(),ye&&console.error("Hydration completed but contains mismatches.")},c=(p,y,m,b,w,A=!1)=>{const T=An(p)&&p.data==="[",E=()=>d(p,y,m,b,w,T),{type:M,ref:O,shapeFlag:I}=y,D=p.nodeType;y.el=p;let k=null;switch(M){case br:D!==3?k=E():(p.data!==y.children&&(ye=!0,p.data=y.children),k=n(p));break;case Nt:D!==8||T?k=E():k=n(p);break;case Ve:if(D!==1)k=E();else{k=p;const P=!y.children.length;for(let L=0;L<y.staticCount;L++)P&&(y.children+=k.outerHTML),L===y.staticCount-1&&(y.anchor=k),k=n(k);return k}break;case Lt:T?k=g(p,y,m,b,w,A):k=E();break;default:if(I&1)D!==1||y.type.toLowerCase()!==p.tagName.toLowerCase()?k=E():k=f(p,y,m,b,w,A);else if(I&6){y.slotScopeIds=w;const P=s(p);if(t(y,P,null,m,b,Si(P),A),k=T?C(p):n(p),si(y)){let L;T?(L=_t(Lt),L.anchor=k?k.previousSibling:P.lastChild):L=p.nodeType===3?Ks(""):_t("div"),L.el=p,y.component.subTree=L}}else I&64?D!==8?k=E():k=y.type.hydrate(p,y,m,b,w,A,e,u):I&128&&(k=y.type.hydrate(p,y,m,b,Si(s(p)),w,A,e,c))}return O!=null&&Ki(O,null,b,y),k},f=(p,y,m,b,w,A)=>{A=A||!!y.dynamicChildren;const{type:T,props:E,patchFlag:M,shapeFlag:O,dirs:I}=y,D=T==="input"&&I||T==="option";if(D||M!==-1){if(I&&re(y,null,m,"created"),E)if(D||!A||M&48)for(const P in E)(D&&P.endsWith("value")||hi(P)&&!Ur(P))&&i(p,P,null,E[P],!1,void 0,m);else E.onClick&&i(p,"onClick",null,E.onClick,!1,void 0,m);let k;if((k=E&&E.onVnodeBeforeMount)&&Gt(k,m,y),I&&re(y,null,m,"beforeMount"),((k=E&&E.onVnodeMounted)||I)&&Wo(()=>{k&&Gt(k,m,y),I&&re(y,null,m,"mounted")},b),O&16&&!(E&&(E.innerHTML||E.textContent))){let P=u(p.firstChild,y,p,m,b,w,A);for(;P;){ye=!0;const L=P;P=P.nextSibling,a(L)}}else O&8&&p.textContent!==y.children&&(ye=!0,p.textContent=y.children)}return p.nextSibling},u=(p,y,m,b,w,A,T)=>{T=T||!!y.dynamicChildren;const E=y.children,M=E.length;for(let O=0;O<M;O++){const I=T?E[O]:E[O]=Ht(E[O]);if(p)p=c(p,I,b,w,A,T);else{if(I.type===br&&!I.children)continue;ye=!0,r(null,I,m,null,b,w,Si(m),A)}}return p},g=(p,y,m,b,w,A)=>{const{slotScopeIds:T}=y;T&&(w=w?w.concat(T):T);const E=s(p),M=u(n(p),y,E,m,b,w,A);return M&&An(M)&&M.data==="]"?n(y.anchor=M):(ye=!0,o(y.anchor=l("]"),E,M),M)},d=(p,y,m,b,w,A)=>{if(ye=!0,y.el=null,A){const M=C(p);for(;;){const O=n(p);if(O&&O!==M)a(O);else break}}const T=n(p),E=s(p);return a(p),r(null,y,E,T,m,b,Si(E),w),T},C=p=>{let y=0;for(;p;)if(p=n(p),p&&An(p)&&(p.data==="["&&y++,p.data==="]")){if(y===0)return n(p);y--}return p};return[h,c]}const Ot=Wo;function cl(e){return ul(e)}function fl(e){return ul(e,xf)}function ul(e,t){const r=jh();r.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:h,setElementText:c,parentNode:f,nextSibling:u,setScopeId:g=Qt,cloneNode:d,insertStaticContent:C}=e,p=(_,S,R,F=null,N=null,z=null,V=!1,W=null,j=!!S.dynamicChildren)=>{if(_===S)return;_&&!ie(_,S)&&(F=Pt(_),ot(_,N,z,!0),_=null),S.patchFlag===-2&&(j=!1,S.dynamicChildren=null);const{type:B,ref:tt,shapeFlag:J}=S;switch(B){case br:y(_,S,R,F);break;case Nt:m(_,S,R,F);break;case Ve:_==null&&b(S,R,F,V);break;case Lt:P(_,S,R,F,N,z,V,W,j);break;default:J&1?T(_,S,R,F,N,z,V,W,j):J&6?L(_,S,R,F,N,z,V,W,j):(J&64||J&128)&&B.process(_,S,R,F,N,z,V,W,j,_e)}tt!=null&&N&&Ki(tt,_&&_.ref,z,S||_,!S)},y=(_,S,R,F)=>{if(_==null)i(S.el=o(S.children),R,F);else{const N=S.el=_.el;S.children!==_.children&&h(N,S.children)}},m=(_,S,R,F)=>{_==null?i(S.el=l(S.children||""),R,F):S.el=_.el},b=(_,S,R,F)=>{[_.el,_.anchor]=C(_.children,S,R,F,_.el,_.anchor)},w=({el:_,anchor:S},R,F)=>{let N;for(;_&&_!==S;)N=u(_),i(_,R,F),_=N;i(S,R,F)},A=({el:_,anchor:S})=>{let R;for(;_&&_!==S;)R=u(_),n(_),_=R;n(S)},T=(_,S,R,F,N,z,V,W,j)=>{V=V||S.type==="svg",_==null?E(S,R,F,N,z,V,W,j):I(_,S,N,z,V,W,j)},E=(_,S,R,F,N,z,V,W)=>{let j,B;const{type:tt,props:J,shapeFlag:et,transition:it,patchFlag:lt,dirs:bt}=_;if(_.el&&d!==void 0&&lt===-1)j=_.el=d(_.el);else{if(j=_.el=a(_.type,z,J&&J.is,J),et&8?c(j,_.children):et&16&&O(_.children,j,null,F,N,z&&tt!=="foreignObject",V,W),bt&&re(_,null,F,"created"),J){for(const mt in J)mt!=="value"&&!Ur(mt)&&s(j,mt,null,J[mt],z,_.children,F,N,It);"value"in J&&s(j,"value",null,J.value),(B=J.onVnodeBeforeMount)&&Gt(B,F,_)}M(j,_,_.scopeId,V,F)}bt&&re(_,null,F,"beforeMount");const pt=(!N||N&&!N.pendingBranch)&&it&&!it.persisted;pt&&it.beforeEnter(j),i(j,S,R),((B=J&&J.onVnodeMounted)||pt||bt)&&Ot(()=>{B&&Gt(B,F,_),pt&&it.enter(j),bt&&re(_,null,F,"mounted")},N)},M=(_,S,R,F,N)=>{if(R&&g(_,R),F)for(let z=0;z<F.length;z++)g(_,F[z]);if(N){let z=N.subTree;if(S===z){const V=N.vnode;M(_,V,V.scopeId,V.slotScopeIds,N.parent)}}},O=(_,S,R,F,N,z,V,W,j=0)=>{for(let B=j;B<_.length;B++){const tt=_[B]=W?xe(_[B]):Ht(_[B]);p(null,tt,S,R,F,N,z,V,W)}},I=(_,S,R,F,N,z,V)=>{const W=S.el=_.el;let{patchFlag:j,dynamicChildren:B,dirs:tt}=S;j|=_.patchFlag&16;const J=_.props||ut,et=S.props||ut;let it;R&&Ge(R,!1),(it=et.onVnodeBeforeUpdate)&&Gt(it,R,S,_),tt&&re(S,_,R,"beforeUpdate"),R&&Ge(R,!0);const lt=N&&S.type!=="foreignObject";if(B?D(_.dynamicChildren,B,W,R,F,lt,z):V||nt(_,S,W,null,R,F,lt,z,!1),j>0){if(j&16)k(W,S,J,et,R,F,N);else if(j&2&&J.class!==et.class&&s(W,"class",null,et.class,N),j&4&&s(W,"style",J.style,et.style,N),j&8){const bt=S.dynamicProps;for(let pt=0;pt<bt.length;pt++){const mt=bt[pt],Jt=J[mt],sr=et[mt];(sr!==Jt||mt==="value")&&s(W,mt,Jt,sr,N,_.children,R,F,It)}}j&1&&_.children!==S.children&&c(W,S.children)}else!V&&B==null&&k(W,S,J,et,R,F,N);((it=et.onVnodeUpdated)||tt)&&Ot(()=>{it&&Gt(it,R,S,_),tt&&re(S,_,R,"updated")},F)},D=(_,S,R,F,N,z,V)=>{for(let W=0;W<S.length;W++){const j=_[W],B=S[W],tt=j.el&&(j.type===Lt||!ie(j,B)||j.shapeFlag&70)?f(j.el):R;p(j,B,tt,null,F,N,z,V,!0)}},k=(_,S,R,F,N,z,V)=>{if(R!==F){for(const W in F){if(Ur(W))continue;const j=F[W],B=R[W];j!==B&&W!=="value"&&s(_,W,B,j,V,S.children,N,z,It)}if(R!==ut)for(const W in R)!Ur(W)&&!(W in F)&&s(_,W,R[W],null,V,S.children,N,z,It);"value"in F&&s(_,"value",R.value,F.value)}},P=(_,S,R,F,N,z,V,W,j)=>{const B=S.el=_?_.el:o(""),tt=S.anchor=_?_.anchor:o("");let{patchFlag:J,dynamicChildren:et,slotScopeIds:it}=S;it&&(W=W?W.concat(it):it),_==null?(i(B,R,F),i(tt,R,F),O(S.children,R,tt,N,z,V,W,j)):J>0&&J&64&&et&&_.dynamicChildren?(D(_.dynamicChildren,et,R,N,z,V,W),(S.key!=null||N&&S===N.subTree)&&Ws(_,S,!0)):nt(_,S,R,tt,N,z,V,W,j)},L=(_,S,R,F,N,z,V,W,j)=>{S.slotScopeIds=W,_==null?S.shapeFlag&512?N.ctx.activate(S,R,F,V,j):X(S,R,F,N,z,V,j):Y(_,S,j)},X=(_,S,R,F,N,z,V)=>{const W=_.component=yl(_,F,N);if(di(_)&&(W.ctx.renderer=_e),Sl(W),W.asyncDep){if(N&&N.registerDep(W,K),!_.el){const j=W.subTree=_t(Nt);m(null,j,S,R)}return}K(W,_,S,R,N,z,V)},Y=(_,S,R)=>{const F=S.component=_.component;if(Xc(_,S,R))if(F.asyncDep&&!F.asyncResolved){Z(F,S,R);return}else F.next=S,Bc(F.update),F.update();else S.component=_.component,S.el=_.el,F.vnode=S},K=(_,S,R,F,N,z,V)=>{const W=()=>{if(_.isMounted){let{next:tt,bu:J,u:et,parent:it,vnode:lt}=_,bt=tt,pt;Ge(_,!1),tt?(tt.el=lt.el,Z(_,tt,V)):tt=lt,J&&dr(J),(pt=tt.props&&tt.props.onVnodeBeforeUpdate)&&Gt(pt,it,tt,lt),Ge(_,!0);const mt=Gi(_),Jt=_.subTree;_.subTree=mt,p(Jt,mt,f(Jt.el),Pt(Jt),_,N,z),tt.el=mt.el,bt===null&&Ns(_,mt.el),et&&Ot(et,N),(pt=tt.props&&tt.props.onVnodeUpdated)&&Ot(()=>Gt(pt,it,tt,lt),N)}else{let tt;const{el:J,props:et}=S,{bm:it,m:lt,parent:bt}=_,pt=si(S);if(Ge(_,!1),it&&dr(it),!pt&&(tt=et&&et.onVnodeBeforeMount)&&Gt(tt,bt,S),Ge(_,!0),J&&wn){const mt=()=>{_.subTree=Gi(_),wn(J,_.subTree,_,N,null)};pt?S.type.__asyncLoader().then(()=>!_.isUnmounted&&mt()):mt()}else{const mt=_.subTree=Gi(_);p(null,mt,R,F,_,N,z),S.el=mt.el}if(lt&&Ot(lt,N),!pt&&(tt=et&&et.onVnodeMounted)){const mt=S;Ot(()=>Gt(tt,bt,mt),N)}S.shapeFlag&256&&_.a&&Ot(_.a,N),_.isMounted=!0,S=R=F=null}},j=_.effect=new fi(W,()=>Rs(_.update),_.scope),B=_.update=j.run.bind(j);B.id=_.uid,Ge(_,!0),B()},Z=(_,S,R)=>{S.component=_;const F=_.vnode.props;_.vnode=S,_.next=null,mf(_,S.props,F,R),yf(_,S.children,R),$e(),Ls(void 0,_.update),qe()},nt=(_,S,R,F,N,z,V,W,j=!1)=>{const B=_&&_.children,tt=_?_.shapeFlag:0,J=S.children,{patchFlag:et,shapeFlag:it}=S;if(et>0){if(et&128){st(B,J,R,F,N,z,V,W,j);return}else if(et&256){q(B,J,R,F,N,z,V,W,j);return}}it&8?(tt&16&&It(B,N,z),J!==B&&c(R,J)):tt&16?it&16?st(B,J,R,F,N,z,V,W,j):It(B,N,z,!0):(tt&8&&c(R,""),it&16&&O(J,R,F,N,z,V,W,j))},q=(_,S,R,F,N,z,V,W,j)=>{_=_||fr,S=S||fr;const B=_.length,tt=S.length,J=Math.min(B,tt);let et;for(et=0;et<J;et++){const it=S[et]=j?xe(S[et]):Ht(S[et]);p(_[et],it,R,null,N,z,V,W,j)}B>tt?It(_,N,z,!0,!1,J):O(S,R,F,N,z,V,W,j,J)},st=(_,S,R,F,N,z,V,W,j)=>{let B=0;const tt=S.length;let J=_.length-1,et=tt-1;for(;B<=J&&B<=et;){const it=_[B],lt=S[B]=j?xe(S[B]):Ht(S[B]);if(ie(it,lt))p(it,lt,R,null,N,z,V,W,j);else break;B++}for(;B<=J&&B<=et;){const it=_[J],lt=S[et]=j?xe(S[et]):Ht(S[et]);if(ie(it,lt))p(it,lt,R,null,N,z,V,W,j);else break;J--,et--}if(B>J){if(B<=et){const it=et+1,lt=it<tt?S[it].el:F;for(;B<=et;)p(null,S[B]=j?xe(S[B]):Ht(S[B]),R,lt,N,z,V,W,j),B++}}else if(B>et)for(;B<=J;)ot(_[B],N,z,!0),B++;else{const it=B,lt=B,bt=new Map;for(B=lt;B<=et;B++){const Bt=S[B]=j?xe(S[B]):Ht(S[B]);Bt.key!=null&&bt.set(Bt.key,B)}let pt,mt=0;const Jt=et-lt+1;let sr=!1,na=0;const Tr=new Array(Jt);for(B=0;B<Jt;B++)Tr[B]=0;for(B=it;B<=J;B++){const Bt=_[B];if(mt>=Jt){ot(Bt,N,z,!0);continue}let ee;if(Bt.key!=null)ee=bt.get(Bt.key);else for(pt=lt;pt<=et;pt++)if(Tr[pt-lt]===0&&ie(Bt,S[pt])){ee=pt;break}ee===void 0?ot(Bt,N,z,!0):(Tr[ee-lt]=B+1,ee>=na?na=ee:sr=!0,p(Bt,S[ee],R,null,N,z,V,W,j),mt++)}const sa=sr?Ef(Tr):fr;for(pt=sa.length-1,B=Jt-1;B>=0;B--){const Bt=lt+B,ee=S[Bt],aa=Bt+1<tt?S[Bt+1].el:F;Tr[B]===0?p(null,ee,R,aa,N,z,V,W,j):sr&&(pt<0||B!==sa[pt]?ft(ee,R,aa,2):pt--)}}},ft=(_,S,R,F,N=null)=>{const{el:z,type:V,transition:W,children:j,shapeFlag:B}=_;if(B&6){ft(_.component.subTree,S,R,F);return}if(B&128){_.suspense.move(S,R,F);return}if(B&64){V.move(_,S,R,_e);return}if(V===Lt){i(z,S,R);for(let J=0;J<j.length;J++)ft(j[J],S,R,F);i(_.anchor,S,R);return}if(V===Ve){w(_,S,R);return}if(F!==2&&B&1&&W)if(F===0)W.beforeEnter(z),i(z,S,R),Ot(()=>W.enter(z),N);else{const{leave:J,delayLeave:et,afterLeave:it}=W,lt=()=>i(z,S,R),bt=()=>{J(z,()=>{lt(),it&&it()})};et?et(z,lt,bt):bt()}else i(z,S,R)},ot=(_,S,R,F=!1,N=!1)=>{const{type:z,props:V,ref:W,children:j,dynamicChildren:B,shapeFlag:tt,patchFlag:J,dirs:et}=_;if(W!=null&&Ki(W,null,R,_,!0),tt&256){S.ctx.deactivate(_);return}const it=tt&1&&et,lt=!si(_);let bt;if(lt&&(bt=V&&V.onVnodeBeforeUnmount)&&Gt(bt,S,_),tt&6)Ft(_.component,R,F);else{if(tt&128){_.suspense.unmount(R,F);return}it&&re(_,null,S,"beforeUnmount"),tt&64?_.type.remove(_,S,R,N,_e,F):B&&(z!==Lt||J>0&&J&64)?It(B,S,R,!1,!0):(z===Lt&&J&384||!N&&tt&16)&&It(j,S,R),F&&Rt(_)}(lt&&(bt=V&&V.onVnodeUnmounted)||it)&&Ot(()=>{bt&&Gt(bt,S,_),it&&re(_,null,S,"unmounted")},R)},Rt=_=>{const{type:S,el:R,anchor:F,transition:N}=_;if(S===Lt){wt(R,F);return}if(S===Ve){A(_);return}const z=()=>{n(R),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(_.shapeFlag&1&&N&&!N.persisted){const{leave:V,delayLeave:W}=N,j=()=>V(R,z);W?W(_.el,z,j):j()}else z()},wt=(_,S)=>{let R;for(;_!==S;)R=u(_),n(_),_=R;n(S)},Ft=(_,S,R)=>{const{bum:F,scope:N,update:z,subTree:V,um:W}=_;F&&dr(F),N.stop(),z&&(z.active=!1,ot(V,_,S,R)),W&&Ot(W,S),Ot(()=>{_.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},It=(_,S,R,F=!1,N=!1,z=0)=>{for(let V=z;V<_.length;V++)ot(_[V],S,R,F,N)},Pt=_=>_.shapeFlag&6?Pt(_.component.subTree):_.shapeFlag&128?_.suspense.next():u(_.anchor||_.el),ir=(_,S,R)=>{_==null?S._vnode&&ot(S._vnode,null,null,!0):p(S._vnode||null,_,S,null,null,null,R),Yi(),S._vnode=_},_e={p,um:ot,m:ft,r:Rt,mt:X,mc:O,pc:nt,pbc:D,n:Pt,o:e};let nr,wn;return t&&([nr,wn]=t(_e)),{render:ir,hydrate:nr,createApp:wf(ir,nr)}}function Ge({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function Ws(e,t,r=!1){const i=e.children,n=t.children;if(Q(i)&&Q(n))for(let s=0;s<i.length;s++){const a=i[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=xe(n[s]),o.el=a.el),r||Ws(a,o))}}function Ef(e){const t=e.slice(),r=[0];let i,n,s,a,o;const l=e.length;for(i=0;i<l;i++){const h=e[i];if(h!==0){if(n=r[r.length-1],e[n]<h){t[i]=n,r.push(i);continue}for(s=0,a=r.length-1;s<a;)o=s+a>>1,e[r[o]]<h?s=o+1:a=o;h<e[r[s]]&&(s>0&&(t[i]=r[s-1]),r[s]=i)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=t[a];return r}const Tf=e=>e.__isTeleport,Xr=e=>e&&(e.disabled||e.disabled===""),Ea=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,$n=(e,t)=>{const r=e&&e.to;return yt(r)?t?t(r):null:r},Pf={__isTeleport:!0,process(e,t,r,i,n,s,a,o,l,h){const{mc:c,pc:f,pbc:u,o:{insert:g,querySelector:d,createText:C,createComment:p}}=h,y=Xr(t.props);let{shapeFlag:m,children:b,dynamicChildren:w}=t;if(e==null){const A=t.el=C(""),T=t.anchor=C("");g(A,r,i),g(T,r,i);const E=t.target=$n(t.props,d),M=t.targetAnchor=C("");E&&(g(M,E),a=a||Ea(E));const O=(I,D)=>{m&16&&c(b,I,D,n,s,a,o,l)};y?O(r,T):E&&O(E,M)}else{t.el=e.el;const A=t.anchor=e.anchor,T=t.target=e.target,E=t.targetAnchor=e.targetAnchor,M=Xr(e.props),O=M?r:T,I=M?A:E;if(a=a||Ea(T),w?(u(e.dynamicChildren,w,O,n,s,a,o),Ws(e,t,!0)):l||f(e,t,O,I,n,s,a,o,!1),y)M||wi(t,r,A,h,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const D=t.target=$n(t.props,d);D&&wi(t,D,null,h,0)}else M&&wi(t,T,E,h,1)}},remove(e,t,r,i,{um:n,o:{remove:s}},a){const{shapeFlag:o,children:l,anchor:h,targetAnchor:c,target:f,props:u}=e;if(f&&s(c),(a||!Xr(u))&&(s(h),o&16))for(let g=0;g<l.length;g++){const d=l[g];n(d,t,r,!0,!!d.dynamicChildren)}},move:wi,hydrate:Af};function wi(e,t,r,{o:{insert:i},m:n},s=2){s===0&&i(e.targetAnchor,t,r);const{el:a,anchor:o,shapeFlag:l,children:h,props:c}=e,f=s===2;if(f&&i(a,t,r),(!f||Xr(c))&&l&16)for(let u=0;u<h.length;u++)n(h[u],t,r,2);f&&i(o,t,r)}function Af(e,t,r,i,n,s,{o:{nextSibling:a,parentNode:o,querySelector:l}},h){const c=t.target=$n(t.props,l);if(c){const f=c._lpa||c.firstChild;t.shapeFlag&16&&(Xr(t.props)?(t.anchor=h(a(e),t,o(e),r,i,n,s),t.targetAnchor=f):(t.anchor=a(e),t.targetAnchor=h(f,t,c,r,i,n,s)),c._lpa=t.targetAnchor&&a(t.targetAnchor))}return t.anchor&&a(t.anchor)}const kf=Pf,zs="components",Mf="directives";function Rf(e,t){return js(zs,e,!0,t)||e}const dl=Symbol();function Of(e){return yt(e)?js(zs,e,!1)||e:e||dl}function Lf(e){return js(Mf,e)}function js(e,t,r=!0,i=!1){const n=zt||kt;if(n){const s=n.type;if(e===zs){const o=qi(s);if(o&&(o===t||o===Vt(t)||o===ci(Vt(t))))return s}const a=Ta(n[e]||s[e],t)||Ta(n.appContext[e],t);return!a&&i?s:a}}function Ta(e,t){return e&&(e[t]||e[Vt(t)]||e[ci(Vt(t))])}const Lt=Symbol(void 0),br=Symbol(void 0),Nt=Symbol(void 0),Ve=Symbol(void 0),$r=[];let oe=null;function mn(e=!1){$r.push(oe=e?null:[])}function gl(){$r.pop(),oe=$r[$r.length-1]||null}let yr=1;function qn(e){yr+=e}function pl(e){return e.dynamicChildren=yr>0?oe||fr:null,gl(),yr>0&&oe&&oe.push(e),e}function If(e,t,r,i,n,s){return pl(Vs(e,t,r,i,n,s,!0))}function Ys(e,t,r,i,n){return pl(_t(e,t,r,i,n,!0))}function Me(e){return e?e.__v_isVNode===!0:!1}function ie(e,t){return e.type===t.type&&e.key===t.key}function Df(e){}const _n="__vInternal",vl=({key:e})=>e!=null?e:null,Bi=({ref:e,ref_key:t,ref_for:r})=>e!=null?yt(e)||At(e)||rt(e)?{i:zt,r:e,k:t,f:!!r}:e:null;function Vs(e,t=null,r=null,i=0,n=null,s=e===Lt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&vl(t),ref:t&&Bi(t),scopeId:fn,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null};return o?(Xs(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=yt(r)?8:16),yr>0&&!a&&oe&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&oe.push(l),l}const _t=Nf;function Nf(e,t=null,r=null,i=0,n=null,s=!1){if((!e||e===dl)&&(e=Nt),Me(e)){const o=Re(e,t,!0);return r&&Xs(o,r),o}if(Qf(e)&&(e=e.__vccOpts),t){t=ml(t);let{class:o,style:l}=t;o&&!yt(o)&&(t.class=li(o)),Et(l)&&(xs(l)&&!Q(l)&&(l=xt({},l)),t.style=oi(l))}const a=yt(e)?1:$c(e)?128:Tf(e)?64:Et(e)?4:rt(e)?2:0;return Vs(e,t,r,i,n,a,s,!0)}function ml(e){return e?xs(e)||_n in e?xt({},e):e:null}function Re(e,t,r=!1){const{props:i,ref:n,patchFlag:s,children:a}=e,o=t?_l(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&vl(o),ref:t&&t.ref?r&&n?Q(n)?n.concat(Bi(t)):[n,Bi(t)]:Bi(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Lt?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Re(e.ssContent),ssFallback:e.ssFallback&&Re(e.ssFallback),el:e.el,anchor:e.anchor}}function Ks(e=" ",t=0){return _t(br,null,e,t)}function Ff(e,t){const r=_t(Ve,null,e);return r.staticCount=t,r}function Gf(e="",t=!1){return t?(mn(),Ys(Nt,null,e)):_t(Nt,null,e)}function Ht(e){return e==null||typeof e=="boolean"?_t(Nt):Q(e)?_t(Lt,null,e.slice()):typeof e=="object"?xe(e):_t(br,null,String(e))}function xe(e){return e.el===null||e.memo?e:Re(e)}function Xs(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Q(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),Xs(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!(_n in t)?t._ctx=zt:n===3&&zt&&(zt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else rt(t)?(t={default:t,_ctx:zt},r=32):(t=String(t),i&64?(r=16,t=[Ks(t)]):r=8);e.children=t,e.shapeFlag|=r}function _l(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=li([t.class,i.class]));else if(n==="style")t.style=oi([t.style,i.style]);else if(hi(n)){const s=t[n],a=i[n];a&&s!==a&&!(Q(s)&&s.includes(a))&&(t[n]=s?[].concat(s,a):a)}else n!==""&&(t[n]=i[n])}return t}function Gt(e,t,r,i=null){jt(e,t,7,[r,i])}function Bf(e,t,r,i){let n;const s=r&&r[i];if(Q(e)||yt(e)){n=new Array(e.length);for(let a=0,o=e.length;a<o;a++)n[a]=t(e[a],a,void 0,s&&s[a])}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,s&&s[a])}else if(Et(e))if(e[Symbol.iterator])n=Array.from(e,(a,o)=>t(a,o,void 0,s&&s[o]));else{const a=Object.keys(e);n=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const h=a[o];n[o]=t(e[h],h,o,s&&s[o])}}else n=[];return r&&(r[i]=n),n}function Hf(e,t){for(let r=0;r<t.length;r++){const i=t[r];if(Q(i))for(let n=0;n<i.length;n++)e[i[n].name]=i[n].fn;else i&&(e[i.name]=i.fn)}return e}function Uf(e,t,r={},i,n){if(zt.isCE)return _t("slot",t==="default"?null:{name:t},i&&i());let s=e[t];s&&s._c&&(s._d=!1),mn();const a=s&&bl(s(r)),o=Ys(Lt,{key:r.key||`_${t}`},a||(i?i():[]),a&&e._===1?64:-2);return!n&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function bl(e){return e.some(t=>Me(t)?!(t.type===Nt||t.type===Lt&&!bl(t.children)):!0)?e:null}function Wf(e){const t={};for(const r in e)t[Wr(r)]=e[r];return t}const Jn=e=>e?Cl(e)?$s(e)||e.proxy:Jn(e.parent):null,Xi=xt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Jn(e.parent),$root:e=>Jn(e.root),$emit:e=>e.emit,$options:e=>il(e),$forceUpdate:e=>()=>Rs(e.update),$nextTick:e=>Ms.bind(e.proxy),$watch:e=>sf.bind(e)}),Qn={get({_:e},t){const{ctx:r,setupState:i,data:n,props:s,accessCache:a,type:o,appContext:l}=e;let h;if(t[0]!=="$"){const g=a[t];if(g!==void 0)switch(g){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return s[t]}else{if(i!==ut&&ht(i,t))return a[t]=1,i[t];if(n!==ut&&ht(n,t))return a[t]=2,n[t];if((h=e.propsOptions[0])&&ht(h,t))return a[t]=3,s[t];if(r!==ut&&ht(r,t))return a[t]=4,r[t];Vn&&(a[t]=0)}}const c=Xi[t];let f,u;if(c)return t==="$attrs"&&Kt(e,"get",t),c(e);if((f=o.__cssModules)&&(f=f[t]))return f;if(r!==ut&&ht(r,t))return a[t]=4,r[t];if(u=l.config.globalProperties,ht(u,t))return u[t]},set({_:e},t,r){const{data:i,setupState:n,ctx:s}=e;return n!==ut&&ht(n,t)?(n[t]=r,!0):i!==ut&&ht(i,t)?(i[t]=r,!0):ht(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:s}},a){let o;return!!r[a]||e!==ut&&ht(e,a)||t!==ut&&ht(t,a)||(o=s[0])&&ht(o,a)||ht(i,a)||ht(Xi,a)||ht(n.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?this.set(e,t,r.get(),null):r.value!=null&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}},zf=xt({},Qn,{get(e,t){if(t!==Symbol.unscopables)return Qn.get(e,t,e)},has(e,t){return t[0]!=="_"&&!kh(t)}}),jf=hl();let Yf=0;function yl(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||jf,s={uid:Yf++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new bs(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sl(i,n),emitsOptions:Uo(i,n),emit:null,emitted:null,propsDefaults:ut,inheritAttrs:i.inheritAttrs,ctx:ut,data:ut,props:ut,attrs:ut,slots:ut,refs:ut,setupState:ut,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Uc.bind(null,s),e.ce&&e.ce(s),s}let kt=null;const Ie=()=>kt||zt,Oe=e=>{kt=e,e.scope.on()},Te=()=>{kt&&kt.scope.off(),kt=null};function Cl(e){return e.vnode.shapeFlag&4}let Cr=!1;function Sl(e,t=!1){Cr=t;const{props:r,children:i}=e.vnode,n=Cl(e);vf(e,r,n,t),bf(e,i);const s=n?Vf(e,t):void 0;return Cr=!1,s}function Vf(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Es(new Proxy(e.ctx,Qn));const{setup:i}=r;if(i){const n=e.setupContext=i.length>1?xl(e):null;Oe(e),$e();const s=ae(i,e,0,[e.props,n]);if(qe(),Te(),ms(s)){if(s.then(Te,Te),t)return s.then(a=>{Zn(e,a,t)}).catch(a=>{Je(a,e,0)});e.asyncDep=s}else Zn(e,s,t)}else wl(e,t)}function Zn(e,t,r){rt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Et(t)&&(e.setupState=As(t)),wl(e,r)}let $i,ts;function Kf(e){$i=e,ts=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,zf))}}const Xf=()=>!$i;function wl(e,t,r){const i=e.type;if(!e.render){if(!t&&$i&&!i.render){const n=i.template;if(n){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=i,h=xt(xt({isCustomElement:s,delimiters:o},a),l);i.render=$i(n,h)}}e.render=i.render||Qt,ts&&ts(e)}Oe(e),$e(),ff(e),qe(),Te()}function $f(e){return new Proxy(e.attrs,{get(t,r){return Kt(e,"get","$attrs"),t[r]}})}function xl(e){const t=i=>{e.exposed=i||{}};let r;return{get attrs(){return r||(r=$f(e))},slots:e.slots,emit:e.emit,expose:t}}function $s(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(As(Es(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Xi)return Xi[r](e)}}))}const qf=/(?:^|[-_])(\w)/g,Jf=e=>e.replace(qf,t=>t.toUpperCase()).replace(/[-_]/g,"");function qi(e){return rt(e)&&e.displayName||e.name}function El(e,t,r=!1){let i=qi(t);if(!i&&t.__file){const n=t.__file.match(/([^/\\]+)\.\w+$/);n&&(i=n[1])}if(!i&&e&&e.parent){const n=s=>{for(const a in s)if(s[a]===t)return a};i=n(e.components||e.parent.type.components)||n(e.appContext.components)}return i?Jf(i):r?"App":"Anonymous"}function Qf(e){return rt(e)&&"__vccOpts"in e}const Tl=(e,t)=>Oc(e,t,Cr);function Zf(){return null}function tu(){return null}function eu(e){}function ru(e,t){return null}function iu(){return Pl().slots}function nu(){return Pl().attrs}function Pl(){const e=Ie();return e.setupContext||(e.setupContext=xl(e))}function su(e,t){const r=Q(e)?e.reduce((i,n)=>(i[n]={},i),{}):e;for(const i in t){const n=r[i];n?Q(n)||rt(n)?r[i]={type:n,default:t[i]}:n.default=t[i]:n===null&&(r[i]={default:t[i]})}return r}function au(e,t){const r={};for(const i in e)t.includes(i)||Object.defineProperty(r,i,{enumerable:!0,get:()=>e[i]});return r}function ou(e){const t=Ie();let r=e();return Te(),ms(r)&&(r=r.catch(i=>{throw Oe(t),i})),[r,()=>Oe(t)]}function Al(e,t,r){const i=arguments.length;return i===2?Et(t)&&!Q(t)?Me(t)?_t(e,null,[t]):_t(e,t):_t(e,null,t):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&Me(r)&&(r=[r]),_t(e,t,r))}const kl=Symbol(""),lu=()=>{{const e=Vr(kl);return e||Io("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function hu(){}function cu(e,t,r,i){const n=r[i];if(n&&Ml(n,e))return n;const s=t();return s.memo=e.slice(),r[i]=s}function Ml(e,t){const r=e.memo;if(r.length!=t.length)return!1;for(let i=0;i<r.length;i++)if(r[i]!==t[i])return!1;return yr>0&&oe&&oe.push(e),!0}const Rl="3.2.31",fu={createComponentInstance:yl,setupComponent:Sl,renderComponentRoot:Gi,setCurrentRenderingInstance:ii,isVNode:Me,normalizeVNode:Ht},uu=fu,du=null,gu=null,pu="http://www.w3.org/2000/svg",We=typeof document!="undefined"?document:null,Pa=We&&We.createElement("template"),vu={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t?We.createElementNS(pu,e):We.createElement(e,r?{is:r}:void 0);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>We.createTextNode(e),createComment:e=>We.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>We.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,i,n,s){const a=r?r.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===s||!(n=n.nextSibling)););else{Pa.innerHTML=i?`<svg>${e}</svg>`:e;const o=Pa.content;if(i){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function mu(e,t,r){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function _u(e,t,r){const i=e.style,n=yt(r);if(r&&!n){for(const s in r)es(i,s,r[s]);if(t&&!yt(t))for(const s in t)r[s]==null&&es(i,s,"")}else{const s=i.display;n?t!==r&&(i.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const Aa=/\s*!important$/;function es(e,t,r){if(Q(r))r.forEach(i=>es(e,t,i));else if(t.startsWith("--"))e.setProperty(t,r);else{const i=bu(e,t);Aa.test(r)?e.setProperty(se(i),r.replace(Aa,""),"important"):e[i]=r}}const ka=["Webkit","Moz","ms"],kn={};function bu(e,t){const r=kn[t];if(r)return r;let i=Vt(t);if(i!=="filter"&&i in e)return kn[t]=i;i=ci(i);for(let n=0;n<ka.length;n++){const s=ka[n]+i;if(s in e)return kn[t]=s}return t}const Ma="http://www.w3.org/1999/xlink";function yu(e,t,r,i,n){if(i&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(Ma,t.slice(6,t.length)):e.setAttributeNS(Ma,t,r);else{const s=Rh(t);r==null||s&&!uo(r)?e.removeAttribute(t):e.setAttribute(t,s?"":r)}}function Cu(e,t,r,i,n,s,a){if(t==="innerHTML"||t==="textContent"){i&&a(i,n,s),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const o=r==null?"":r;(e.value!==o||e.tagName==="OPTION")&&(e.value=o),r==null&&e.removeAttribute(t);return}if(r===""||r==null){const o=typeof e[t];if(o==="boolean"){e[t]=uo(r);return}else if(r==null&&o==="string"){e[t]="",e.removeAttribute(t);return}else if(o==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=r}catch{}}let Ji=Date.now,Ol=!1;if(typeof window!="undefined"){Ji()>document.createEvent("Event").timeStamp&&(Ji=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Ol=!!(e&&Number(e[1])<=53)}let rs=0;const Su=Promise.resolve(),wu=()=>{rs=0},xu=()=>rs||(Su.then(wu),rs=Ji());function ue(e,t,r,i){e.addEventListener(t,r,i)}function Eu(e,t,r,i){e.removeEventListener(t,r,i)}function Tu(e,t,r,i,n=null){const s=e._vei||(e._vei={}),a=s[t];if(i&&a)a.value=i;else{const[o,l]=Pu(t);if(i){const h=s[t]=Au(i,n);ue(e,o,h,l)}else a&&(Eu(e,o,a,l),s[t]=void 0)}}const Ra=/(?:Once|Passive|Capture)$/;function Pu(e){let t;if(Ra.test(e)){t={};let r;for(;r=e.match(Ra);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[se(e.slice(2)),t]}function Au(e,t){const r=i=>{const n=i.timeStamp||Ji();(Ol||n>=r.attached-1)&&jt(ku(i,r.value),t,5,[i])};return r.value=e,r.attached=xu(),r}function ku(e,t){if(Q(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const Oa=/^on[a-z]/,Mu=(e,t,r,i,n=!1,s,a,o,l)=>{t==="class"?mu(e,i,n):t==="style"?_u(e,r,i):hi(t)?gs(t)||Tu(e,t,r,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ru(e,t,i,n))?Cu(e,t,i,s,a,o,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),yu(e,t,i,n))};function Ru(e,t,r,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&Oa.test(t)&&rt(r)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Oa.test(t)&&yt(r)?!1:t in e}function Ll(e,t){const r=Hs(e);class i extends bn{constructor(s){super(r,s,t)}}return i.def=r,i}const Ou=e=>Ll(e,Vl),Lu=typeof HTMLElement!="undefined"?HTMLElement:class{};class bn extends Lu{constructor(t,r={},i){super();this._def=t,this._props=r,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&i?i(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,Ms(()=>{this._connected||(ns(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);new MutationObserver(i=>{for(const n of i)this._setAttr(n.attributeName)}).observe(this,{attributes:!0});const t=i=>{const{props:n,styles:s}=i,a=!Q(n),o=n?a?Object.keys(n):n:[];let l;if(a)for(const h in this._props){const c=n[h];(c===Number||c&&c.type===Number)&&(this._props[h]=Ae(this._props[h]),(l||(l=Object.create(null)))[h]=!0)}this._numberProps=l;for(const h of Object.keys(this))h[0]!=="_"&&this._setProp(h,this[h],!0,!1);for(const h of o.map(Vt))Object.defineProperty(this,h,{get(){return this._getProp(h)},set(c){this._setProp(h,c)}});this._applyStyles(s),this._update()},r=this._def.__asyncLoader;r?r().then(t):t(this._def)}_setAttr(t){let r=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(r=Ae(r)),this._setProp(Vt(t),r,!1)}_getProp(t){return this._props[t]}_setProp(t,r,i=!0,n=!0){r!==this._props[t]&&(this._props[t]=r,n&&this._instance&&this._update(),i&&(r===!0?this.setAttribute(se(t),""):typeof r=="string"||typeof r=="number"?this.setAttribute(se(t),r+""):r||this.removeAttribute(se(t))))}_update(){ns(this._createVNode(),this.shadowRoot)}_createVNode(){const t=_t(this._def,xt({},this._props));return this._instance||(t.ce=r=>{this._instance=r,r.isCE=!0,r.emit=(n,...s)=>{this.dispatchEvent(new CustomEvent(n,{detail:s}))};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof bn){r.parent=i._instance;break}}),t}_applyStyles(t){t&&t.forEach(r=>{const i=document.createElement("style");i.textContent=r,this.shadowRoot.appendChild(i)})}}function Iu(e="$style"){{const t=Ie();if(!t)return ut;const r=t.type.__cssModules;if(!r)return ut;const i=r[e];return i||ut}}function Du(e){const t=Ie();if(!t)return;const r=()=>is(t.subTree,e(t.proxy));jo(r),gi(()=>{const i=new MutationObserver(r);i.observe(t.subTree.el.parentNode,{childList:!0}),vn(()=>i.disconnect())})}function is(e,t){if(e.shapeFlag&128){const r=e.suspense;e=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{is(r.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)La(e.el,t);else if(e.type===Lt)e.children.forEach(r=>is(r,t));else if(e.type===Ve){let{el:r,anchor:i}=e;for(;r&&(La(r,t),r!==i);)r=r.nextSibling}}function La(e,t){if(e.nodeType===1){const r=e.style;for(const i in t)r.setProperty(`--${i}`,t[i])}}const Ce="transition",Pr="animation",qs=(e,{slots:t})=>Al(Bs,Dl(e),t);qs.displayName="Transition";const Il={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Nu=qs.props=xt({},Bs.props,Il),Be=(e,t=[])=>{Q(e)?e.forEach(r=>r(...t)):e&&e(...t)},Ia=e=>e?Q(e)?e.some(t=>t.length>1):e.length>1:!1;function Dl(e){const t={};for(const k in e)k in Il||(t[k]=e[k]);if(e.css===!1)return t;const{name:r="v",type:i,duration:n,enterFromClass:s=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=s,appearActiveClass:h=a,appearToClass:c=o,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:u=`${r}-leave-active`,leaveToClass:g=`${r}-leave-to`}=e,d=Fu(n),C=d&&d[0],p=d&&d[1],{onBeforeEnter:y,onEnter:m,onEnterCancelled:b,onLeave:w,onLeaveCancelled:A,onBeforeAppear:T=y,onAppear:E=m,onAppearCancelled:M=b}=t,O=(k,P,L)=>{Ue(k,P?c:o),Ue(k,P?h:a),L&&L()},I=(k,P)=>{Ue(k,g),Ue(k,u),P&&P()},D=k=>(P,L)=>{const X=k?E:m,Y=()=>O(P,k,L);Be(X,[P,Y]),Da(()=>{Ue(P,k?l:s),he(P,k?c:o),Ia(X)||Na(P,i,C,Y)})};return xt(t,{onBeforeEnter(k){Be(y,[k]),he(k,s),he(k,a)},onBeforeAppear(k){Be(T,[k]),he(k,l),he(k,h)},onEnter:D(!1),onAppear:D(!0),onLeave(k,P){const L=()=>I(k,P);he(k,f),Fl(),he(k,u),Da(()=>{Ue(k,f),he(k,g),Ia(w)||Na(k,i,p,L)}),Be(w,[k,L])},onEnterCancelled(k){O(k,!1),Be(b,[k])},onAppearCancelled(k){O(k,!0),Be(M,[k])},onLeaveCancelled(k){I(k),Be(A,[k])}})}function Fu(e){if(e==null)return null;if(Et(e))return[Mn(e.enter),Mn(e.leave)];{const t=Mn(e);return[t,t]}}function Mn(e){return Ae(e)}function he(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(t)}function Ue(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function Da(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Gu=0;function Na(e,t,r,i){const n=e._endId=++Gu,s=()=>{n===e._endId&&i()};if(r)return setTimeout(s,r);const{type:a,timeout:o,propCount:l}=Nl(e,t);if(!a)return i();const h=a+"end";let c=0;const f=()=>{e.removeEventListener(h,u),s()},u=g=>{g.target===e&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},o+1),e.addEventListener(h,u)}function Nl(e,t){const r=window.getComputedStyle(e),i=d=>(r[d]||"").split(", "),n=i(Ce+"Delay"),s=i(Ce+"Duration"),a=Fa(n,s),o=i(Pr+"Delay"),l=i(Pr+"Duration"),h=Fa(o,l);let c=null,f=0,u=0;t===Ce?a>0&&(c=Ce,f=a,u=s.length):t===Pr?h>0&&(c=Pr,f=h,u=l.length):(f=Math.max(a,h),c=f>0?a>h?Ce:Pr:null,u=c?c===Ce?s.length:l.length:0);const g=c===Ce&&/\b(transform|all)(,|$)/.test(r[Ce+"Property"]);return{type:c,timeout:f,propCount:u,hasTransform:g}}function Fa(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,i)=>Ga(r)+Ga(e[i])))}function Ga(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Fl(){return document.body.offsetHeight}const Gl=new WeakMap,Bl=new WeakMap,Bu={name:"TransitionGroup",props:xt({},Nu,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=Ie(),i=Gs();let n,s;return gn(()=>{if(!n.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!ju(n[0].el,r.vnode.el,a))return;n.forEach(Uu),n.forEach(Wu);const o=n.filter(zu);Fl(),o.forEach(l=>{const h=l.el,c=h.style;he(h,a),c.transform=c.webkitTransform=c.transitionDuration="";const f=h._moveCb=u=>{u&&u.target!==h||(!u||/transform$/.test(u.propertyName))&&(h.removeEventListener("transitionend",f),h._moveCb=null,Ue(h,a))};h.addEventListener("transitionend",f)})}),()=>{const a=at(e),o=Dl(a);let l=a.tag||Lt;n=s,s=t.default?un(t.default()):[];for(let h=0;h<s.length;h++){const c=s[h];c.key!=null&&Ke(c,_r(c,o,i,r))}if(n)for(let h=0;h<n.length;h++){const c=n[h];Ke(c,_r(c,o,i,r)),Gl.set(c,c.el.getBoundingClientRect())}return _t(l,null,s)}}},Hu=Bu;function Uu(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function Wu(e){Bl.set(e,e.el.getBoundingClientRect())}function zu(e){const t=Gl.get(e),r=Bl.get(e),i=t.left-r.left,n=t.top-r.top;if(i||n){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${n}px)`,s.transitionDuration="0s",e}}function ju(e,t,r){const i=e.cloneNode();e._vtc&&e._vtc.forEach(a=>{a.split(/\s+/).forEach(o=>o&&i.classList.remove(o))}),r.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const n=t.nodeType===1?t:t.parentNode;n.appendChild(i);const{hasTransform:s}=Nl(i);return n.removeChild(i),s}const Le=e=>{const t=e.props["onUpdate:modelValue"];return Q(t)?r=>dr(t,r):t};function Yu(e){e.target.composing=!0}function Ba(e){const t=e.target;t.composing&&(t.composing=!1,Vu(t,"input"))}function Vu(e,t){const r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)}const Qi={created(e,{modifiers:{lazy:t,trim:r,number:i}},n){e._assign=Le(n);const s=i||n.props&&n.props.type==="number";ue(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;r?o=o.trim():s&&(o=Ae(o)),e._assign(o)}),r&&ue(e,"change",()=>{e.value=e.value.trim()}),t||(ue(e,"compositionstart",Yu),ue(e,"compositionend",Ba),ue(e,"change",Ba))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:i,number:n}},s){if(e._assign=Le(s),e.composing||document.activeElement===e&&(r||i&&e.value.trim()===t||(n||e.type==="number")&&Ae(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},Js={deep:!0,created(e,t,r){e._assign=Le(r),ue(e,"change",()=>{const i=e._modelValue,n=Sr(e),s=e.checked,a=e._assign;if(Q(i)){const o=en(i,n),l=o!==-1;if(s&&!l)a(i.concat(n));else if(!s&&l){const h=[...i];h.splice(o,1),a(h)}}else if(Xe(i)){const o=new Set(i);s?o.add(n):o.delete(n),a(o)}else a(Ul(e,s))})},mounted:Ha,beforeUpdate(e,t,r){e._assign=Le(r),Ha(e,t,r)}};function Ha(e,{value:t,oldValue:r},i){e._modelValue=t,Q(t)?e.checked=en(t,i.props.value)>-1:Xe(t)?e.checked=t.has(i.props.value):t!==r&&(e.checked=Pe(t,Ul(e,!0)))}const Qs={created(e,{value:t},r){e.checked=Pe(t,r.props.value),e._assign=Le(r),ue(e,"change",()=>{e._assign(Sr(e))})},beforeUpdate(e,{value:t,oldValue:r},i){e._assign=Le(i),t!==r&&(e.checked=Pe(t,i.props.value))}},Hl={deep:!0,created(e,{value:t,modifiers:{number:r}},i){const n=Xe(t);ue(e,"change",()=>{const s=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>r?Ae(Sr(a)):Sr(a));e._assign(e.multiple?n?new Set(s):s:s[0])}),e._assign=Le(i)},mounted(e,{value:t}){Ua(e,t)},beforeUpdate(e,t,r){e._assign=Le(r)},updated(e,{value:t}){Ua(e,t)}};function Ua(e,t){const r=e.multiple;if(!(r&&!Q(t)&&!Xe(t))){for(let i=0,n=e.options.length;i<n;i++){const s=e.options[i],a=Sr(s);if(r)Q(t)?s.selected=en(t,a)>-1:s.selected=t.has(a);else if(Pe(Sr(s),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Sr(e){return"_value"in e?e._value:e.value}function Ul(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const Ku={created(e,t,r){xi(e,t,r,null,"created")},mounted(e,t,r){xi(e,t,r,null,"mounted")},beforeUpdate(e,t,r,i){xi(e,t,r,i,"beforeUpdate")},updated(e,t,r,i){xi(e,t,r,i,"updated")}};function xi(e,t,r,i,n){let s;switch(e.tagName){case"SELECT":s=Hl;break;case"TEXTAREA":s=Qi;break;default:switch(r.props&&r.props.type){case"checkbox":s=Js;break;case"radio":s=Qs;break;default:s=Qi}}const a=s[n];a&&a(e,t,r,i)}function Xu(){Qi.getSSRProps=({value:e})=>({value:e}),Qs.getSSRProps=({value:e},t)=>{if(t.props&&Pe(t.props.value,e))return{checked:!0}},Js.getSSRProps=({value:e},t)=>{if(Q(e)){if(t.props&&en(e,t.props.value)>-1)return{checked:!0}}else if(Xe(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}}}const $u=["ctrl","shift","alt","meta"],qu={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>$u.some(r=>e[`${r}Key`]&&!t.includes(r))},Ju=(e,t)=>(r,...i)=>{for(let n=0;n<t.length;n++){const s=qu[t[n]];if(s&&s(r,t))return}return e(r,...i)},Qu={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Zu=(e,t)=>r=>{if(!("key"in r))return;const i=se(r.key);if(t.some(n=>n===i||Qu[n]===i))return e(r)},Wl={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Ar(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:i}){!t!=!r&&(i?t?(i.beforeEnter(e),Ar(e,!0),i.enter(e)):i.leave(e,()=>{Ar(e,!1)}):Ar(e,t))},beforeUnmount(e,{value:t}){Ar(e,t)}};function Ar(e,t){e.style.display=t?e._vod:"none"}function td(){Wl.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const zl=xt({patchProp:Mu},vu);let qr,Wa=!1;function jl(){return qr||(qr=cl(zl))}function Yl(){return qr=Wa?qr:fl(zl),Wa=!0,qr}const ns=(...e)=>{jl().render(...e)},Vl=(...e)=>{Yl().hydrate(...e)},ed=(...e)=>{const t=jl().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=Kl(i);if(!n)return;const s=t._component;!rt(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const a=r(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},t},rd=(...e)=>{const t=Yl().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=Kl(i);if(n)return r(n,!0,n instanceof SVGElement)},t};function Kl(e){return yt(e)?document.querySelector(e):e}let za=!1;const id=()=>{za||(za=!0,Xu(),td())},nd=()=>{};var sd=Object.freeze(Object.defineProperty({__proto__:null,compile:nd,EffectScope:bs,ReactiveEffect:fi,customRef:Ac,effect:qh,effectScope:Yh,getCurrentScope:Vh,isProxy:xs,isReactive:Ye,isReadonly:mr,isRef:At,isShallow:ws,markRaw:Es,onScopeDispose:Kh,proxyRefs:As,reactive:ln,readonly:Ss,ref:Fi,shallowReactive:Mo,shallowReadonly:Sc,shallowRef:wc,stop:Jh,toRaw:at,toRef:Lo,toRefs:kc,triggerRef:Ec,unref:Oo,camelize:Vt,capitalize:ci,normalizeClass:li,normalizeProps:Dh,normalizeStyle:oi,toDisplayString:Fh,toHandlerKey:Wr,BaseTransition:Bs,Comment:Nt,Fragment:Lt,KeepAlive:hf,Static:Ve,Suspense:Jc,Teleport:kf,Text:br,callWithAsyncErrorHandling:jt,callWithErrorHandling:ae,cloneVNode:Re,compatUtils:gu,computed:Tl,createBlock:Ys,createCommentVNode:Gf,createElementBlock:If,createElementVNode:Vs,createHydrationRenderer:fl,createPropsRestProxy:au,createRenderer:cl,createSlots:Hf,createStaticVNode:Ff,createTextVNode:Ks,createVNode:_t,defineAsyncComponent:of,defineComponent:Hs,defineEmits:tu,defineExpose:eu,defineProps:Zf,get devtools(){return hr},getCurrentInstance:Ie,getTransitionRawChildren:un,guardReactiveProps:ml,h:Al,handleError:Je,initCustomFormatter:hu,inject:Vr,isMemoSame:Ml,isRuntimeOnly:Xf,isVNode:Me,mergeDefaults:su,mergeProps:_l,nextTick:Ms,onActivated:Ko,onBeforeMount:qo,onBeforeUnmount:pn,onBeforeUpdate:Jo,onDeactivated:Xo,onErrorCaptured:el,onMounted:gi,onRenderTracked:tl,onRenderTriggered:Zo,onServerPrefetch:Qo,onUnmounted:vn,onUpdated:gn,openBlock:mn,popScopeId:zc,provide:zo,pushScopeId:Wc,queuePostFlushCb:Os,registerRuntimeCompiler:Kf,renderList:Bf,renderSlot:Uf,resolveComponent:Rf,resolveDirective:Lf,resolveDynamicComponent:Of,resolveFilter:du,resolveTransitionHooks:_r,setBlockTracking:qn,setDevtoolsHook:Ho,setTransitionHooks:Ke,ssrContextKey:kl,ssrUtils:uu,toHandlers:Wf,transformVNodeArgs:Df,useAttrs:nu,useSSRContext:lu,useSlots:iu,useTransitionState:Gs,version:Rl,warn:Io,watch:Kr,watchEffect:rf,watchPostEffect:jo,watchSyncEffect:nf,withAsyncContext:ou,withCtx:Ds,withDefaults:ru,withDirectives:Cf,withMemo:cu,withScopeId:jc,Transition:qs,TransitionGroup:Hu,VueElement:bn,createApp:ed,createSSRApp:rd,defineCustomElement:Ll,defineSSRCustomElement:Ou,hydrate:Vl,initDirectivesForSSR:id,render:ns,useCssModule:Iu,useCssVars:Du,vModelCheckbox:Js,vModelDynamic:Ku,vModelRadio:Qs,vModelSelect:Hl,vModelText:Qi,vShow:Wl,withKeys:Zu,withModifiers:Ju},Symbol.toStringTag,{value:"Module"})),ad=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function od(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xl(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),t}var $l={exports:{}},ld=Xl(sd),hd=Math.PI/180;function cd(){return typeof window!="undefined"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const pr=typeof global!="undefined"?global:typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"?self:{},$={_global:pr,version:"8.3.5",isBrowser:cd(),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle(e){return $.angleDeg?e*hd:e},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window!="undefined"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return $.DD.isDragging},isDragReady(){return!!$.DD.node},document:pr.document,_injectGlobal(e){pr.Konva=e}},St=e=>{$[e.prototype.getClassName()]=e};$._injectGlobal($);class Wt{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Wt(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){var r=this.m;return{x:r[0]*t.x+r[2]*t.y+r[4],y:r[1]*t.x+r[3]*t.y+r[5]}}translate(t,r){return this.m[4]+=this.m[0]*t+this.m[2]*r,this.m[5]+=this.m[1]*t+this.m[3]*r,this}scale(t,r){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=r,this.m[3]*=r,this}rotate(t){var r=Math.cos(t),i=Math.sin(t),n=this.m[0]*r+this.m[2]*i,s=this.m[1]*r+this.m[3]*i,a=this.m[0]*-i+this.m[2]*r,o=this.m[1]*-i+this.m[3]*r;return this.m[0]=n,this.m[1]=s,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,r){var i=this.m[0]+this.m[2]*r,n=this.m[1]+this.m[3]*r,s=this.m[2]+this.m[0]*t,a=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=a,this}multiply(t){var r=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],s=this.m[1]*t.m[2]+this.m[3]*t.m[3],a=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=r,this.m[1]=i,this.m[2]=n,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),r=this.m[3]*t,i=-this.m[1]*t,n=-this.m[2]*t,s=this.m[0]*t,a=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=r,this.m[1]=i,this.m[2]=n,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}setAbsolutePosition(t,r){var i=this.m[0],n=this.m[1],s=this.m[2],a=this.m[3],o=this.m[4],l=this.m[5],h=(i*(r-l)-n*(t-o))/(i*a-n*s),c=(t-o-s*h)/i;return this.translate(c,h)}decompose(){var t=this.m[0],r=this.m[1],i=this.m[2],n=this.m[3],s=this.m[4],a=this.m[5],o=t*n-r*i;let l={x:s,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||r!=0){var h=Math.sqrt(t*t+r*r);l.rotation=r>0?Math.acos(t/h):-Math.acos(t/h),l.scaleX=h,l.scaleY=o/h,l.skewX=(t*i+r*n)/o,l.skewY=0}else if(i!=0||n!=0){var c=Math.sqrt(i*i+n*n);l.rotation=Math.PI/2-(n>0?Math.acos(-i/c):-Math.acos(i/c)),l.scaleX=o/c,l.scaleY=c,l.skewX=0,l.skewY=(t*i+r*n)/o}return l.rotation=x._getRotation(l.rotation),l}}var fd="[object Array]",ud="[object Number]",dd="[object String]",gd="[object Boolean]",pd=Math.PI/180,vd=180/Math.PI,Rn="#",md="",_d="0",bd="Konva warning: ",ja="Konva error: ",yd="rgb(",On={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Cd=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Ei=[];const Sd=typeof requestAnimationFrame!="undefined"&&requestAnimationFrame||function(e){setTimeout(e,60)},x={_isElement(e){return!!(e&&e.nodeType==1)},_isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject(e){return!!e&&e.constructor===Object},_isArray(e){return Object.prototype.toString.call(e)===fd},_isNumber(e){return Object.prototype.toString.call(e)===ud&&!isNaN(e)&&isFinite(e)},_isString(e){return Object.prototype.toString.call(e)===dd},_isBoolean(e){return Object.prototype.toString.call(e)===gd},isObject(e){return e instanceof Object},isValidSelector(e){if(typeof e!="string")return!1;var t=e[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(e){return e===0||e>0?1:-1},requestAnimFrame(e){Ei.push(e),Ei.length===1&&Sd(function(){const t=Ei;Ei=[],t.forEach(function(r){r()})})},createCanvasElement(){var e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement(){return document.createElement("img")},_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){var r=x.createImageElement();r.onload=function(){t(r)},r.src=e},_rgbToHex(e,t,r){return((1<<24)+(e<<16)+(t<<8)+r).toString(16).slice(1)},_hexToRgb(e){e=e.replace(Rn,md);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){for(var e=(Math.random()*16777215<<0).toString(16);e.length<6;)e=_d+e;return Rn+e},getRGB(e){var t;return e in On?(t=On[e],{r:t[0],g:t[1],b:t[2]}):e[0]===Rn?this._hexToRgb(e.substring(1)):e.substr(0,4)===yd?(t=Cd.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(e){return e=e||"black",x._namedColorToRBA(e)||x._hex3ColorToRGBA(e)||x._hex6ColorToRGBA(e)||x._rgbColorToRGBA(e)||x._rgbaColorToRGBA(e)||x._hslColorToRGBA(e)},_namedColorToRBA(e){var t=On[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(e.indexOf("rgb(")===0){e=e.match(/rgb\(([^)]+)\)/)[1];var t=e.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(e.indexOf("rgba(")===0){e=e.match(/rgba\(([^)]+)\)/)[1];var t=e.split(/ *, */).map((r,i)=>r.slice(-1)==="%"?i===3?parseInt(r)/100:parseInt(r)/100*255:Number(r));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex6ColorToRGBA(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex3ColorToRGBA(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...r]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),i=Number(r[0])/360,n=Number(r[1])/100,s=Number(r[2])/100;let a,o,l;if(n===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?a=s*(1+n):a=s+n-s*n;const h=2*s-a,c=[0,0,0];for(let f=0;f<3;f++)o=i+1/3*-(f-1),o<0&&o++,o>1&&o--,6*o<1?l=h+(a-h)*6*o:2*o<1?l=a:3*o<2?l=h+(a-h)*(2/3-o)*6:l=h,c[f]=l*255;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject(e){var t={};for(var r in e)this._isPlainObject(e[r])?t[r]=this.cloneObject(e[r]):this._isArray(e[r])?t[r]=this.cloneArray(e[r]):t[r]=e[r];return t},cloneArray(e){return e.slice(0)},degToRad(e){return e*pd},radToDeg(e){return e*vd},_degToRad(e){return x.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),x.degToRad(e)},_radToDeg(e){return x.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),x.radToDeg(e)},_getRotation(e){return $.angleDeg?x.radToDeg(e):e},_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw(e){throw new Error(ja+e)},error(e){console.error(ja+e)},warn(e){!$.showWarnings||console.warn(bd+e)},each(e,t){for(var r in e)t(r,e[r])},_inRange(e,t,r){return t<=e&&e<r},_getProjectionToSegment(e,t,r,i,n,s){var a,o,l,h=(e-r)*(e-r)+(t-i)*(t-i);if(h==0)a=e,o=t,l=(n-r)*(n-r)+(s-i)*(s-i);else{var c=((n-e)*(r-e)+(s-t)*(i-t))/h;c<0?(a=e,o=t,l=(e-n)*(e-n)+(t-s)*(t-s)):c>1?(a=r,o=i,l=(r-n)*(r-n)+(i-s)*(i-s)):(a=e+c*(r-e),o=t+c*(i-t),l=(a-n)*(a-n)+(o-s)*(o-s))}return[a,o,l]},_getProjectionToLine(e,t,r){var i=x.cloneObject(e),n=Number.MAX_VALUE;return t.forEach(function(s,a){if(!(!r&&a===t.length-1)){var o=t[(a+1)%t.length],l=x._getProjectionToSegment(s.x,s.y,o.x,o.y,e.x,e.y),h=l[0],c=l[1],f=l[2];f<n&&(i.x=h,i.y=c,n=f)}}),i},_prepareArrayForTween(e,t,r){var i,n=[],s=[];if(e.length>t.length){var a=t;t=e,e=a}for(i=0;i<e.length;i+=2)n.push({x:e[i],y:e[i+1]});for(i=0;i<t.length;i+=2)s.push({x:t[i],y:t[i+1]});var o=[];return s.forEach(function(l){var h=x._getProjectionToLine(l,n,r);o.push(h.x),o.push(h.y)}),o},_prepareToStringify(e){var t;e.visitedByCircularReferenceRemoval=!0;for(var r in e)if(!!(e.hasOwnProperty(r)&&e[r]&&typeof e[r]=="object")){if(t=Object.getOwnPropertyDescriptor(e,r),e[r].visitedByCircularReferenceRemoval||x._isElement(e[r]))if(t.configurable)delete e[r];else return null;else if(x._prepareToStringify(e[r])===null)if(t.configurable)delete e[r];else return null}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(var r in t)e[r]=t[r];return e},_getFirstPointerId(e){return e.touches?e.changedTouches[0].identifier:e.pointerId||999}};function De(e){return x._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||x._isBoolean(e)?e:Object.prototype.toString.call(e)}function ql(e){return e>255?255:e<0?0:Math.round(e)}function H(){if($.isUnminified)return function(e,t){return x._isNumber(e)||x.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function Jl(e){if($.isUnminified)return function(t,r){let i=x._isNumber(t),n=x._isArray(t)&&t.length==e;return!i&&!n&&x.warn(De(t)+' is a not valid value for "'+r+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function Zs(){if($.isUnminified)return function(e,t){var r=x._isNumber(e),i=e==="auto";return r||i||x.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function xr(){if($.isUnminified)return function(e,t){return x._isString(e)||x.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function Ql(){if($.isUnminified)return function(e,t){const r=x._isString(e),i=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return r||i||x.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function wd(){if($.isUnminified)return function(e,t){return x._isArray(e)?e.forEach(function(r){x._isNumber(r)||x.warn('"'+t+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):x.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.'),e}}function Zt(){if($.isUnminified)return function(e,t){var r=e===!0||e===!1;return r||x.warn(De(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function xd(e){if($.isUnminified)return function(t,r){return x.isObject(t)||x.warn(De(t)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+e),t}}var kr="get",Mr="set";const v={addGetterSetter(e,t,r,i,n){v.addGetter(e,t,r),v.addSetter(e,t,i,n),v.addOverloadedGetterSetter(e,t)},addGetter(e,t,r){var i=kr+x._capitalize(t);e.prototype[i]=e.prototype[i]||function(){var n=this.attrs[t];return n===void 0?r:n}},addSetter(e,t,r,i){var n=Mr+x._capitalize(t);e.prototype[n]||v.overWriteSetter(e,t,r,i)},overWriteSetter(e,t,r,i){var n=Mr+x._capitalize(t);e.prototype[n]=function(s){return r&&s!==void 0&&s!==null&&(s=r.call(this,s,t)),this._setAttr(t,s),i&&i.call(this),this}},addComponentsGetterSetter(e,t,r,i,n){var s=r.length,a=x._capitalize,o=kr+a(t),l=Mr+a(t),h,c;e.prototype[o]=function(){var u={};for(h=0;h<s;h++)c=r[h],u[c]=this.getAttr(t+a(c));return u};var f=xd(r);e.prototype[l]=function(u){var g=this.attrs[t],d;i&&(u=i.call(this,u)),f&&f.call(this,u,t);for(d in u)!u.hasOwnProperty(d)||this._setAttr(t+a(d),u[d]);return this._fireChangeEvent(t,g,u),n&&n.call(this),this},v.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){var r=x._capitalize(t),i=Mr+r,n=kr+r;e.prototype[t]=function(){return arguments.length?(this[i](arguments[0]),this):this[n]()}},addDeprecatedGetterSetter(e,t,r,i){x.error("Adding deprecated "+t);var n=kr+x._capitalize(t),s=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[n]=function(){x.error(s);var a=this.attrs[t];return a===void 0?r:a},v.addSetter(e,t,i,function(){x.error(s)}),v.addOverloadedGetterSetter(e,t)},backCompat(e,t){x.each(t,function(r,i){var n=e.prototype[i],s=kr+x._capitalize(r),a=Mr+x._capitalize(r);function o(){n.apply(this,arguments),x.error('"'+r+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}e.prototype[r]=o,e.prototype[s]=o,e.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function Ed(e){var t=[],r=e.length,i=x,n,s;for(n=0;n<r;n++)s=e[n],i._isNumber(s)?s=Math.round(s*1e3)/1e3:i._isString(s)||(s=s+""),t.push(s);return t}var Ya=",",Td="(",Pd=")",Ad="([",kd="])",Md=";",Rd="()",Od="=",Va=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Ld=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Id=100;class yn{constructor(t){this.canvas=t,this._context=t._canvas.getContext("2d"),$.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,r){var i=this.traceArr,n=i.length,s="",a,o,l,h;for(a=0;a<n;a++)o=i[a],l=o.method,l?(h=o.args,s+=l,t?s+=Rd:x._isArray(h[0])?s+=Ad+h.join(Ya)+kd:(r&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),s+=Td+h.join(Ya)+Pd)):(s+=o.property,t||(s+=Od+o.val)),s+=Md;return s}clearTrace(){this.traceArr=[]}_trace(t){var r=this.traceArr,i;r.push(t),i=r.length,i>=Id&&r.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var r=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,r.getWidth()/r.pixelRatio,r.getHeight()/r.pixelRatio)}_applyLineCap(t){var r=t.getLineCap();r&&this.setAttr("lineCap",r)}_applyOpacity(t){var r=t.getAbsoluteOpacity();r!==1&&this.setAttr("globalAlpha",r)}_applyLineJoin(t){var r=t.attrs.lineJoin;r&&this.setAttr("lineJoin",r)}setAttr(t,r){this._context[t]=r}arc(t,r,i,n,s,a){this._context.arc(t,r,i,n,s,a)}arcTo(t,r,i,n,s){this._context.arcTo(t,r,i,n,s)}beginPath(){this._context.beginPath()}bezierCurveTo(t,r,i,n,s,a){this._context.bezierCurveTo(t,r,i,n,s,a)}clearRect(t,r,i,n){this._context.clearRect(t,r,i,n)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(t,r){var i=arguments;if(i.length===2)return this._context.createImageData(t,r);if(i.length===1)return this._context.createImageData(t)}createLinearGradient(t,r,i,n){return this._context.createLinearGradient(t,r,i,n)}createPattern(t,r){return this._context.createPattern(t,r)}createRadialGradient(t,r,i,n,s,a){return this._context.createRadialGradient(t,r,i,n,s,a)}drawImage(t,r,i,n,s,a,o,l,h){var c=arguments,f=this._context;c.length===3?f.drawImage(t,r,i):c.length===5?f.drawImage(t,r,i,n,s):c.length===9&&f.drawImage(t,r,i,n,s,a,o,l,h)}ellipse(t,r,i,n,s,a,o,l){this._context.ellipse(t,r,i,n,s,a,o,l)}isPointInPath(t,r){return this._context.isPointInPath(t,r)}fill(t){t?this._context.fill(t):this._context.fill()}fillRect(t,r,i,n){this._context.fillRect(t,r,i,n)}strokeRect(t,r,i,n){this._context.strokeRect(t,r,i,n)}fillText(t,r,i,n){n?this._context.fillText(t,r,i,n):this._context.fillText(t,r,i)}measureText(t){return this._context.measureText(t)}getImageData(t,r,i,n){return this._context.getImageData(t,r,i,n)}lineTo(t,r){this._context.lineTo(t,r)}moveTo(t,r){this._context.moveTo(t,r)}rect(t,r,i,n){this._context.rect(t,r,i,n)}putImageData(t,r,i){this._context.putImageData(t,r,i)}quadraticCurveTo(t,r,i,n){this._context.quadraticCurveTo(t,r,i,n)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,r){this._context.scale(t,r)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,r,i,n,s,a){this._context.setTransform(t,r,i,n,s,a)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,r,i,n){this._context.strokeText(t,r,i,n)}transform(t,r,i,n,s,a){this._context.transform(t,r,i,n,s,a)}translate(t,r){this._context.translate(t,r)}_enableTrace(){var t=this,r=Va.length,i=this.setAttr,n,s,a=function(o){var l=t[o],h;t[o]=function(){return s=Ed(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:o,args:s}),h}};for(n=0;n<r;n++)a(Va[n]);t.setAttr=function(){i.apply(t,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:o,val:l})}}_applyGlobalCompositeOperation(t){const r=t.attrs.globalCompositeOperation;var i=!r||r==="source-over";i||this.setAttr("globalCompositeOperation",r)}}Ld.forEach(function(e){Object.defineProperty(yn.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Dd extends yn{_fillColor(t){var r=t.fill();this.setAttr("fillStyle",r),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var r=t._getLinearGradient();r&&(this.setAttr("fillStyle",r),t._fillFunc(this))}_fillRadialGradient(t){var r=t._getRadialGradient();r&&(this.setAttr("fillStyle",r),t._fillFunc(this))}_fill(t){var r=t.fill(),i=t.getFillPriority();if(r&&i==="color"){this._fillColor(t);return}var n=t.getFillPatternImage();if(n&&i==="pattern"){this._fillPattern(t);return}var s=t.getFillLinearGradientColorStops();if(s&&i==="linear-gradient"){this._fillLinearGradient(t);return}var a=t.getFillRadialGradientColorStops();if(a&&i==="radial-gradient"){this._fillRadialGradient(t);return}r?this._fillColor(t):n?this._fillPattern(t):s?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}_strokeLinearGradient(t){var r=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),n=t.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(r.x,r.y,i.x,i.y);if(n){for(var a=0;a<n.length;a+=2)s.addColorStop(n[a],n[a+1]);this.setAttr("strokeStyle",s)}}_stroke(t){var r=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t),r&&t.dashEnabled()&&(this.setLineDash(r),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=t.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var r,i,n,s=(r=t.getShadowRGBA())!==null&&r!==void 0?r:"black",a=(i=t.getShadowBlur())!==null&&i!==void 0?i:5,o=(n=t.getShadowOffset())!==null&&n!==void 0?n:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,f=l.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(c),Math.abs(f))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*f)}}class Nd extends yn{_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){var r=t.getStrokeScaleEnabled();if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t);var n=t.hitStrokeWidth(),s=n==="auto"?t.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),r||this.restore()}}}var Ti;function Fd(){if(Ti)return Ti;var e=x.createCanvasElement(),t=e.getContext("2d");return Ti=function(){var r=$._global.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return r/i}(),Ti}class Cn{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var r=t||{},i=r.pixelRatio||$.pixelRatio||Fd();this.pixelRatio=i,this._canvas=x.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var r=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/r,this.getHeight()/r)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var r=this.pixelRatio,i=this.getContext()._context;i.scale(r,r)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var r=this.pixelRatio,i=this.getContext()._context;i.scale(r,r)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,r){this.setWidth(t||0),this.setHeight(r||0)}toDataURL(t,r){try{return this._canvas.toDataURL(t,r)}catch{try{return this._canvas.toDataURL()}catch(n){return x.error("Unable to get data URL. "+n.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}v.addGetterSetter(Cn,"pixelRatio",void 0,H());class vr extends Cn{constructor(t={width:0,height:0}){super(t);this.context=new Dd(this),this.setSize(t.width,t.height)}}class ta extends Cn{constructor(t={width:0,height:0}){super(t);this.hitCanvas=!0,this.context=new Nd(this),this.setSize(t.width,t.height)}}const ct={get isDragging(){var e=!1;return ct._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){var e;return ct._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];ct._dragElements.forEach((r,i)=>{const{node:n}=r,s=n.getStage();s.setPointersPositions(e),r.pointerId===void 0&&(r.pointerId=x._getFirstPointerId(e));const a=s._changedPointerPositions.find(h=>h.id===r.pointerId);if(!!a){if(r.dragStatus!=="dragging"){var o=n.dragDistance(),l=Math.max(Math.abs(a.x-r.startPointerPos.x),Math.abs(a.y-r.startPointerPos.y));if(l<o||(n.startDrag({evt:e}),!n.isDragging()))return}n._setDragPosition(e,r),t.push(n)}}),t.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:e},!0)})},_endDragBefore(e){ct._dragElements.forEach(t=>{const{node:r}=t,i=r.getStage();if(e&&i.setPointersPositions(e),!i._changedPointerPositions.find(a=>a.id===t.pointerId))return;(t.dragStatus==="dragging"||t.dragStatus==="stopped")&&(ct.justDragged=!0,$._mouseListenClick=!1,$._touchListenClick=!1,$._pointerListenClick=!1,t.dragStatus="stopped");const s=t.node.getLayer()||t.node instanceof $.Stage&&t.node;s&&s.batchDraw()})},_endDragAfter(e){ct._dragElements.forEach((t,r)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),t.dragStatus!=="dragging"&&ct._dragElements.delete(r)})}};$.isBrowser&&(window.addEventListener("mouseup",ct._endDragBefore,!0),window.addEventListener("touchend",ct._endDragBefore,!0),window.addEventListener("mousemove",ct._drag),window.addEventListener("touchmove",ct._drag),window.addEventListener("mouseup",ct._endDragAfter,!1),window.addEventListener("touchend",ct._endDragAfter,!1));var Hi="absoluteOpacity",Pi="allEventListeners",ce="absoluteTransform",Ka="absoluteScale",Rr="canvas",Gd="Change",Bd="children",Hd="konva",ss="listening",Xa="mouseenter",$a="mouseleave",qa="set",Ja="Shape",Ui=" ",Qa="stage",we="transform",Ud="Stage",as="visible",Wd=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Ui);let zd=1;class U{constructor(t){this._id=zd++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===we||t===ce)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,r){var i=this._cache.get(t),n=t===we||t===ce,s=i===void 0||n&&i.dirty===!0;return s&&(i=r.call(this),this._cache.set(t,i)),i}_calculate(t,r,i){if(!this._attachedDepsListeners.get(t)){const n=r.map(s=>s+"Change.konva").join(Ui);this.on(n,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(Rr)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===ce&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(Rr),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var r=t||{},i={};(r.x===void 0||r.y===void 0||r.width===void 0||r.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var n=Math.ceil(r.width||i.width),s=Math.ceil(r.height||i.height),a=r.pixelRatio,o=r.x===void 0?Math.floor(i.x):r.x,l=r.y===void 0?Math.floor(i.y):r.y,h=r.offset||0,c=r.drawBorder||!1,f=r.hitCanvasPixelRatio||1;if(!n||!s){x.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}n+=h*2+1,s+=h*2+1,o-=h,l-=h;var u=new vr({pixelRatio:a,width:n,height:s}),g=new vr({pixelRatio:a,width:0,height:0}),d=new ta({pixelRatio:f,width:n,height:s}),C=u.getContext(),p=d.getContext();return d.isCache=!0,u.isCache=!0,this._cache.delete(Rr),this._filterUpToDate=!1,r.imageSmoothingEnabled===!1&&(u.getContext()._context.imageSmoothingEnabled=!1,g.getContext()._context.imageSmoothingEnabled=!1),C.save(),p.save(),C.translate(-o,-l),p.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Hi),this._clearSelfAndDescendantCache(Ka),this.drawScene(u,this),this.drawHit(d,this),this._isUnderCache=!1,C.restore(),p.restore(),c&&(C.save(),C.beginPath(),C.rect(0,0,n,s),C.closePath(),C.setAttr("strokeStyle","red"),C.setAttr("lineWidth",5),C.stroke(),C.restore()),this._cache.set(Rr,{scene:u,filter:g,hit:d,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Rr)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,r){var i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],n,s,a,o,l=this.getAbsoluteTransform(r);return i.forEach(function(h){var c=l.point(h);n===void 0&&(n=a=c.x,s=o=c.y),n=Math.min(n,c.x),s=Math.min(s,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),{x:n,y:s,width:a-n,height:o-s}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const r=this._getCanvasCache();t.translate(r.x,r.y);var i=this._getCachedSceneCanvas(),n=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/n,i.height/n),t.restore()}_drawCachedHitCanvas(t){var r=this._getCanvasCache(),i=r.hit;t.save(),t.translate(r.x,r.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t=this.filters(),r=this._getCanvasCache(),i=r.scene,n=r.filter,s=n.getContext(),a,o,l,h;if(t){if(!this._filterUpToDate){var c=i.pixelRatio;n.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio);try{for(a=t.length,s.clear(),s.drawImage(i._canvas,0,0,i.getWidth()/c,i.getHeight()/c),o=s.getImageData(0,0,n.getWidth(),n.getHeight()),l=0;l<a;l++){if(h=t[l],typeof h!="function"){x.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),s.putImageData(o,0,0)}}catch(f){x.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return n}return i}on(t,r){if(this._cache&&this._cache.delete(Pi),arguments.length===3)return this._delegate.apply(this,arguments);var i=t.split(Ui),n=i.length,s,a,o,l,h;for(s=0;s<n;s++)a=i[s],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:r});return this}off(t,r){var i=(t||"").split(Ui),n=i.length,s,a,o,l,h,c;if(this._cache&&this._cache.delete(Pi),!t)for(a in this.eventListeners)this._off(a);for(s=0;s<n;s++)if(o=i[s],l=o.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,r);else for(a in this.eventListeners)this._off(a,c,r);return this}dispatchEvent(t){var r={target:this,type:t.type,evt:t};return this.fire(t.type,r),this}addEventListener(t,r){return this.on(t,function(i){r.call(this,i.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,r,i){var n=this;this.on(t,function(s){for(var a=s.target.findAncestors(r,!0,n),o=0;o<a.length;o++)s=x.cloneObject(s),s.currentTarget=a[o],i.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),ct._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ce),this._clearSelfAndDescendantCache(Hi),this._clearSelfAndDescendantCache(Ka),this._clearSelfAndDescendantCache(Qa),this._clearSelfAndDescendantCache(as),this._clearSelfAndDescendantCache(ss)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(t){var r="get"+x._capitalize(t);return x._isFunction(this[r])?this[r]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),r=[];t;)r.push(t),t=t.getParent();return r}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var r,i;if(!t)return this;for(r in t)r!==Bd&&(i=qa+x._capitalize(r),x._isFunction(this[i])?this[i](t[r]):this._setAttr(r,t[r]))}),this}isListening(){return this._getCache(ss,this._isListening)}_isListening(t){if(!this.listening())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isListening(t):!0}isVisible(){return this._getCache(as,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isVisible(t):!0}shouldDrawHit(t,r=!1){if(t)return this._isVisible(t)&&this._isListening(t);var i=this.getLayer(),n=!1;ct._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===i)&&(n=!0)});var s=!r&&!$.hitOnDragEnabled&&n;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t=this.getDepth(),r=this,i=0,n,s,a,o;function l(h){for(n=[],s=h.length,a=0;a<s;a++)o=h[a],i++,o.nodeType!==Ja&&(n=n.concat(o.getChildren().slice())),o._id===r._id&&(a=s);n.length>0&&n[0].getDepth()<=t&&l(n)}return r.nodeType!==Ud&&l(r.getStage().getChildren()),i}getDepth(){for(var t=0,r=this.parent;r;)t++,r=r.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(we),this._clearSelfAndDescendantCache(ce)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(t)}getAbsolutePosition(t){let r=!1,i=this.parent;for(;i;){if(i.isCached()){r=!0;break}i=i.parent}r&&!t&&(t=!0);var n=this.getAbsoluteTransform(t).getMatrix(),s=new Wt,a=this.offset();return s.m=n.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(t){var r=this._clearTransform();this.attrs.x=r.x,this.attrs.y=r.y,delete r.x,delete r.y,this._clearCache(we);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(t.x,t.y),t={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(r),this.setPosition({x:t.x,y:t.y}),this._clearCache(we),this._clearSelfAndDescendantCache(ce),this}_setTransform(t){var r;for(r in t)this.attrs[r]=t[r]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var r=t.x,i=t.y,n=this.x(),s=this.y();return r!==void 0&&(n+=r),i!==void 0&&(s+=i),this.setPosition({x:n,y:s}),this}_eachAncestorReverse(t,r){var i=[],n=this.getParent(),s,a;if(!(r&&r._id===this._id)){for(i.unshift(this);n&&(!r||n._id!==r._id);)i.unshift(n),n=n.parent;for(s=i.length,a=0;a<s;a++)t(i[a])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return x.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index,r=this.parent.getChildren().length;return t<r-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return x.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index,r=this.parent.getChildren().length;return t<r-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return x.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return x.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return x.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&x.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var r=this.index;return this.parent.children.splice(r,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Hi,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),r=this.getParent();return r&&!r._isUnderCache&&(t*=r.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t={},r=this.getAttrs(),i,n,s,a,o;t.attrs={};for(i in r)n=r[i],o=x.isObject(n)&&!x._isPlainObject(n)&&!x._isArray(n),!o&&(s=typeof this[i]=="function"&&this[i],delete r[i],a=s?s.call(this):null,r[i]=n,a!==n&&(t.attrs[i]=n));return t.className=this.getClassName(),x._prepareToStringify(t)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,r,i){var n=[];r&&this._isMatch(t)&&n.push(this);for(var s=this.parent;s;){if(s===i)return n;s._isMatch(t)&&n.push(s),s=s.parent}return n}isAncestorOf(t){return!1}findAncestor(t,r,i){return this.findAncestors(t,r,i)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);var r=t.replace(/ /g,"").split(","),i=r.length,n,s;for(n=0;n<i;n++)if(s=r[n],x.isValidSelector(s)||(x.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),x.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),x.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(Qa,this._getStage)}_getStage(){var t=this.getParent();if(t)return t.getStage()}fire(t,r={},i){return r.target=r.target||this,i?this._fireAndBubble(t,r):this._fire(t,r),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(ce,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var r;if(t)return r=new Wt,this._eachAncestorReverse(function(n){var s=n.transformsEnabled();s==="all"?r.multiply(n.getTransform()):s==="position"&&r.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},t),r;r=this._cache.get(ce)||new Wt,this.parent?this.parent.getAbsoluteTransform().copyInto(r):r.reset();var i=this.transformsEnabled();if(i==="all")r.multiply(this.getTransform());else if(i==="position"){const n=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;r.translate(n-a,s-o)}return r.dirty=!1,r}getAbsoluteScale(t){for(var r=this;r;)r._isUnderCache&&(t=r),r=r.getParent();const n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(we,this._getTransform)}_getTransform(){var t,r,i=this._cache.get(we)||new Wt;i.reset();var n=this.x(),s=this.y(),a=$.getAngle(this.rotation()),o=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(r=this.attrs.scaleY)!==null&&r!==void 0?r:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,f=this.attrs.offsetX||0,u=this.attrs.offsetY||0;return(n!==0||s!==0)&&i.translate(n,s),a!==0&&i.rotate(a),(h!==0||c!==0)&&i.skew(h,c),(o!==1||l!==1)&&i.scale(o,l),(f!==0||u!==0)&&i.translate(-1*f,-1*u),i.dirty=!1,i}clone(t){var r=x.cloneObject(this.attrs),i,n,s,a,o;for(i in t)r[i]=t[i];var l=new this.constructor(r);for(i in this.eventListeners)for(n=this.eventListeners[i],s=n.length,a=0;a<s;a++)o=n[a],o.name.indexOf(Hd)<0&&(l.eventListeners[i]||(l.eventListeners[i]=[]),l.eventListeners[i].push(o));return l}_toKonvaCanvas(t){t=t||{};var r=this.getClientRect(),i=this.getStage(),n=t.x!==void 0?t.x:Math.floor(r.x),s=t.y!==void 0?t.y:Math.floor(r.y),a=t.pixelRatio||1,o=new vr({width:t.width||Math.ceil(r.width)||(i?i.width():0),height:t.height||Math.ceil(r.height)||(i?i.height():0),pixelRatio:a}),l=o.getContext();return l.save(),(n||s)&&l.translate(-1*n,-1*s),this.drawScene(o),l.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};var r=t.mimeType||null,i=t.quality||null,n=this._toKonvaCanvas(t).toDataURL(r,i);return t.callback&&t.callback(n),n}toImage(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var r=t.callback;delete t.callback,x._urlToImage(this.toDataURL(t),function(i){r(i)})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():$.dragDistance}_off(t,r,i){var n=this.eventListeners[t],s,a,o;for(s=0;s<n.length;s++)if(a=n[s].name,o=n[s].handler,(a!=="konva"||r==="konva")&&(!r||a===r)&&(!i||i===o)){if(n.splice(s,1),n.length===0){delete this.eventListeners[t];break}s--}}_fireChangeEvent(t,r,i){this._fire(t+Gd,{oldVal:r,newVal:i})}addName(t){if(!this.hasName(t)){var r=this.name(),i=r?r+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const r=this.name();if(!r)return!1;var i=(r||"").split(/\s/g);return i.indexOf(t)!==-1}removeName(t){var r=(this.name()||"").split(/\s/g),i=r.indexOf(t);return i!==-1&&(r.splice(i,1),this.name(r.join(" "))),this}setAttr(t,r){var i=this[qa+x._capitalize(t)];return x._isFunction(i)?i.call(this,r):this._setAttr(t,r),this}_requestDraw(){if($.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,r){var i=this.attrs[t];i===r&&!x.isObject(r)||(r==null?delete this.attrs[t]:this.attrs[t]=r,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,r),this._requestDraw())}_setComponentAttr(t,r,i){var n;i!==void 0&&(n=this.attrs[t],n||(this.attrs[t]=this.getAttr(t)),this.attrs[t][r]=i,this._fireChangeEvent(t,n,i))}_fireAndBubble(t,r,i){r&&this.nodeType===Ja&&(r.target=this);var n=(t===Xa||t===$a)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i);if(!n){this._fire(t,r);var s=(t===Xa||t===$a)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(r&&!r.cancelBubble||!r)&&this.parent&&this.parent.isListening()&&!s&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,r,i):this._fireAndBubble.call(this.parent,t,r))}}_getProtoListeners(t){let r=this._cache.get(Pi);if(!r){r={};let n=Object.getPrototypeOf(this);for(;n;){if(!n.eventListeners){n=Object.getPrototypeOf(n);continue}for(var i in n.eventListeners){const s=n.eventListeners[i],a=r[i]||[];r[i]=s.concat(a)}n=Object.getPrototypeOf(n)}this._cache.set(Pi,r)}return r[t]}_fire(t,r){r=r||{},r.currentTarget=this,r.type=t;const i=this._getProtoListeners(t);if(i)for(var n=0;n<i.length;n++)i[n].handler.call(this,r);const s=this.eventListeners[t];if(s)for(var n=0;n<s.length;n++)s[n].handler.call(this,r)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var r=t?t.pointerId:void 0,i=this.getStage(),n=this.getAbsolutePosition(),s=i._getPointerById(r)||i._changedPointerPositions[0]||n;ct._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-n.x,y:s.y-n.y},dragStatus:"ready",pointerId:r})}startDrag(t,r=!0){ct._dragElements.has(this._id)||this._createDragElement(t);const i=ct._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},r)}_setDragPosition(t,r){const i=this.getStage()._getPointerById(r.pointerId);if(!!i){var n={x:i.x-r.offset.x,y:i.y-r.offset.y},s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,n,t);a?n=a:x.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==n.x||this._lastPos.y!==n.y)&&(this.setAbsolutePosition(n),this._requestDraw()),this._lastPos=n}}stopDrag(t){const r=ct._dragElements.get(this._id);r&&(r.dragStatus="stopped"),ct._endDragBefore(t),ct._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=ct._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var r=t.evt.button!==void 0,i=!r||$.dragButtons.indexOf(t.evt.button)>=0;if(!!i&&!this.isDragging()){var n=!1;ct._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(n=!0)}),n||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();if(!t)return;const r=ct._dragElements.get(this._id),i=r&&r.dragStatus==="dragging",n=r&&r.dragStatus==="ready";i?this.stopDrag():n&&ct._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const r=this.getStage();if(!r)return!1;const i={x:-t.x,y:-t.y,width:r.width()+2*t.x,height:r.height()+2*t.y};return x.haveIntersection(i,this.getClientRect())}static create(t,r){return x._isString(t)&&(t=JSON.parse(t)),this._createNode(t,r)}static _createNode(t,r){var i=U.prototype.getClassName.call(t),n=t.children,s,a,o;r&&(t.attrs.container=r),$[i]||(x.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const l=$[i];if(s=new l(t.attrs),n)for(a=n.length,o=0;o<a;o++)s.add(U._createNode(n[o]));return s}}U.prototype.nodeType="Node";U.prototype._attrsAffectingSize=[];U.prototype.eventListeners={};U.prototype.on.call(U.prototype,Wd,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(we),this._clearSelfAndDescendantCache(ce)});U.prototype.on.call(U.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(as)});U.prototype.on.call(U.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(ss)});U.prototype.on.call(U.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Hi)});const vt=v.addGetterSetter;vt(U,"zIndex");vt(U,"absolutePosition");vt(U,"position");vt(U,"x",0,H());vt(U,"y",0,H());vt(U,"globalCompositeOperation","source-over",xr());vt(U,"opacity",1,H());vt(U,"name","",xr());vt(U,"id","",xr());vt(U,"rotation",0,H());v.addComponentsGetterSetter(U,"scale",["x","y"]);vt(U,"scaleX",1,H());vt(U,"scaleY",1,H());v.addComponentsGetterSetter(U,"skew",["x","y"]);vt(U,"skewX",0,H());vt(U,"skewY",0,H());v.addComponentsGetterSetter(U,"offset",["x","y"]);vt(U,"offsetX",0,H());vt(U,"offsetY",0,H());vt(U,"dragDistance",null,H());vt(U,"width",0,H());vt(U,"height",0,H());vt(U,"listening",!0,Zt());vt(U,"preventDefault",!0,Zt());vt(U,"filters",null,function(e){return this._filterUpToDate=!1,e});vt(U,"visible",!0,Zt());vt(U,"transformsEnabled","all",xr());vt(U,"size");vt(U,"dragBoundFunc");vt(U,"draggable",!1,Zt());v.backCompat(U,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Yt extends U{constructor(){super(...arguments);this.children=[]}getChildren(t){if(!t)return this.children||[];const r=this.children||[];var i=[];return r.forEach(function(n){t(n)&&i.push(n)}),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}var i=t[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var r=this._generalFind(t,!0);return r.length>0?r[0]:void 0}_generalFind(t,r){var i=[];return this._descendants(n=>{const s=n._isMatch(t);return s&&i.push(n),!!(s&&r)}),i}_descendants(t){let r=!1;const i=this.getChildren();for(const n of i){if(r=t(n),r)return!0;if(!!n.hasChildren()&&(r=n._descendants(t),r))return!0}return!1}toObject(){var t=U.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(r=>{t.children.push(r.toObject())}),t}isAncestorOf(t){for(var r=t.getParent();r;){if(r._id===this._id)return!0;r=r.getParent()}return!1}clone(t){var r=U.prototype.clone.call(this,t);return this.getChildren().forEach(function(i){r.add(i.clone())}),r}getAllIntersections(t){var r=[];return this.find("Shape").forEach(function(i){i.isVisible()&&i.intersects(t)&&r.push(i)}),r}_clearSelfAndDescendantCache(t){var r;super._clearSelfAndDescendantCache(t),!this.isCached()&&((r=this.children)===null||r===void 0||r.forEach(function(i){i._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(r,i){r.index=i}),this._requestDraw()}drawScene(t,r){var i=this.getLayer(),n=t||i&&i.getCanvas(),s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=n&&n.isCache;if(!this.isVisible()&&!l)return this;if(o){s.save();var h=this.getAbsoluteTransform(r).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",n,r);return this}drawHit(t,r){if(!this.shouldDrawHit(r))return this;var i=this.getLayer(),n=t||i&&i.hitCanvas,s=n&&n.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){s.save();var l=this.getAbsoluteTransform(r).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",n,r);return this}_drawChildren(t,r,i){var n,s=r&&r.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const c=i===this;if(h){s.save();var f=this.getAbsoluteTransform(i),u=f.getMatrix();if(s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),s.beginPath(),l)l.call(this,s,this);else{var g=this.clipX(),d=this.clipY();s.rect(g,d,a,o)}s.clip(),u=f.copy().invert().getMatrix(),s.transform(u[0],u[1],u[2],u[3],u[4],u[5])}var C=!c&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";C&&(s.save(),s._applyGlobalCompositeOperation(this)),(n=this.children)===null||n===void 0||n.forEach(function(p){p[t](r,i)}),C&&s.restore(),h&&s.restore()}getClientRect(t){var r;t=t||{};var i=t.skipTransform,n=t.relativeTo,s,a,o,l,h={x:1/0,y:1/0,width:0,height:0},c=this;(r=this.children)===null||r===void 0||r.forEach(function(C){if(!!C.visible()){var p=C.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});p.width===0&&p.height===0||(s===void 0?(s=p.x,a=p.y,o=p.x+p.width,l=p.y+p.height):(s=Math.min(s,p.x),a=Math.min(a,p.y),o=Math.max(o,p.x+p.width),l=Math.max(l,p.y+p.height)))}});for(var f=this.find("Shape"),u=!1,g=0;g<f.length;g++){var d=f[g];if(d._isVisible(this)){u=!0;break}}return u&&s!==void 0?h={x:s,y:a,width:o-s,height:l-a}:h={x:0,y:0,width:0,height:0},i?h:this._transformedRect(h,n)}}v.addComponentsGetterSetter(Yt,"clip",["x","y","width","height"]);v.addGetterSetter(Yt,"clipX",void 0,H());v.addGetterSetter(Yt,"clipY",void 0,H());v.addGetterSetter(Yt,"clipWidth",void 0,H());v.addGetterSetter(Yt,"clipHeight",void 0,H());v.addGetterSetter(Yt,"clipFunc");const ai=new Map,Zl=$._global.PointerEvent!==void 0;function Ln(e){return ai.get(e)}function ea(e){return{evt:e,pointerId:e.pointerId}}function th(e,t){return ai.get(e)===t}function eh(e,t){Jr(e),t.getStage()&&(ai.set(e,t),Zl&&t._fire("gotpointercapture",ea(new PointerEvent("gotpointercapture"))))}function Jr(e,t){const r=ai.get(e);if(!r)return;const i=r.getStage();i&&i.content,ai.delete(e),Zl&&r._fire("lostpointercapture",ea(new PointerEvent("lostpointercapture")))}var jd="Stage",Yd="string",Za="px",Vd="mouseout",rh="mouseleave",ih="mouseover",nh="mouseenter",sh="mousemove",ah="mousedown",oh="mouseup",Fr="pointermove",Gr="pointerdown",cr="pointerup",Br="pointercancel",Kd="lostpointercapture",Ai="pointerout",ki="pointerleave",Mi="pointerover",Ri="pointerenter",os="contextmenu",lh="touchstart",hh="touchend",ch="touchmove",fh="touchcancel",ls="wheel",Xd=5,$d=[[nh,"_pointerenter"],[ah,"_pointerdown"],[sh,"_pointermove"],[oh,"_pointerup"],[rh,"_pointerleave"],[lh,"_pointerdown"],[ch,"_pointermove"],[hh,"_pointerup"],[fh,"_pointercancel"],[ih,"_pointerover"],[ls,"_wheel"],[os,"_contextmenu"],[Gr,"_pointerdown"],[Fr,"_pointermove"],[cr,"_pointerup"],[Br,"_pointercancel"],[Kd,"_lostpointercapture"]];const In={mouse:{[Ai]:Vd,[ki]:rh,[Mi]:ih,[Ri]:nh,[Fr]:sh,[Gr]:ah,[cr]:oh,[Br]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Ai]:"touchout",[ki]:"touchleave",[Mi]:"touchover",[Ri]:"touchenter",[Fr]:ch,[Gr]:lh,[cr]:hh,[Br]:fh,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Ai]:Ai,[ki]:ki,[Mi]:Mi,[Ri]:Ri,[Fr]:Fr,[Gr]:Gr,[cr]:cr,[Br]:Br,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Hr=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",ar=e=>{const t=Hr(e);if(t==="pointer")return $.pointerEventsEnabled&&In.pointer;if(t==="touch")return In.touch;if(t==="mouse")return In.mouse};function to(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&x.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const qd="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Wi=[];class Sn extends Yt{constructor(t){super(to(t));this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Wi.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{to(this.attrs)}),this._checkVisibility()}_validateAdd(t){const r=t.getType()==="Layer",i=t.getType()==="FastLayer";r||i||x.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===Yd){if(t.charAt(0)==="."){var r=t.slice(1);t=document.getElementsByClassName(r)[0]}else{var i;t.charAt(0)!=="#"?i=t:i=t.slice(1),t=document.getElementById(i)}if(!t)throw"Can not find container in document with id "+i}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var t=this.children,r=t.length,i;for(i=0;i<r;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container=typeof document!="undefined"&&document.createElement("div"),Yt.prototype.clone.call(this,t)}destroy(){super.destroy();var t=this.content;t&&x._isInDocument(t)&&this.container().removeChild(t);var r=Wi.indexOf(this);return r>-1&&Wi.splice(r,1),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(x.warn(qd),null)}_getPointerById(t){return this._pointerPositions.find(r=>r.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t=t||{},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var r=new vr({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=r.getContext()._context,n=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),n.forEach(function(s){if(!!s.isVisible()){var a=s._toKonvaCanvas(t);i.drawImage(a._canvas,t.x,t.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}}),r}getIntersection(t){if(!t)return null;var r=this.children,i=r.length,n=i-1,s;for(s=n;s>=0;s--){const a=r[s].getIntersection(t);if(a)return a}return null}_resizeDOM(){var t=this.width(),r=this.height();this.content&&(this.content.style.width=t+Za,this.content.style.height=r+Za),this.bufferCanvas.setSize(t,r),this.bufferHitCanvas.setSize(t,r),this.children.forEach(i=>{i.setSize({width:t,height:r}),i.draw()})}add(t,...r){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}super.add(t);var n=this.children.length;return n>Xd&&x.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),$.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return th(t,this)}setPointerCapture(t){eh(t,this)}releaseCapture(t){Jr(t)}getLayers(){return this.children}_bindContentEvents(){!$.isBrowser||$d.forEach(([t,r])=>{this.content.addEventListener(t,i=>{this[r](i)})})}_pointerenter(t){this.setPointersPositions(t);const r=ar(t.type);this._fire(r.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const r=ar(t.type);this._fire(r.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let r=this[t+"targetShape"];return r&&!r.getStage()&&(r=null),r}_pointerleave(t){const r=ar(t.type),i=Hr(t.type);if(!!r){this.setPointersPositions(t);var n=this._getTargetShape(i),s=!ct.isDragging||$.hitOnDragEnabled;n&&s?(n._fireAndBubble(r.pointerout,{evt:t}),n._fireAndBubble(r.pointerleave,{evt:t}),this._fire(r.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):s&&(this._fire(r.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(r.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(t){const r=ar(t.type),i=Hr(t.type);if(!!r){this.setPointersPositions(t);var n=!1;this._changedPointerPositions.forEach(s=>{var a=this.getIntersection(s);if(ct.justDragged=!1,$["_"+i+"ListenClick"]=!0,!(a&&a.isListening()))return;$.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[i+"ClickStartShape"]=a,a._fireAndBubble(r.pointerdown,{evt:t,pointerId:s.id}),n=!0;const l=t.type.indexOf("touch")>=0;a.preventDefault()&&t.cancelable&&l&&t.preventDefault()}),n||this._fire(r.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(t){const r=ar(t.type),i=Hr(t.type);if(!r)return;ct.isDragging&&ct.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t);var n=!ct.isDragging||$.hitOnDragEnabled;if(!n)return;var s={};let a=!1;var o=this._getTargetShape(i);this._changedPointerPositions.forEach(l=>{const h=Ln(l.id)||this.getIntersection(l),c=l.id,f={evt:t,pointerId:c};var u=o!==h;if(u&&o&&(o._fireAndBubble(r.pointerout,Object.assign({},f),h),o._fireAndBubble(r.pointerleave,Object.assign({},f),h)),h){if(s[h._id])return;s[h._id]=!0}h&&h.isListening()?(a=!0,u&&(h._fireAndBubble(r.pointerover,Object.assign({},f),o),h._fireAndBubble(r.pointerenter,Object.assign({},f),o),this[i+"targetShape"]=h),h._fireAndBubble(r.pointermove,Object.assign({},f))):o&&(this._fire(r.pointerover,{evt:t,target:this,currentTarget:this,pointerId:c}),this[i+"targetShape"]=null)}),a||this._fire(r.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const r=ar(t.type),i=Hr(t.type);if(!r)return;this.setPointersPositions(t);const n=this[i+"ClickStartShape"],s=this[i+"ClickEndShape"];var a={};let o=!1;this._changedPointerPositions.forEach(l=>{const h=Ln(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),a[h._id])return;a[h._id]=!0}const c=l.id,f={evt:t,pointerId:c};let u=!1;$["_"+i+"InDblClickWindow"]?(u=!0,clearTimeout(this[i+"DblTimeout"])):ct.justDragged||($["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){$["_"+i+"InDblClickWindow"]=!1},$.dblClickWindow),h&&h.isListening()?(o=!0,this[i+"ClickEndShape"]=h,h._fireAndBubble(r.pointerup,Object.assign({},f)),$["_"+i+"ListenClick"]&&n&&n===h&&(h._fireAndBubble(r.pointerclick,Object.assign({},f)),u&&s&&s===h&&h._fireAndBubble(r.pointerdblclick,Object.assign({},f)))):(this[i+"ClickEndShape"]=null,$["_"+i+"ListenClick"]&&this._fire(r.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:c}),u&&this._fire(r.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:c}))}),o||this._fire(r.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),$["_"+i+"ListenClick"]=!1,t.cancelable&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);var r=this.getIntersection(this.getPointerPosition());r&&r.isListening()?r._fireAndBubble(os,{evt:t}):this._fire(os,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);var r=this.getIntersection(this.getPointerPosition());r&&r.isListening()?r._fireAndBubble(ls,{evt:t}):this._fire(ls,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const r=Ln(t.pointerId)||this.getIntersection(this.getPointerPosition());r&&r._fireAndBubble(cr,ea(t)),Jr(t.pointerId)}_lostpointercapture(t){Jr(t.pointerId)}setPointersPositions(t){var r=this._getContentPosition(),i=null,n=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-r.left)/r.scaleX,y:(s.clientY-r.top)/r.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-r.left)/r.scaleX,y:(s.clientY-r.top)/r.scaleY})})):(i=(t.clientX-r.left)/r.scaleX,n=(t.clientY-r.top)/r.scaleY,this.pointerPos={x:i,y:n},this._pointerPositions=[{x:i,y:n,id:x._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:n,id:x._getFirstPointerId(t)}])}_setPointerPosition(t){x.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new vr({width:this.width(),height:this.height()}),this.bufferHitCanvas=new ta({pixelRatio:1,width:this.width(),height:this.height()}),!!$.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}cache(){return x.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}Sn.prototype.nodeType=jd;St(Sn);v.addGetterSetter(Sn,"container");var uh="hasShadow",dh="shadowRGBA",gh="patternImage",ph="linearGradient",vh="radialGradient";let Oi;function Dn(){return Oi||(Oi=x.createCanvasElement().getContext("2d"),Oi)}const Qr={};function Jd(e){e.fill()}function Qd(e){e.stroke()}function Zd(e){e.fill()}function tg(e){e.stroke()}function eg(){this._clearCache(uh)}function rg(){this._clearCache(dh)}function ig(){this._clearCache(gh)}function ng(){this._clearCache(ph)}function sg(){this._clearCache(vh)}class G extends U{constructor(t){super(t);let r;for(;r=x.getRandomColor(),!(r&&!(r in Qr)););this.colorKey=r,Qr[r]=this}getContext(){return x.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return x.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(uh,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(gh,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var t=Dn();const r=t.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(r&&r.setTransform){const i=new Wt;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate($.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=i.getMatrix(),s=typeof DOMMatrix=="undefined"?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);r.setTransform(s)}return r}}_getLinearGradient(){return this._getCache(ph,this.__getLinearGradient)}__getLinearGradient(){var t=this.fillLinearGradientColorStops();if(t){for(var r=Dn(),i=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),s=r.createLinearGradient(i.x,i.y,n.x,n.y),a=0;a<t.length;a+=2)s.addColorStop(t[a],t[a+1]);return s}}_getRadialGradient(){return this._getCache(vh,this.__getRadialGradient)}__getRadialGradient(){var t=this.fillRadialGradientColorStops();if(t){for(var r=Dn(),i=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),s=r.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius()),a=0;a<t.length;a+=2)s.addColorStop(t[a],t[a+1]);return s}}getShadowRGBA(){return this._getCache(dh,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var t=x.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){var r=this.getStage(),i=r.bufferHitCanvas,n;return i.getContext().clear(),this.drawHit(i,null,!0),n=i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data,n[3]>0}destroy(){return U.prototype.destroy.call(this),delete Qr[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var r;if(!this.getStage()||!((r=this.attrs.perfectDrawEnabled)!==null&&r!==void 0?r:!0))return!1;const n=t||this.hasFill(),s=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(n&&s&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(n&&s&&o&&l)}setStrokeHitEnabled(t){x.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){const r=t.skipTransform,i=t.relativeTo,n=this.getSelfRect(),a=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=n.width+a,l=n.height+a,h=!t.skipShadow&&this.hasShadow(),c=h?this.shadowOffsetX():0,f=h?this.shadowOffsetY():0,u=o+Math.abs(c),g=l+Math.abs(f),d=h&&this.shadowBlur()||0,C=u+d*2,p=g+d*2,y={width:C,height:p,x:-(a/2+d)+Math.min(c,0)+n.x,y:-(a/2+d)+Math.min(f,0)+n.y};return r?y:this._transformedRect(y,i)}drawScene(t,r){var i=this.getLayer(),n=t||i.getCanvas(),s=n.getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),l=this.hasShadow(),h,c,f,u=n.isCache,g=r===this;if(!this.isVisible()&&!g)return this;if(a){s.save();var d=this.getAbsoluteTransform(r).getMatrix();return s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),this._useBufferCanvas()&&!u){h=this.getStage(),c=h.bufferCanvas,f=c.getContext(),f.clear(),f.save(),f._applyLineJoin(this);var C=this.getAbsoluteTransform(r).getMatrix();f.transform(C[0],C[1],C[2],C[3],C[4],C[5]),o.call(this,f,this),f.restore();var p=c.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(c._canvas,0,0,c.width/p,c.height/p)}else{if(s._applyLineJoin(this),!g){var C=this.getAbsoluteTransform(r).getMatrix();s.transform(C[0],C[1],C[2],C[3],C[4],C[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),o.call(this,s,this)}return s.restore(),this}drawHit(t,r,i=!1){if(!this.shouldDrawHit(r,i))return this;var n=this.getLayer(),s=t||n.hitCanvas,a=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||x.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var c=this.getAbsoluteTransform(r).getMatrix();return a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),!(this===r)){var u=this.getAbsoluteTransform(r).getMatrix();a.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(t=0){var r=this._getCanvasCache(),i=this._getCachedSceneCanvas(),n=r.hit,s=n.getContext(),a=n.getWidth(),o=n.getHeight(),l,h,c,f,u,g;s.clear(),s.drawImage(i._canvas,0,0,a,o);try{for(l=s.getImageData(0,0,a,o),h=l.data,c=h.length,f=x._hexToRgb(this.colorKey),u=0;u<c;u+=4)g=h[u+3],g>t?(h[u]=f.r,h[u+1]=f.g,h[u+2]=f.b,h[u+3]=255):h[u+3]=0;s.putImageData(l,0,0)}catch(d){x.error("Unable to draw hit graph from cached scene canvas. "+d.message)}return this}hasPointerCapture(t){return th(t,this)}setPointerCapture(t){eh(t,this)}releaseCapture(t){Jr(t)}}G.prototype._fillFunc=Jd;G.prototype._strokeFunc=Qd;G.prototype._fillFuncHit=Zd;G.prototype._strokeFuncHit=tg;G.prototype._centroid=!1;G.prototype.nodeType="Shape";St(G);G.prototype.eventListeners={};G.prototype.on.call(G.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",eg);G.prototype.on.call(G.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",rg);G.prototype.on.call(G.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",ig);G.prototype.on.call(G.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",ng);G.prototype.on.call(G.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",sg);v.addGetterSetter(G,"stroke",void 0,Ql());v.addGetterSetter(G,"strokeWidth",2,H());v.addGetterSetter(G,"fillAfterStrokeEnabled",!1);v.addGetterSetter(G,"hitStrokeWidth","auto",Zs());v.addGetterSetter(G,"strokeHitEnabled",!0,Zt());v.addGetterSetter(G,"perfectDrawEnabled",!0,Zt());v.addGetterSetter(G,"shadowForStrokeEnabled",!0,Zt());v.addGetterSetter(G,"lineJoin");v.addGetterSetter(G,"lineCap");v.addGetterSetter(G,"sceneFunc");v.addGetterSetter(G,"hitFunc");v.addGetterSetter(G,"dash");v.addGetterSetter(G,"dashOffset",0,H());v.addGetterSetter(G,"shadowColor",void 0,xr());v.addGetterSetter(G,"shadowBlur",0,H());v.addGetterSetter(G,"shadowOpacity",1,H());v.addComponentsGetterSetter(G,"shadowOffset",["x","y"]);v.addGetterSetter(G,"shadowOffsetX",0,H());v.addGetterSetter(G,"shadowOffsetY",0,H());v.addGetterSetter(G,"fillPatternImage");v.addGetterSetter(G,"fill",void 0,Ql());v.addGetterSetter(G,"fillPatternX",0,H());v.addGetterSetter(G,"fillPatternY",0,H());v.addGetterSetter(G,"fillLinearGradientColorStops");v.addGetterSetter(G,"strokeLinearGradientColorStops");v.addGetterSetter(G,"fillRadialGradientStartRadius",0);v.addGetterSetter(G,"fillRadialGradientEndRadius",0);v.addGetterSetter(G,"fillRadialGradientColorStops");v.addGetterSetter(G,"fillPatternRepeat","repeat");v.addGetterSetter(G,"fillEnabled",!0);v.addGetterSetter(G,"strokeEnabled",!0);v.addGetterSetter(G,"shadowEnabled",!0);v.addGetterSetter(G,"dashEnabled",!0);v.addGetterSetter(G,"strokeScaleEnabled",!0);v.addGetterSetter(G,"fillPriority","color");v.addComponentsGetterSetter(G,"fillPatternOffset",["x","y"]);v.addGetterSetter(G,"fillPatternOffsetX",0,H());v.addGetterSetter(G,"fillPatternOffsetY",0,H());v.addComponentsGetterSetter(G,"fillPatternScale",["x","y"]);v.addGetterSetter(G,"fillPatternScaleX",1,H());v.addGetterSetter(G,"fillPatternScaleY",1,H());v.addComponentsGetterSetter(G,"fillLinearGradientStartPoint",["x","y"]);v.addComponentsGetterSetter(G,"strokeLinearGradientStartPoint",["x","y"]);v.addGetterSetter(G,"fillLinearGradientStartPointX",0);v.addGetterSetter(G,"strokeLinearGradientStartPointX",0);v.addGetterSetter(G,"fillLinearGradientStartPointY",0);v.addGetterSetter(G,"strokeLinearGradientStartPointY",0);v.addComponentsGetterSetter(G,"fillLinearGradientEndPoint",["x","y"]);v.addComponentsGetterSetter(G,"strokeLinearGradientEndPoint",["x","y"]);v.addGetterSetter(G,"fillLinearGradientEndPointX",0);v.addGetterSetter(G,"strokeLinearGradientEndPointX",0);v.addGetterSetter(G,"fillLinearGradientEndPointY",0);v.addGetterSetter(G,"strokeLinearGradientEndPointY",0);v.addComponentsGetterSetter(G,"fillRadialGradientStartPoint",["x","y"]);v.addGetterSetter(G,"fillRadialGradientStartPointX",0);v.addGetterSetter(G,"fillRadialGradientStartPointY",0);v.addComponentsGetterSetter(G,"fillRadialGradientEndPoint",["x","y"]);v.addGetterSetter(G,"fillRadialGradientEndPointX",0);v.addGetterSetter(G,"fillRadialGradientEndPointY",0);v.addGetterSetter(G,"fillPatternRotation",0);v.backCompat(G,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var ag="#",og="beforeDraw",lg="draw",mh=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],hg=mh.length;class Qe extends Yt{constructor(t){super(t);this.canvas=new vr,this.hitCanvas=new ta({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var r=this.getStage();return r&&r.content&&(r.content.removeChild(this.getNativeCanvasElement()),t<r.children.length-1?r.content.insertBefore(this.getNativeCanvasElement(),r.children[t+1].getCanvas()._canvas):r.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){U.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=U.prototype.moveUp.call(this);if(!t)return!1;var r=this.getStage();return!r||!r.content?!1:(r.content.removeChild(this.getNativeCanvasElement()),this.index<r.children.length-1?r.content.insertBefore(this.getNativeCanvasElement(),r.children[this.index+1].getCanvas()._canvas):r.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(U.prototype.moveDown.call(this)){var t=this.getStage();if(t){var r=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),r[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(U.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var r=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),r[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return U.prototype.remove.call(this),t&&t.parentNode&&x._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:r}){return this.canvas.setSize(t,r),this.hitCanvas.setSize(t,r),this._setSmoothEnabled(),this}_validateAdd(t){var r=t.getType();r!=="Group"&&r!=="Shape"&&x.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),U.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){x.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){x.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,x.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var r=1,i=!1;;){for(let n=0;n<hg;n++){const s=mh[n],a=this._getIntersection({x:t.x+s.x*r,y:t.y+s.y*r}),o=a.shape;if(o)return o;if(i=!!a.antialiased,!a.antialiased)break}if(i)r+=1;else return null}}_getIntersection(t){const r=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*r),Math.round(t.y*r),1,1).data,n=i[3];if(n===255){const s=x._rgbToHex(i[0],i[1],i[2]),a=Qr[ag+s];return a?{shape:a}:{antialiased:!0}}else if(n>0)return{antialiased:!0};return{}}drawScene(t,r){var i=this.getLayer(),n=t||i&&i.getCanvas();return this._fire(og,{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),Yt.prototype.drawScene.call(this,n,r),this._fire(lg,{node:this}),this}drawHit(t,r){var i=this.getLayer(),n=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Yt.prototype.drawHit.call(this,n,r),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){x.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return x.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,r=!!this.hitCanvas._canvas.parentNode;r?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}}Qe.prototype.nodeType="Layer";St(Qe);v.addGetterSetter(Qe,"imageSmoothingEnabled",!0);v.addGetterSetter(Qe,"clearBeforeDraw",!0);v.addGetterSetter(Qe,"hitGraphEnabled",!0,Zt());class ra extends Qe{constructor(t){super(t);this.listening(!1),x.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}ra.prototype.nodeType="FastLayer";St(ra);class wr extends Yt{_validateAdd(t){var r=t.getType();r!=="Group"&&r!=="Shape"&&x.throw("You may only add groups and shapes to groups.")}}wr.prototype.nodeType="Group";St(wr);var Nn=function(){return pr.performance&&pr.performance.now?function(){return pr.performance.now()}:function(){return new Date().getTime()}}();class qt{constructor(t,r){this.id=qt.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Nn(),frameRate:0},this.func=t,this.setLayers(r)}setLayers(t){var r=[];return t?t.length>0?r=t:r=[t]:r=[],this.layers=r,this}getLayers(){return this.layers}addLayer(t){var r=this.layers,i=r.length,n;for(n=0;n<i;n++)if(r[n]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){var t=qt,r=t.animations,i=r.length,n;for(n=0;n<i;n++)if(r[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Nn(),qt._addAnimation(this),this}stop(){return qt._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){var r=t.id,i=this.animations,n=i.length,s;for(s=0;s<n;s++)if(i[s].id===r){this.animations.splice(s,1);break}}static _runFrames(){var t={},r=this.animations,i,n,s,a,o,l,h,c,f;for(a=0;a<r.length;a++)if(i=r[a],n=i.layers,s=i.func,i._updateFrameObject(Nn()),l=n.length,s?f=s.call(i,i.frame)!==!1:f=!0,!!f)for(o=0;o<l;o++)h=n[o],h._id!==void 0&&(t[h._id]=h);for(c in t)!t.hasOwnProperty(c)||t[c].batchDraw()}static _animationLoop(){var t=qt;t.animations.length?(t._runFrames(),x.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,x.requestAnimFrame(this._animationLoop))}}qt.animations=[];qt.animIdCounter=0;qt.animRunning=!1;var cg={node:1,duration:1,easing:1,onFinish:1,yoyo:1},fg=1,eo=2,ro=3,ug=0,io=["fill","stroke","shadowColor"];class dg{constructor(t,r,i,n,s,a,o){this.prop=t,this.propFunc=r,this.begin=n,this._pos=n,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=s-this.begin,this.pause()}fire(t){var r=this[t];r&&r()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=eo,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=ro,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var t=this.getTimer()-this._startTime;this.state===eo?this.setTime(t):this.state===ro&&this.setTime(this.duration-t)}pause(){this.state=fg,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Tt{constructor(t){var r=this,i=t.node,n=i._id,s,a=t.easing||Zr.Linear,o=!!t.yoyo,l;typeof t.duration=="undefined"?s=.3:t.duration===0?s=.001:s=t.duration,this.node=i,this._id=ug++;var h=i.getLayer()||(i instanceof $.Stage?i.getLayers():null);h||x.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new qt(function(){r.tween.onEnterFrame()},h),this.tween=new dg(l,function(c){r._tweenFunc(c)},a,0,1,s*1e3,o),this._addListeners(),Tt.attrs[n]||(Tt.attrs[n]={}),Tt.attrs[n][this._id]||(Tt.attrs[n][this._id]={}),Tt.tweens[n]||(Tt.tweens[n]={});for(l in t)cg[l]===void 0&&this._addAttr(l,t[l]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,r){var i=this.node,n=i._id,s,a,o,l,h,c,f,u;if(o=Tt.tweens[n][t],o&&delete Tt.attrs[n][o][t],s=i.getAttr(t),x._isArray(r))if(a=[],h=Math.max(r.length,s.length),t==="points"&&r.length!==s.length&&(r.length>s.length?(f=s,s=x._prepareArrayForTween(s,r,i.closed())):(c=r,r=x._prepareArrayForTween(r,s,i.closed()))),t.indexOf("fill")===0)for(l=0;l<h;l++)if(l%2===0)a.push(r[l]-s[l]);else{var g=x.colorToRGBA(s[l]);u=x.colorToRGBA(r[l]),s[l]=g,a.push({r:u.r-g.r,g:u.g-g.g,b:u.b-g.b,a:u.a-g.a})}else for(l=0;l<h;l++)a.push(r[l]-s[l]);else io.indexOf(t)!==-1?(s=x.colorToRGBA(s),u=x.colorToRGBA(r),a={r:u.r-s.r,g:u.g-s.g,b:u.b-s.b,a:u.a-s.a}):a=r-s;Tt.attrs[n][this._id][t]={start:s,diff:a,end:r,trueEnd:c,trueStart:f},Tt.tweens[n][t]=this._id}_tweenFunc(t){var r=this.node,i=Tt.attrs[r._id][this._id],n,s,a,o,l,h,c,f;for(n in i){if(s=i[n],a=s.start,o=s.diff,f=s.end,x._isArray(a))if(l=[],c=Math.max(a.length,f.length),n.indexOf("fill")===0)for(h=0;h<c;h++)h%2===0?l.push((a[h]||0)+o[h]*t):l.push("rgba("+Math.round(a[h].r+o[h].r*t)+","+Math.round(a[h].g+o[h].g*t)+","+Math.round(a[h].b+o[h].b*t)+","+(a[h].a+o[h].a*t)+")");else for(h=0;h<c;h++)l.push((a[h]||0)+o[h]*t);else io.indexOf(n)!==-1?l="rgba("+Math.round(a.r+o.r*t)+","+Math.round(a.g+o.g*t)+","+Math.round(a.b+o.b*t)+","+(a.a+o.a*t)+")":l=a+o*t;r.setAttr(n,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var t=this.node,r=Tt.attrs[t._id][this._id];r.points&&r.points.trueEnd&&t.setAttr("points",r.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var t=this.node,r=Tt.attrs[t._id][this._id];r.points&&r.points.trueStart&&t.points(r.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var t=this.node._id,r=this._id,i=Tt.tweens[t],n;this.pause();for(n in i)delete Tt.tweens[t][n];delete Tt.attrs[t][r]}}Tt.attrs={};Tt.tweens={};U.prototype.to=function(e){var t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()};var r=new Tt(e);r.play()};const Zr={BackEaseIn(e,t,r,i){var n=1.70158;return r*(e/=i)*e*((n+1)*e-n)+t},BackEaseOut(e,t,r,i){var n=1.70158;return r*((e=e/i-1)*e*((n+1)*e+n)+1)+t},BackEaseInOut(e,t,r,i){var n=1.70158;return(e/=i/2)<1?r/2*(e*e*(((n*=1.525)+1)*e-n))+t:r/2*((e-=2)*e*(((n*=1.525)+1)*e+n)+2)+t},ElasticEaseIn(e,t,r,i,n,s){var a=0;return e===0?t:(e/=i)===1?t+r:(s||(s=i*.3),!n||n<Math.abs(r)?(n=r,a=s/4):a=s/(2*Math.PI)*Math.asin(r/n),-(n*Math.pow(2,10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/s))+t)},ElasticEaseOut(e,t,r,i,n,s){var a=0;return e===0?t:(e/=i)===1?t+r:(s||(s=i*.3),!n||n<Math.abs(r)?(n=r,a=s/4):a=s/(2*Math.PI)*Math.asin(r/n),n*Math.pow(2,-10*e)*Math.sin((e*i-a)*(2*Math.PI)/s)+r+t)},ElasticEaseInOut(e,t,r,i,n,s){var a=0;return e===0?t:(e/=i/2)===2?t+r:(s||(s=i*(.3*1.5)),!n||n<Math.abs(r)?(n=r,a=s/4):a=s/(2*Math.PI)*Math.asin(r/n),e<1?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/s))+t:n*Math.pow(2,-10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/s)*.5+r+t)},BounceEaseOut(e,t,r,i){return(e/=i)<1/2.75?r*(7.5625*e*e)+t:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn(e,t,r,i){return r-Zr.BounceEaseOut(i-e,0,r,i)+t},BounceEaseInOut(e,t,r,i){return e<i/2?Zr.BounceEaseIn(e*2,0,r,i)*.5+t:Zr.BounceEaseOut(e*2-i,0,r,i)*.5+r*.5+t},EaseIn(e,t,r,i){return r*(e/=i)*e+t},EaseOut(e,t,r,i){return-r*(e/=i)*(e-2)+t},EaseInOut(e,t,r,i){return(e/=i/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t},StrongEaseIn(e,t,r,i){return r*(e/=i)*e*e*e*e+t},StrongEaseOut(e,t,r,i){return r*((e=e/i-1)*e*e*e*e+1)+t},StrongEaseInOut(e,t,r,i){return(e/=i/2)<1?r/2*e*e*e*e*e+t:r/2*((e-=2)*e*e*e*e+2)+t},Linear(e,t,r,i){return r*e/i+t}},no=x._assign($,{Util:x,Transform:Wt,Node:U,Container:Yt,Stage:Sn,stages:Wi,Layer:Qe,FastLayer:ra,Group:wr,DD:ct,Shape:G,shapes:Qr,Animation:qt,Tween:Tt,Easings:Zr,Context:yn,Canvas:Cn});class pe extends G{_sceneFunc(t){var r=$.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,r,i),t.arc(0,0,this.innerRadius(),r,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),r=this.outerRadius(),i=this.clockwise(),n=$.getAngle(i?360-this.angle():this.angle()),s=Math.cos(Math.min(n,Math.PI)),a=1,o=Math.sin(Math.min(Math.max(Math.PI,n),3*Math.PI/2)),l=Math.sin(Math.min(n,Math.PI/2)),h=s*(s>0?t:r),c=a*r,f=o*(o>0?t:r),u=l*(l>0?r:t);return{x:h,y:i?-1*u:f,width:c-h,height:u-f}}}pe.prototype._centroid=!0;pe.prototype.className="Arc";pe.prototype._attrsAffectingSize=["innerRadius","outerRadius"];St(pe);v.addGetterSetter(pe,"innerRadius",0,H());v.addGetterSetter(pe,"outerRadius",0,H());v.addGetterSetter(pe,"angle",0,H());v.addGetterSetter(pe,"clockwise",!1,Zt());function hs(e,t,r,i,n,s,a){var o=Math.sqrt(Math.pow(r-e,2)+Math.pow(i-t,2)),l=Math.sqrt(Math.pow(n-r,2)+Math.pow(s-i,2)),h=a*o/(o+l),c=a*l/(o+l),f=r-h*(n-e),u=i-h*(s-t),g=r+c*(n-e),d=i+c*(s-t);return[f,u,g,d]}function so(e,t){var r=e.length,i=[],n,s;for(n=2;n<r-2;n+=2)s=hs(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t),!isNaN(s[0])&&(i.push(s[0]),i.push(s[1]),i.push(e[n]),i.push(e[n+1]),i.push(s[2]),i.push(s[3]));return i}class ve extends G{constructor(t){super(t);this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var r=this.points(),i=r.length,n=this.tension(),s=this.closed(),a=this.bezier(),o,l,h;if(!!i){if(t.beginPath(),t.moveTo(r[0],r[1]),n!==0&&i>4){for(o=this.getTensionPoints(),l=o.length,h=s?0:4,s||t.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)t.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);s||t.quadraticCurveTo(o[l-2],o[l-1],r[i-2],r[i-1])}else if(a)for(h=2;h<i;)t.bezierCurveTo(r[h++],r[h++],r[h++],r[h++],r[h++],r[h++]);else for(h=2;h<i;h+=2)t.lineTo(r[h],r[h+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():so(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),r=t.length,i=this.tension(),n=hs(t[r-2],t[r-1],t[0],t[1],t[2],t[3],i),s=hs(t[r-4],t[r-3],t[r-2],t[r-1],t[0],t[1],i),a=so(t,i),o=[n[2],n[3]].concat(a).concat([s[0],s[1],t[r-2],t[r-1],s[2],s[3],n[0],n[1],t[0],t[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();for(var r=t[0],i=t[0],n=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],r=Math.min(r,a),i=Math.max(i,a),n=Math.min(n,o),s=Math.max(s,o);return{x:r,y:n,width:i-r,height:s-n}}}ve.prototype.className="Line";ve.prototype._attrsAffectingSize=["points","bezier","tension"];St(ve);v.addGetterSetter(ve,"closed",!1);v.addGetterSetter(ve,"bezier",!1);v.addGetterSetter(ve,"tension",0,H());v.addGetterSetter(ve,"points",[],wd());class gt extends G{constructor(t){super(t);this.dataArray=[],this.pathLength=0,this.dataArray=gt.parsePathData(this.data()),this.pathLength=0;for(var r=0;r<this.dataArray.length;++r)this.pathLength+=this.dataArray[r].pathLength;this.on("dataChange.konva",function(){this.dataArray=gt.parsePathData(this.data()),this.pathLength=0;for(var i=0;i<this.dataArray.length;++i)this.pathLength+=this.dataArray[i].pathLength})}_sceneFunc(t){var r=this.dataArray;t.beginPath();for(var i=!1,n=0;n<r.length;n++){var s=r[n].command,a=r[n].points;switch(s){case"L":t.lineTo(a[0],a[1]);break;case"M":t.moveTo(a[0],a[1]);break;case"C":t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":t.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":var o=a[0],l=a[1],h=a[2],c=a[3],f=a[4],u=a[5],g=a[6],d=a[7],C=h>c?h:c,p=h>c?1:h/c,y=h>c?c/h:1;t.translate(o,l),t.rotate(g),t.scale(p,y),t.arc(0,0,C,f,f+u,1-d),t.scale(1/p,1/y),t.rotate(-g),t.translate(-o,-l);break;case"z":i=!0,t.closePath();break}}!i&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach(function(h){if(h.command==="A"){var c=h.points[4],f=h.points[5],u=h.points[4]+f,g=Math.PI/180;if(Math.abs(c-u)<g&&(g=Math.abs(c-u)),f<0)for(let d=c-g;d>u;d-=g){const C=gt.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],d,0);t.push(C.x,C.y)}else for(let d=c+g;d<u;d+=g){const C=gt.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],d,0);t.push(C.x,C.y)}}else if(h.command==="C")for(let d=0;d<=1;d+=.01){const C=gt.getPointOnCubicBezier(d,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);t.push(C.x,C.y)}else t=t.concat(h.points)});for(var r=t[0],i=t[0],n=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],isNaN(a)||(r=Math.min(r,a),i=Math.max(i,a)),isNaN(o)||(n=Math.min(n,o),s=Math.max(s,o));return{x:r,y:n,width:i-r,height:s-n}}getLength(){return this.pathLength}getPointAtLength(t){var r,i=0,n=this.dataArray.length;if(!n)return null;for(;i<n&&t>this.dataArray[i].pathLength;)t-=this.dataArray[i].pathLength,++i;if(i===n)return r=this.dataArray[i-1].points.slice(-2),{x:r[0],y:r[1]};if(t<.01)return r=this.dataArray[i].points.slice(0,2),{x:r[0],y:r[1]};var s=this.dataArray[i],a=s.points;switch(s.command){case"L":return gt.getPointOnLine(t,s.start.x,s.start.y,a[0],a[1]);case"C":return gt.getPointOnCubicBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return gt.getPointOnQuadraticBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3]);case"A":var o=a[0],l=a[1],h=a[2],c=a[3],f=a[4],u=a[5],g=a[6];return f+=u*t/s.pathLength,gt.getPointOnEllipticalArc(o,l,h,c,f,g)}return null}static getLineLength(t,r,i,n){return Math.sqrt((i-t)*(i-t)+(n-r)*(n-r))}static getPointOnLine(t,r,i,n,s,a,o){a===void 0&&(a=r),o===void 0&&(o=i);var l=(s-i)/(n-r+1e-8),h=Math.sqrt(t*t/(1+l*l));n<r&&(h*=-1);var c=l*h,f;if(n===r)f={x:a,y:o+c};else if((o-i)/(a-r+1e-8)===l)f={x:a+h,y:o+c};else{var u,g,d=this.getLineLength(r,i,n,s),C=(a-r)*(n-r)+(o-i)*(s-i);C=C/(d*d),u=r+C*(n-r),g=i+C*(s-i);var p=this.getLineLength(a,o,u,g),y=Math.sqrt(t*t-p*p);h=Math.sqrt(y*y/(1+l*l)),n<r&&(h*=-1),c=l*h,f={x:u+h,y:g+c}}return f}static getPointOnCubicBezier(t,r,i,n,s,a,o,l,h){function c(p){return p*p*p}function f(p){return 3*p*p*(1-p)}function u(p){return 3*p*(1-p)*(1-p)}function g(p){return(1-p)*(1-p)*(1-p)}var d=l*c(t)+a*f(t)+n*u(t)+r*g(t),C=h*c(t)+o*f(t)+s*u(t)+i*g(t);return{x:d,y:C}}static getPointOnQuadraticBezier(t,r,i,n,s,a,o){function l(g){return g*g}function h(g){return 2*g*(1-g)}function c(g){return(1-g)*(1-g)}var f=a*l(t)+n*h(t)+r*c(t),u=o*l(t)+s*h(t)+i*c(t);return{x:f,y:u}}static getPointOnEllipticalArc(t,r,i,n,s,a){var o=Math.cos(a),l=Math.sin(a),h={x:i*Math.cos(s),y:n*Math.sin(s)};return{x:t+(h.x*o-h.y*l),y:r+(h.x*l+h.y*o)}}static parsePathData(t){if(!t)return[];var r=t,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];r=r.replace(new RegExp(" ","g"),",");for(var n=0;n<i.length;n++)r=r.replace(new RegExp(i[n],"g"),"|"+i[n]);var s=r.split("|"),a=[],o=[],l=0,h=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,f;for(n=1;n<s.length;n++){var u=s[n],g=u.charAt(0);for(u=u.slice(1),o.length=0;f=c.exec(u);)o.push(f[0]);for(var d=[],C=0,p=o.length;C<p;C++){if(o[C]==="00"){d.push(0,0);continue}var y=parseFloat(o[C]);isNaN(y)?d.push(0):d.push(y)}for(;d.length>0&&!isNaN(d[0]);){var m=null,b=[],w=l,A=h,T,E,M,O,I,D,k,P,L,X;switch(g){case"l":l+=d.shift(),h+=d.shift(),m="L",b.push(l,h);break;case"L":l=d.shift(),h=d.shift(),b.push(l,h);break;case"m":var Y=d.shift(),K=d.shift();if(l+=Y,h+=K,m="M",a.length>2&&a[a.length-1].command==="z"){for(var Z=a.length-2;Z>=0;Z--)if(a[Z].command==="M"){l=a[Z].points[0]+Y,h=a[Z].points[1]+K;break}}b.push(l,h),g="l";break;case"M":l=d.shift(),h=d.shift(),m="M",b.push(l,h),g="L";break;case"h":l+=d.shift(),m="L",b.push(l,h);break;case"H":l=d.shift(),m="L",b.push(l,h);break;case"v":h+=d.shift(),m="L",b.push(l,h);break;case"V":h=d.shift(),m="L",b.push(l,h);break;case"C":b.push(d.shift(),d.shift(),d.shift(),d.shift()),l=d.shift(),h=d.shift(),b.push(l,h);break;case"c":b.push(l+d.shift(),h+d.shift(),l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),m="C",b.push(l,h);break;case"S":E=l,M=h,T=a[a.length-1],T.command==="C"&&(E=l+(l-T.points[2]),M=h+(h-T.points[3])),b.push(E,M,d.shift(),d.shift()),l=d.shift(),h=d.shift(),m="C",b.push(l,h);break;case"s":E=l,M=h,T=a[a.length-1],T.command==="C"&&(E=l+(l-T.points[2]),M=h+(h-T.points[3])),b.push(E,M,l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),m="C",b.push(l,h);break;case"Q":b.push(d.shift(),d.shift()),l=d.shift(),h=d.shift(),b.push(l,h);break;case"q":b.push(l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),m="Q",b.push(l,h);break;case"T":E=l,M=h,T=a[a.length-1],T.command==="Q"&&(E=l+(l-T.points[0]),M=h+(h-T.points[1])),l=d.shift(),h=d.shift(),m="Q",b.push(E,M,l,h);break;case"t":E=l,M=h,T=a[a.length-1],T.command==="Q"&&(E=l+(l-T.points[0]),M=h+(h-T.points[1])),l+=d.shift(),h+=d.shift(),m="Q",b.push(E,M,l,h);break;case"A":O=d.shift(),I=d.shift(),D=d.shift(),k=d.shift(),P=d.shift(),L=l,X=h,l=d.shift(),h=d.shift(),m="A",b=this.convertEndpointToCenterParameterization(L,X,l,h,k,P,O,I,D);break;case"a":O=d.shift(),I=d.shift(),D=d.shift(),k=d.shift(),P=d.shift(),L=l,X=h,l+=d.shift(),h+=d.shift(),m="A",b=this.convertEndpointToCenterParameterization(L,X,l,h,k,P,O,I,D);break}a.push({command:m||g,points:b,start:{x:w,y:A},pathLength:this.calcLength(w,A,m||g,b)})}(g==="z"||g==="Z")&&a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(t,r,i,n){var s,a,o,l,h=gt;switch(i){case"L":return h.getLineLength(t,r,n[0],n[1]);case"C":for(s=0,a=h.getPointOnCubicBezier(0,t,r,n[0],n[1],n[2],n[3],n[4],n[5]),l=.01;l<=1;l+=.01)o=h.getPointOnCubicBezier(l,t,r,n[0],n[1],n[2],n[3],n[4],n[5]),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"Q":for(s=0,a=h.getPointOnQuadraticBezier(0,t,r,n[0],n[1],n[2],n[3]),l=.01;l<=1;l+=.01)o=h.getPointOnQuadraticBezier(l,t,r,n[0],n[1],n[2],n[3]),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"A":s=0;var c=n[4],f=n[5],u=n[4]+f,g=Math.PI/180;if(Math.abs(c-u)<g&&(g=Math.abs(c-u)),a=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),f<0)for(l=c-g;l>u;l-=g)o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(l=c+g;l<u;l+=g)o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),s}return 0}static convertEndpointToCenterParameterization(t,r,i,n,s,a,o,l,h){var c=h*(Math.PI/180),f=Math.cos(c)*(t-i)/2+Math.sin(c)*(r-n)/2,u=-1*Math.sin(c)*(t-i)/2+Math.cos(c)*(r-n)/2,g=f*f/(o*o)+u*u/(l*l);g>1&&(o*=Math.sqrt(g),l*=Math.sqrt(g));var d=Math.sqrt((o*o*(l*l)-o*o*(u*u)-l*l*(f*f))/(o*o*(u*u)+l*l*(f*f)));s===a&&(d*=-1),isNaN(d)&&(d=0);var C=d*o*u/l,p=d*-l*f/o,y=(t+i)/2+Math.cos(c)*C-Math.sin(c)*p,m=(r+n)/2+Math.sin(c)*C+Math.cos(c)*p,b=function(I){return Math.sqrt(I[0]*I[0]+I[1]*I[1])},w=function(I,D){return(I[0]*D[0]+I[1]*D[1])/(b(I)*b(D))},A=function(I,D){return(I[0]*D[1]<I[1]*D[0]?-1:1)*Math.acos(w(I,D))},T=A([1,0],[(f-C)/o,(u-p)/l]),E=[(f-C)/o,(u-p)/l],M=[(-1*f-C)/o,(-1*u-p)/l],O=A(E,M);return w(E,M)<=-1&&(O=Math.PI),w(E,M)>=1&&(O=0),a===0&&O>0&&(O=O-2*Math.PI),a===1&&O<0&&(O=O+2*Math.PI),[y,m,o,l,T,O,c,a]}}gt.prototype.className="Path";gt.prototype._attrsAffectingSize=["data"];St(gt);v.addGetterSetter(gt,"data");class Ze extends ve{_sceneFunc(t){super._sceneFunc(t);var r=Math.PI*2,i=this.points(),n=i,s=this.tension()!==0&&i.length>4;s&&(n=this.getTensionPoints());var a=this.pointerLength(),o=i.length,l,h;if(s){const u=[n[n.length-4],n[n.length-3],n[n.length-2],n[n.length-1],i[o-2],i[o-1]],g=gt.calcLength(n[n.length-4],n[n.length-3],"C",u),d=gt.getPointOnQuadraticBezier(Math.min(1,1-a/g),u[0],u[1],u[2],u[3],u[4],u[5]);l=i[o-2]-d.x,h=i[o-1]-d.y}else l=i[o-2]-i[o-4],h=i[o-1]-i[o-3];var c=(Math.atan2(h,l)+r)%r,f=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[o-2],i[o-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-a,f/2),t.lineTo(-a,-f/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),s?(l=(n[0]+n[2])/2-i[0],h=(n[1]+n[3])/2-i[1]):(l=i[2]-i[0],h=i[3]-i[1]),t.rotate((Math.atan2(-h,-l)+r)%r),t.moveTo(0,0),t.lineTo(-a,f/2),t.lineTo(-a,-f/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var r=this.dashEnabled();r&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),r&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),r=this.pointerWidth()/2;return{x:t.x-r,y:t.y-r,width:t.width+r*2,height:t.height+r*2}}}Ze.prototype.className="Arrow";St(Ze);v.addGetterSetter(Ze,"pointerLength",10,H());v.addGetterSetter(Ze,"pointerWidth",10,H());v.addGetterSetter(Ze,"pointerAtBeginning",!1);v.addGetterSetter(Ze,"pointerAtEnding",!0);class Er extends G{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Er.prototype._centroid=!0;Er.prototype.className="Circle";Er.prototype._attrsAffectingSize=["radius"];St(Er);v.addGetterSetter(Er,"radius",0,H());class Ne extends G{_sceneFunc(t){var r=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),r!==i&&t.scale(1,i/r),t.arc(0,0,r,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Ne.prototype.className="Ellipse";Ne.prototype._centroid=!0;Ne.prototype._attrsAffectingSize=["radiusX","radiusY"];St(Ne);v.addComponentsGetterSetter(Ne,"radius",["x","y"]);v.addGetterSetter(Ne,"radiusX",0,H());v.addGetterSetter(Ne,"radiusY",0,H());class te extends G{constructor(t){super(t);this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const r=this.getWidth(),i=this.getHeight(),n=this.attrs.image;let s;if(n){const a=this.attrs.cropWidth,o=this.attrs.cropHeight;a&&o?s=[n,this.cropX(),this.cropY(),a,o,0,0,r,i]:s=[n,0,0,r,i]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,r,i),t.closePath(),t.fillStrokeShape(this)),n&&t.drawImage.apply(t,s)}_hitFunc(t){var r=this.width(),i=this.height();t.beginPath(),t.rect(0,0,r,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,r;return(t=this.attrs.width)!==null&&t!==void 0?t:(r=this.image())===null||r===void 0?void 0:r.width}getHeight(){var t,r;return(t=this.attrs.height)!==null&&t!==void 0?t:(r=this.image())===null||r===void 0?void 0:r.height}static fromURL(t,r,i=null){var n=x.createImageElement();n.onload=function(){var s=new te({image:n});r(s)},n.onerror=i,n.crossOrigin="Anonymous",n.src=t}}te.prototype.className="Image";St(te);v.addGetterSetter(te,"image");v.addComponentsGetterSetter(te,"crop",["x","y","width","height"]);v.addGetterSetter(te,"cropX",0,H());v.addGetterSetter(te,"cropY",0,H());v.addGetterSetter(te,"cropWidth",0,H());v.addGetterSetter(te,"cropHeight",0,H());var _h=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],gg="Change.konva",pg="none",cs="up",fs="right",us="down",ds="left",vg=_h.length;class ia extends wr{constructor(t){super(t);this.on("add.konva",function(r){this._addListeners(r.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var r=this,i,n=function(){r._sync()};for(i=0;i<vg;i++)t.on(_h[i]+gg,n)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t=this.getText(),r=this.getTag(),i,n,s,a,o,l,h;if(t&&r){switch(i=t.width(),n=t.height(),s=r.pointerDirection(),a=r.pointerWidth(),h=r.pointerHeight(),o=0,l=0,s){case cs:o=i/2,l=-1*h;break;case fs:o=i+a,l=n/2;break;case us:o=i/2,l=n+h;break;case ds:o=-1*a,l=n/2;break}r.setAttrs({x:-1*o,y:-1*l,width:i,height:n}),t.setAttrs({x:-1*o,y:-1*l})}}}ia.prototype.className="Label";St(ia);class tr extends G{_sceneFunc(t){var r=this.width(),i=this.height(),n=this.pointerDirection(),s=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius();let l=0,h=0,c=0,f=0;typeof o=="number"?l=h=c=f=Math.min(o,r/2,i/2):(l=Math.min(o[0]||0,r/2,i/2),h=Math.min(o[1]||0,r/2,i/2),f=Math.min(o[2]||0,r/2,i/2),c=Math.min(o[3]||0,r/2,i/2)),t.beginPath(),t.moveTo(l,0),n===cs&&(t.lineTo((r-s)/2,0),t.lineTo(r/2,-1*a),t.lineTo((r+s)/2,0)),t.lineTo(r-h,0),t.arc(r-h,h,h,Math.PI*3/2,0,!1),n===fs&&(t.lineTo(r,(i-a)/2),t.lineTo(r+s,i/2),t.lineTo(r,(i+a)/2)),t.lineTo(r,i-f),t.arc(r-f,i-f,f,0,Math.PI/2,!1),n===us&&(t.lineTo((r+s)/2,i),t.lineTo(r/2,i+a),t.lineTo((r-s)/2,i)),t.lineTo(c,i),t.arc(c,i-c,c,Math.PI/2,Math.PI,!1),n===ds&&(t.lineTo(0,(i+a)/2),t.lineTo(-1*s,i/2),t.lineTo(0,(i-a)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,r=0,i=this.pointerWidth(),n=this.pointerHeight(),s=this.pointerDirection(),a=this.width(),o=this.height();return s===cs?(r-=n,o+=n):s===us?o+=n:s===ds?(t-=i*1.5,a+=i):s===fs&&(a+=i*1.5),{x:t,y:r,width:a,height:o}}}tr.prototype.className="Tag";St(tr);v.addGetterSetter(tr,"pointerDirection",pg);v.addGetterSetter(tr,"pointerWidth",0,H());v.addGetterSetter(tr,"pointerHeight",0,H());v.addGetterSetter(tr,"cornerRadius",0,Jl(4));class pi extends G{_sceneFunc(t){var r=this.cornerRadius(),i=this.width(),n=this.height();if(t.beginPath(),!r)t.rect(0,0,i,n);else{let s=0,a=0,o=0,l=0;typeof r=="number"?s=a=o=l=Math.min(r,i/2,n/2):(s=Math.min(r[0]||0,i/2,n/2),a=Math.min(r[1]||0,i/2,n/2),l=Math.min(r[2]||0,i/2,n/2),o=Math.min(r[3]||0,i/2,n/2)),t.moveTo(s,0),t.lineTo(i-a,0),t.arc(i-a,a,a,Math.PI*3/2,0,!1),t.lineTo(i,n-l),t.arc(i-l,n-l,l,0,Math.PI/2,!1),t.lineTo(o,n),t.arc(o,n-o,o,Math.PI/2,Math.PI,!1),t.lineTo(0,s),t.arc(s,s,s,Math.PI,Math.PI*3/2,!1)}t.closePath(),t.fillStrokeShape(this)}}pi.prototype.className="Rect";St(pi);v.addGetterSetter(pi,"cornerRadius",0,Jl(4));class er extends G{_sceneFunc(t){const r=this._getPoints();t.beginPath(),t.moveTo(r[0].x,r[0].y);for(var i=1;i<r.length;i++)t.lineTo(r[i].x,r[i].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,r=this.attrs.radius||0,i=[];for(var n=0;n<t;n++)i.push({x:r*Math.sin(n*2*Math.PI/t),y:-1*r*Math.cos(n*2*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();var r=t[0].x,i=t[0].y,n=t[0].x,s=t[0].y;return t.forEach(a=>{r=Math.min(r,a.x),i=Math.max(i,a.x),n=Math.min(n,a.y),s=Math.max(s,a.y)}),{x:r,y:n,width:i-r,height:s-n}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}er.prototype.className="RegularPolygon";er.prototype._centroid=!0;er.prototype._attrsAffectingSize=["radius"];St(er);v.addGetterSetter(er,"radius",0,H());v.addGetterSetter(er,"sides",0,H());var ao=Math.PI*2;class rr extends G{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,ao,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),ao,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}rr.prototype.className="Ring";rr.prototype._centroid=!0;rr.prototype._attrsAffectingSize=["innerRadius","outerRadius"];St(rr);v.addGetterSetter(rr,"innerRadius",0,H());v.addGetterSetter(rr,"outerRadius",0,H());class le extends G{constructor(t){super(t);this._updated=!0,this.anim=new qt(()=>{var r=this._updated;return this._updated=!1,r}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){var r=this.animation(),i=this.frameIndex(),n=i*4,s=this.animations()[r],a=this.frameOffsets(),o=s[n+0],l=s[n+1],h=s[n+2],c=s[n+3],f=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,c),t.closePath(),t.fillStrokeShape(this)),f)if(a){var u=a[r],g=i*2;t.drawImage(f,o,l,h,c,u[g+0],u[g+1],h,c)}else t.drawImage(f,o,l,h,c,0,0,h,c)}_hitFunc(t){var r=this.animation(),i=this.frameIndex(),n=i*4,s=this.animations()[r],a=this.frameOffsets(),o=s[n+2],l=s[n+3];if(t.beginPath(),a){var h=a[r],c=i*2;t.rect(h[c+0],h[c+1],o,l)}else t.rect(0,0,o,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),r=this.animation(),i=this.animations(),n=i[r],s=n.length/4;t<s-1?this.frameIndex(t+1):this.frameIndex(0)}}le.prototype.className="Sprite";St(le);v.addGetterSetter(le,"animation");v.addGetterSetter(le,"animations");v.addGetterSetter(le,"frameOffsets");v.addGetterSetter(le,"image");v.addGetterSetter(le,"frameIndex",0,H());v.addGetterSetter(le,"frameRate",17,H());v.backCompat(le,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Fe extends G{_sceneFunc(t){var r=this.innerRadius(),i=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(var s=1;s<n*2;s++){var a=s%2===0?i:r,o=a*Math.sin(s*Math.PI/n),l=-1*a*Math.cos(s*Math.PI/n);t.lineTo(o,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Fe.prototype.className="Star";Fe.prototype._centroid=!0;Fe.prototype._attrsAffectingSize=["innerRadius","outerRadius"];St(Fe);v.addGetterSetter(Fe,"numPoints",5,H());v.addGetterSetter(Fe,"innerRadius",0,H());v.addGetterSetter(Fe,"outerRadius",0,H());function bh(e){return Array.from(e)}var Li="auto",mg="center",Or="justify",_g="Change.konva",bg="2d",oo="-",yh="left",yg="text",Cg="Text",Sg="top",wg="bottom",lo="middle",Ch="normal",xg="px ",Ii=" ",Eg="right",Tg="word",Pg="char",Ag="none",Fn="\u2026",Sh=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],kg=Sh.length;function Mg(e){return e.split(",").map(t=>{t=t.trim();const r=t.indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return r&&!i&&(t=`"${t}"`),t}).join(", ")}var Di;function Gn(){return Di||(Di=x.createCanvasElement().getContext(bg),Di)}function Rg(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Og(e){e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Lg(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class Ct extends G{constructor(t){super(Lg(t));this._partialTextX=0,this._partialTextY=0;for(var r=0;r<kg;r++)this.on(Sh[r]+_g,this._setTextData);this._setTextData()}_sceneFunc(t){var r=this.textArr,i=r.length;if(!!this.text()){var n=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),l=0,h=this.align(),c=this.getWidth(),f=this.letterSpacing(),u=this.fill(),g=this.textDecoration(),d=g.indexOf("underline")!==-1,C=g.indexOf("line-through")!==-1,p,y=0,y=a/2,m=0,b=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",lo),t.setAttr("textAlign",yh),o===lo?l=(this.getHeight()-i*a-n*2)/2:o===wg&&(l=this.getHeight()-i*a-n*2),t.translate(n,l+n),p=0;p<i;p++){var m=0,b=0,w=r[p],A=w.text,T=w.width,E=w.lastInParagraph,M,O,I;if(t.save(),h===Eg?m+=c-T-n*2:h===mg&&(m+=(c-T-n*2)/2),d&&(t.save(),t.beginPath(),t.moveTo(m,y+b+Math.round(s/2)),M=A.split(" ").length-1,O=M===0,I=h===Or&&E&&!O?c-n*2:T,t.lineTo(m+Math.round(I),y+b+Math.round(s/2)),t.lineWidth=s/15,t.strokeStyle=u,t.stroke(),t.restore()),C&&(t.save(),t.beginPath(),t.moveTo(m,y+b),M=A.split(" ").length-1,O=M===0,I=h===Or&&E&&!O?c-n*2:T,t.lineTo(m+Math.round(I),y+b),t.lineWidth=s/15,t.strokeStyle=u,t.stroke(),t.restore()),f!==0||h===Or){M=A.split(" ").length-1;for(var D=bh(A),k=0;k<D.length;k++){var P=D[k];P===" "&&!E&&h===Or&&(m+=(c-n*2-T)/M),this._partialTextX=m,this._partialTextY=y+b,this._partialText=P,t.fillStrokeShape(this),m+=this.measureSize(P).width+f}}else this._partialTextX=m,this._partialTextY=y+b,this._partialText=A,t.fillStrokeShape(this);t.restore(),i>1&&(y+=a)}}}_hitFunc(t){var r=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,r,i),t.closePath(),t.fillStrokeShape(this)}setText(t){var r=x._isString(t)?t:t==null?"":t+"";return this._setAttr(yg,r),this}getWidth(){var t=this.attrs.width===Li||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var t=this.attrs.height===Li||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return x.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var r=Gn(),i=this.fontSize(),n;return r.save(),r.font=this._getContextFont(),n=r.measureText(t),r.restore(),{width:n.width,height:i}}_getContextFont(){return this.fontStyle()+Ii+this.fontVariant()+Ii+(this.fontSize()+xg)+Mg(this.fontFamily())}_addTextLine(t){this.align()===Or&&(t=t.trim());var r=this._getTextWidth(t);return this.textArr.push({text:t,width:r,lastInParagraph:!1})}_getTextWidth(t){var r=this.letterSpacing(),i=t.length;return Gn().measureText(t).width+(i?r*(i-1):0)}_setTextData(){var t=this.text().split(`
`),r=+this.fontSize(),i=0,n=this.lineHeight()*r,s=this.attrs.width,a=this.attrs.height,o=s!==Li&&s!==void 0,l=a!==Li&&a!==void 0,h=this.padding(),c=s-h*2,f=a-h*2,u=0,g=this.wrap(),d=g!==Ag,C=g!==Pg&&d,p=this.ellipsis();this.textArr=[],Gn().font=this._getContextFont();for(var y=p?this._getTextWidth(Fn):0,m=0,b=t.length;m<b;++m){var w=t[m],A=this._getTextWidth(w);if(o&&A>c)for(;w.length>0;){for(var T=0,E=w.length,M="",O=0;T<E;){var I=T+E>>>1,D=w.slice(0,I+1),k=this._getTextWidth(D)+y;k<=c?(T=I+1,M=D,O=k):E=I}if(M){if(C){var P,L=w[M.length],X=L===Ii||L===oo;X&&O<=c?P=M.length:P=Math.max(M.lastIndexOf(Ii),M.lastIndexOf(oo))+1,P>0&&(T=P,M=M.slice(0,T),O=this._getTextWidth(M))}if(M=M.trimRight(),this._addTextLine(M),i=Math.max(i,O),u+=n,!d||l&&u+n>f){var Y=this.textArr[this.textArr.length-1];if(Y&&p){var K=this._getTextWidth(Y.text+Fn)<c;K||(Y.text=Y.text.slice(0,Y.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(Y.text+Fn)}break}if(w=w.slice(T),w=w.trimLeft(),w.length>0&&(A=this._getTextWidth(w),A<=c)){this._addTextLine(w),u+=n,i=Math.max(i,A);break}}else break}else this._addTextLine(w),u+=n,i=Math.max(i,A);if(l&&u+n>f)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=r,this.textWidth=i}getStrokeScaleEnabled(){return!0}}Ct.prototype._fillFunc=Rg;Ct.prototype._strokeFunc=Og;Ct.prototype.className=Cg;Ct.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];St(Ct);v.overWriteSetter(Ct,"width",Zs());v.overWriteSetter(Ct,"height",Zs());v.addGetterSetter(Ct,"fontFamily","Arial");v.addGetterSetter(Ct,"fontSize",12,H());v.addGetterSetter(Ct,"fontStyle",Ch);v.addGetterSetter(Ct,"fontVariant",Ch);v.addGetterSetter(Ct,"padding",0,H());v.addGetterSetter(Ct,"align",yh);v.addGetterSetter(Ct,"verticalAlign",Sg);v.addGetterSetter(Ct,"lineHeight",1,H());v.addGetterSetter(Ct,"wrap",Tg);v.addGetterSetter(Ct,"ellipsis",!1,Zt());v.addGetterSetter(Ct,"letterSpacing",0,H());v.addGetterSetter(Ct,"text","",xr());v.addGetterSetter(Ct,"textDecoration","");var Ig="",wh="normal";function xh(e){e.fillText(this.partialText,0,0)}function Eh(e){e.strokeText(this.partialText,0,0)}class Mt extends G{constructor(t){super(t);this.dummyCanvas=x.createCanvasElement(),this.dataArray=[],this.dataArray=gt.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=gt.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var r=this.textDecoration(),i=this.fill(),n=this.fontSize(),s=this.glyphInfo;r==="underline"&&t.beginPath();for(var a=0;a<s.length;a++){t.save();var o=s[a].p0;t.translate(o.x,o.y),t.rotate(s[a].rotation),this.partialText=s[a].text,t.fillStrokeShape(this),r==="underline"&&(a===0&&t.moveTo(0,n/2+1),t.lineTo(n,n/2+1)),t.restore()}r==="underline"&&(t.strokeStyle=i,t.lineWidth=n/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var r=this.glyphInfo;if(r.length>=1){var i=r[0].p0;t.moveTo(i.x,i.y)}for(var n=0;n<r.length;n++){var s=r[n].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return x.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Ct.prototype.setText.call(this,t)}_getContextFont(){return Ct.prototype._getContextFont.call(this)}_getTextSize(t){var r=this.dummyCanvas,i=r.getContext("2d");i.save(),i.font=this._getContextFont();var n=i.measureText(t);return i.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var t=this,r=this._getTextSize(this.attrs.text),i=this.letterSpacing(),n=this.align(),s=this.kerningFunc();this.textWidth=r.width,this.textHeight=r.height;var a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);this.glyphInfo=[];for(var o=0,l=0;l<t.dataArray.length;l++)t.dataArray[l].pathLength>0&&(o+=t.dataArray[l].pathLength);var h=0;n==="center"&&(h=Math.max(0,o/2-a/2)),n==="right"&&(h=Math.max(0,o-a));for(var c=bh(this.text()),f=this.text().split(" ").length-1,u,g,d,C=-1,p=0,y=function(){p=0;for(var k=t.dataArray,P=C+1;P<k.length;P++){if(k[P].pathLength>0)return C=P,k[P];k[P].command==="M"&&(u={x:k[P].points[0],y:k[P].points[1]})}return{}},m=function(k){var P=t._getTextSize(k).width+i;k===" "&&n==="justify"&&(P+=(o-a)/f);var L=0,X=0;for(g=void 0;Math.abs(P-L)/P>.01&&X<20;){X++;for(var Y=L;d===void 0;)d=y(),d&&Y+d.pathLength<P&&(Y+=d.pathLength,d=void 0);if(d==={}||u===void 0)return;var K=!1;switch(d.command){case"L":gt.getLineLength(u.x,u.y,d.points[0],d.points[1])>P?g=gt.getPointOnLine(P,u.x,u.y,d.points[0],d.points[1],u.x,u.y):d=void 0;break;case"A":var Z=d.points[4],nt=d.points[5],q=d.points[4]+nt;p===0?p=Z+1e-8:P>L?p+=Math.PI/180*nt/Math.abs(nt):p-=Math.PI/360*nt/Math.abs(nt),(nt<0&&p<q||nt>=0&&p>q)&&(p=q,K=!0),g=gt.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],p,d.points[6]);break;case"C":p===0?P>d.pathLength?p=1e-8:p=P/d.pathLength:P>L?p+=(P-L)/d.pathLength/2:p=Math.max(p-(L-P)/d.pathLength/2,0),p>1&&(p=1,K=!0),g=gt.getPointOnCubicBezier(p,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case"Q":p===0?p=P/d.pathLength:P>L?p+=(P-L)/d.pathLength:p-=(L-P)/d.pathLength,p>1&&(p=1,K=!0),g=gt.getPointOnQuadraticBezier(p,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3]);break}g!==void 0&&(L=gt.getLineLength(u.x,u.y,g.x,g.y)),K&&(K=!1,d=void 0)}},b="C",w=t._getTextSize(b).width+i,A=h/w-1,T=0;T<A&&(m(b),!(u===void 0||g===void 0));T++)u=g;for(var E=0;E<c.length&&(m(c[E]),!(u===void 0||g===void 0));E++){var M=gt.getLineLength(u.x,u.y,g.x,g.y),O=0;if(s)try{O=s(c[E-1],c[E])*this.fontSize()}catch{O=0}u.x+=O,g.x+=O,this.textWidth+=O;var I=gt.getPointOnLine(O+M/2,u.x,u.y,g.x,g.y),D=Math.atan2(g.y-u.y,g.x-u.x);this.glyphInfo.push({transposeX:I.x,transposeY:I.y,text:c[E],rotation:D,p0:u,p1:g}),u=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(c){t.push(c.p0.x),t.push(c.p0.y),t.push(c.p1.x),t.push(c.p1.y)});for(var r=t[0]||0,i=t[0]||0,n=t[1]||0,s=t[1]||0,a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],r=Math.min(r,a),i=Math.max(i,a),n=Math.min(n,o),s=Math.max(s,o);var h=this.fontSize();return{x:r-h/2,y:n-h/2,width:i-r+h,height:s-n+h}}}Mt.prototype._fillFunc=xh;Mt.prototype._strokeFunc=Eh;Mt.prototype._fillFuncHit=xh;Mt.prototype._strokeFuncHit=Eh;Mt.prototype.className="TextPath";Mt.prototype._attrsAffectingSize=["text","fontSize","data"];St(Mt);v.addGetterSetter(Mt,"data");v.addGetterSetter(Mt,"fontFamily","Arial");v.addGetterSetter(Mt,"fontSize",12,H());v.addGetterSetter(Mt,"fontStyle",wh);v.addGetterSetter(Mt,"align","left");v.addGetterSetter(Mt,"letterSpacing",0,H());v.addGetterSetter(Mt,"textBaseline","middle");v.addGetterSetter(Mt,"fontVariant",wh);v.addGetterSetter(Mt,"text",Ig);v.addGetterSetter(Mt,"textDecoration",null);v.addGetterSetter(Mt,"kerningFunc",null);var Th="tr-konva",Dg=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(e=>e+`.${Th}`).join(" "),ho="nodesRect",Ng=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Fg={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Gg="ontouchstart"in $._global;function Bg(e,t){if(e==="rotater")return"crosshair";t+=x.degToRad(Fg[e]||0);var r=(x.radToDeg(t)%360+360)%360;return x._inRange(r,315+22.5,360)||x._inRange(r,0,22.5)?"ns-resize":x._inRange(r,45-22.5,45+22.5)?"nesw-resize":x._inRange(r,90-22.5,90+22.5)?"ew-resize":x._inRange(r,135-22.5,135+22.5)?"nwse-resize":x._inRange(r,180-22.5,180+22.5)?"ns-resize":x._inRange(r,225-22.5,225+22.5)?"nesw-resize":x._inRange(r,270-22.5,270+22.5)?"ew-resize":x._inRange(r,315-22.5,315+22.5)?"nwse-resize":(x.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var Zi=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],co=1e8;function Hg(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function Ph(e,t,r){const i=r.x+(e.x-r.x)*Math.cos(t)-(e.y-r.y)*Math.sin(t),n=r.y+(e.x-r.x)*Math.sin(t)+(e.y-r.y)*Math.cos(t);return Object.assign(Object.assign({},e),{rotation:e.rotation+t,x:i,y:n})}function Ug(e,t){const r=Hg(e);return Ph(e,t,r)}function Wg(e,t,r){let i=t;for(let n=0;n<e.length;n++){const s=$.getAngle(e[n]),a=Math.abs(s-t)%(Math.PI*2);Math.min(a,Math.PI*2-a)<r&&(i=s)}return i}class dt extends wr{constructor(t){super(t);this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Dg,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return x.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Th+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const n=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},s=i._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");i.on(s,n),i.on(Ng.map(a=>a+`.${this._getEventNamespace()}`).join(" "),n),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,n),this._proxyDrag(i)}),this._resetTransformCache();var r=!!this.findOne(".top-left");return r&&this.update(),this}_proxyDrag(t){let r;t.on(`dragstart.${this._getEventNamespace()}`,i=>{r=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(i,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!r)return;const n=t.getAbsolutePosition(),s=n.x-r.x,a=n.y-r.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const l=o.getAbsolutePosition();o.setAbsolutePosition({x:l.x+s,y:l.y+a}),o.startDrag(i)}),r=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(ho),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(ho,this.__getNodeRect)}__getNodeShape(t,r=this.rotation(),i){var n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=t.getAbsoluteScale(i),a=t.getAbsolutePosition(i),o=n.x*s.x-t.offsetX()*s.x,l=n.y*s.y-t.offsetY()*s.y;const h=($.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:a.x+o*Math.cos(h)+l*Math.sin(-h),y:a.y+l*Math.cos(h)+o*Math.sin(h),width:n.width*s.x,height:n.height*s.y,rotation:h};return Ph(c,-$.getAngle(r),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-co,y:-co,width:0,height:0,rotation:0};const r=[];this.nodes().map(h=>{const c=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var f=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],u=h.getAbsoluteTransform();f.forEach(function(g){var d=u.point(g);r.push(d)})});const i=new Wt;i.rotate(-$.getAngle(this.rotation()));var n,s,a,o;r.forEach(function(h){var c=i.point(h);n===void 0&&(n=a=c.x,s=o=c.y),n=Math.min(n,c.x),s=Math.min(s,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),i.invert();const l=i.point({x:n,y:s});return{x:l.x,y:l.y,width:a-n,height:o-s,rotation:$.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Zi.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")}_createAnchor(t){var r=new pi({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Gg?10:"auto"}),i=this;r.on("mousedown touchstart",function(n){i._handleMouseDown(n)}),r.on("dragstart",n=>{r.stopDrag(),n.cancelBubble=!0}),r.on("dragend",n=>{n.cancelBubble=!0}),r.on("mouseenter",()=>{var n=$.getAngle(this.rotation()),s=Bg(t,n);r.getStage().content&&(r.getStage().content.style.cursor=s),this._cursorChange=!0}),r.on("mouseout",()=>{r.getStage().content&&(r.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(r)}_createBack(){var t=new G({name:"back",width:0,height:0,draggable:!0,sceneFunc(r){var i=this.getParent(),n=i.padding();r.beginPath(),r.rect(-n,-n,this.width()+n*2,this.height()+n*2),r.moveTo(this.width()/2,-n),i.rotateEnabled()&&r.lineTo(this.width()/2,-i.rotateAnchorOffset()*x._sign(this.height())-n),r.fillStrokeShape(this)},hitFunc:(r,i)=>{if(!!this.shouldOverdrawWholeArea()){var n=this.padding();r.beginPath(),r.rect(-n,-n,i.width()+n*2,i.height()+n*2),r.fillStrokeShape(i)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",r=>{r.cancelBubble=!0}),t.on("dragmove",r=>{r.cancelBubble=!0}),t.on("dragend",r=>{r.cancelBubble=!0}),this.on("dragmove",r=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var r=this._getNodeRect(),i=r.width,n=r.height,s=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));this.sin=Math.abs(n/s),this.cos=Math.abs(i/s),typeof window!="undefined"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var a=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}_handleMouseMove(t){var r,i,n,s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(t);const o=a.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const h=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(h,l,t)),s.setAbsolutePosition(l);const c=s.getAbsolutePosition();if(!(h.x===c.x&&h.y===c.y)){if(this._movingAnchorName==="rotater"){var f=this._getNodeRect();r=s.x()-f.width/2,i=-s.y()+f.height/2;let k=Math.atan2(-i,r)+Math.PI/2;f.height<0&&(k-=Math.PI);var u=$.getAngle(this.rotation());const P=u+k,L=$.getAngle(this.rotationSnapTolerance()),Y=Wg(this.rotationSnaps(),P,L)-f.rotation,K=Ug(f,Y);this._fitNodesInto(K,t);return}var g=this.keepRatio()||t.shiftKey,m=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(g){var d=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};n=Math.sqrt(Math.pow(d.x-s.x(),2)+Math.pow(d.y-s.y(),2));var C=this.findOne(".top-left").x()>d.x?-1:1,p=this.findOne(".top-left").y()>d.y?-1:1;r=n*this.cos*C,i=n*this.sin*p,this.findOne(".top-left").x(d.x-r),this.findOne(".top-left").y(d.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(g){var d=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};n=Math.sqrt(Math.pow(s.x()-d.x,2)+Math.pow(d.y-s.y(),2));var C=this.findOne(".top-right").x()<d.x?-1:1,p=this.findOne(".top-right").y()>d.y?-1:1;r=n*this.cos*C,i=n*this.sin*p,this.findOne(".top-right").x(d.x+r),this.findOne(".top-right").y(d.y-i)}var y=s.position();this.findOne(".top-left").y(y.y),this.findOne(".bottom-right").x(y.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(g){var d=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};n=Math.sqrt(Math.pow(d.x-s.x(),2)+Math.pow(s.y()-d.y,2));var C=d.x<s.x()?-1:1,p=s.y()<d.y?-1:1;r=n*this.cos*C,i=n*this.sin*p,s.x(d.x-r),s.y(d.y+i)}y=s.position(),this.findOne(".top-left").x(y.x),this.findOne(".bottom-right").y(y.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(g){var d=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};n=Math.sqrt(Math.pow(s.x()-d.x,2)+Math.pow(s.y()-d.y,2));var C=this.findOne(".bottom-right").x()<d.x?-1:1,p=this.findOne(".bottom-right").y()<d.y?-1:1;r=n*this.cos*C,i=n*this.sin*p,this.findOne(".bottom-right").x(d.x+r),this.findOne(".bottom-right").y(d.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var m=this.centeredScaling()||t.altKey;if(m){var b=this.findOne(".top-left"),w=this.findOne(".bottom-right"),A=b.x(),T=b.y(),E=this.getWidth()-w.x(),M=this.getHeight()-w.y();w.move({x:-A,y:-T}),b.move({x:E,y:M})}var O=this.findOne(".top-left").getAbsolutePosition();r=O.x,i=O.y;var I=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),D=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:r,y:i,width:I,height:D,rotation:$.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window!="undefined"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var r=this.getNode();this._fire("transformend",{evt:t,target:r}),r&&this._nodes.forEach(i=>{i._fire("transformend",{evt:t,target:i})}),this._movingAnchorName=null}}_fitNodesInto(t,r){var i=this._getNodeRect();const n=1;if(x._inRange(t.width,-this.padding()*2-n,n)){this.update();return}if(x._inRange(t.height,-this.padding()*2-n,n)){this.update();return}const s=this.flipEnabled();var a=new Wt;if(a.rotate($.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const f=a.point({x:-this.padding()*2,y:0});if(t.x+=f.x,t.y+=f.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,!s){this.update();return}}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const f=a.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.width+=this.padding()*2,!s){this.update();return}}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const f=a.point({x:0,y:-this.padding()*2});if(t.x+=f.x,t.y+=f.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2,!s){this.update();return}}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const f=a.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2,!s){this.update();return}}if(this.boundBoxFunc()){const f=this.boundBoxFunc()(i,t);f?t=f:x.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,l=new Wt;l.translate(i.x,i.y),l.rotate(i.rotation),l.scale(i.width/o,i.height/o);const h=new Wt;h.translate(t.x,t.y),h.rotate(t.rotation),h.scale(t.width/o,t.height/o);const c=h.multiply(l.invert());this._nodes.forEach(f=>{var u;const g=f.getParent().getAbsoluteTransform(),d=f.getTransform().copy();d.translate(f.offsetX(),f.offsetY());const C=new Wt;C.multiply(g.copy().invert()).multiply(c).multiply(g).multiply(d);const p=C.decompose();f.setAttrs(p),this._fire("transform",{evt:r,target:f}),f._fire("transform",{evt:r,target:f}),(u=f.getLayer())===null||u===void 0||u.batchDraw()}),this.rotation(x._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,r){this.findOne(t).setAttrs(r)}update(){var t,r=this._getNodeRect();this.rotation(x._getRotation(r.rotation));var i=r.width,n=r.height,s=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),l=this.anchorSize();this.find("._anchor").forEach(h=>{h.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:l/2+o,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:n/2,offsetX:l/2+o,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:n/2,offsetX:l/2-o,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:n,offsetX:l/2+o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:n,offsetY:l/2-o,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:n,offsetX:l/2-o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*x._sign(n)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:n,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),wr.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return U.prototype.toObject.call(this)}}function zg(e){return e instanceof Array||x.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){Zi.indexOf(t)===-1&&x.warn("Unknown anchor name: "+t+". Available names are: "+Zi.join(", "))}),e||[]}dt.prototype.className="Transformer";St(dt);v.addGetterSetter(dt,"enabledAnchors",Zi,zg);v.addGetterSetter(dt,"flipEnabled",!0,Zt());v.addGetterSetter(dt,"resizeEnabled",!0);v.addGetterSetter(dt,"anchorSize",10,H());v.addGetterSetter(dt,"rotateEnabled",!0);v.addGetterSetter(dt,"rotationSnaps",[]);v.addGetterSetter(dt,"rotateAnchorOffset",50,H());v.addGetterSetter(dt,"rotationSnapTolerance",5,H());v.addGetterSetter(dt,"borderEnabled",!0);v.addGetterSetter(dt,"anchorStroke","rgb(0, 161, 255)");v.addGetterSetter(dt,"anchorStrokeWidth",1,H());v.addGetterSetter(dt,"anchorFill","white");v.addGetterSetter(dt,"anchorCornerRadius",0,H());v.addGetterSetter(dt,"borderStroke","rgb(0, 161, 255)");v.addGetterSetter(dt,"borderStrokeWidth",1,H());v.addGetterSetter(dt,"borderDash");v.addGetterSetter(dt,"keepRatio",!0);v.addGetterSetter(dt,"centeredScaling",!1);v.addGetterSetter(dt,"ignoreStroke",!1);v.addGetterSetter(dt,"padding",0,H());v.addGetterSetter(dt,"node");v.addGetterSetter(dt,"nodes");v.addGetterSetter(dt,"boundBoxFunc");v.addGetterSetter(dt,"anchorDragBoundFunc");v.addGetterSetter(dt,"shouldOverdrawWholeArea",!1);v.addGetterSetter(dt,"useSingleNodeRotation",!0);v.backCompat(dt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class me extends G{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,$.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}me.prototype.className="Wedge";me.prototype._centroid=!0;me.prototype._attrsAffectingSize=["radius"];St(me);v.addGetterSetter(me,"radius",0,H());v.addGetterSetter(me,"angle",0,H());v.addGetterSetter(me,"clockwise",!1);v.backCompat(me,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function fo(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var jg=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Yg=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Vg(e,t){var r=e.data,i=e.width,n=e.height,s,a,o,l,h,c,f,u,g,d,C,p,y,m,b,w,A,T,E,M,O,I,D,k,P=t+t+1,L=i-1,X=n-1,Y=t+1,K=Y*(Y+1)/2,Z=new fo,nt=null,q=Z,st=null,ft=null,ot=jg[t],Rt=Yg[t];for(o=1;o<P;o++)q=q.next=new fo,o===Y&&(nt=q);for(q.next=Z,f=c=0,a=0;a<n;a++){for(w=A=T=E=u=g=d=C=0,p=Y*(M=r[c]),y=Y*(O=r[c+1]),m=Y*(I=r[c+2]),b=Y*(D=r[c+3]),u+=K*M,g+=K*O,d+=K*I,C+=K*D,q=Z,o=0;o<Y;o++)q.r=M,q.g=O,q.b=I,q.a=D,q=q.next;for(o=1;o<Y;o++)l=c+((L<o?L:o)<<2),u+=(q.r=M=r[l])*(k=Y-o),g+=(q.g=O=r[l+1])*k,d+=(q.b=I=r[l+2])*k,C+=(q.a=D=r[l+3])*k,w+=M,A+=O,T+=I,E+=D,q=q.next;for(st=Z,ft=nt,s=0;s<i;s++)r[c+3]=D=C*ot>>Rt,D!==0?(D=255/D,r[c]=(u*ot>>Rt)*D,r[c+1]=(g*ot>>Rt)*D,r[c+2]=(d*ot>>Rt)*D):r[c]=r[c+1]=r[c+2]=0,u-=p,g-=y,d-=m,C-=b,p-=st.r,y-=st.g,m-=st.b,b-=st.a,l=f+((l=s+t+1)<L?l:L)<<2,w+=st.r=r[l],A+=st.g=r[l+1],T+=st.b=r[l+2],E+=st.a=r[l+3],u+=w,g+=A,d+=T,C+=E,st=st.next,p+=M=ft.r,y+=O=ft.g,m+=I=ft.b,b+=D=ft.a,w-=M,A-=O,T-=I,E-=D,ft=ft.next,c+=4;f+=i}for(s=0;s<i;s++){for(A=T=E=w=g=d=C=u=0,c=s<<2,p=Y*(M=r[c]),y=Y*(O=r[c+1]),m=Y*(I=r[c+2]),b=Y*(D=r[c+3]),u+=K*M,g+=K*O,d+=K*I,C+=K*D,q=Z,o=0;o<Y;o++)q.r=M,q.g=O,q.b=I,q.a=D,q=q.next;for(h=i,o=1;o<=t;o++)c=h+s<<2,u+=(q.r=M=r[c])*(k=Y-o),g+=(q.g=O=r[c+1])*k,d+=(q.b=I=r[c+2])*k,C+=(q.a=D=r[c+3])*k,w+=M,A+=O,T+=I,E+=D,q=q.next,o<X&&(h+=i);for(c=s,st=Z,ft=nt,a=0;a<n;a++)l=c<<2,r[l+3]=D=C*ot>>Rt,D>0?(D=255/D,r[l]=(u*ot>>Rt)*D,r[l+1]=(g*ot>>Rt)*D,r[l+2]=(d*ot>>Rt)*D):r[l]=r[l+1]=r[l+2]=0,u-=p,g-=y,d-=m,C-=b,p-=st.r,y-=st.g,m-=st.b,b-=st.a,l=s+((l=a+Y)<X?l:X)*i<<2,u+=w+=st.r=r[l],g+=A+=st.g=r[l+1],d+=T+=st.b=r[l+2],C+=E+=st.a=r[l+3],st=st.next,p+=M=ft.r,y+=O=ft.g,m+=I=ft.b,b+=D=ft.a,w-=M,A-=O,T-=I,E-=D,ft=ft.next,c+=i}}const Kg=function(t){var r=Math.round(this.blurRadius());r>0&&Vg(t,r)};v.addGetterSetter(U,"blurRadius",0,H(),v.afterSetFilter);const Xg=function(e){var t=this.brightness()*255,r=e.data,i=r.length,n;for(n=0;n<i;n+=4)r[n]+=t,r[n+1]+=t,r[n+2]+=t};v.addGetterSetter(U,"brightness",0,H(),v.afterSetFilter);const $g=function(e){var t=Math.pow((this.contrast()+100)/100,2),r=e.data,i=r.length,n=150,s=150,a=150,o;for(o=0;o<i;o+=4)n=r[o],s=r[o+1],a=r[o+2],n/=255,n-=.5,n*=t,n+=.5,n*=255,s/=255,s-=.5,s*=t,s+=.5,s*=255,a/=255,a-=.5,a*=t,a+=.5,a*=255,n=n<0?0:n>255?255:n,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,r[o]=n,r[o+1]=s,r[o+2]=a};v.addGetterSetter(U,"contrast",0,H(),v.afterSetFilter);const qg=function(e){var t=this.embossStrength()*10,r=this.embossWhiteLevel()*255,i=this.embossDirection(),n=this.embossBlend(),s=0,a=0,o=e.data,l=e.width,h=e.height,c=l*4,f=h;switch(i){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:x.error("Unknown emboss direction: "+i)}do{var u=(f-1)*c,g=s;f+g<1&&(g=0),f+g>h&&(g=0);var d=(f-1+g)*l*4,C=l;do{var p=u+(C-1)*4,y=a;C+y<1&&(y=0),C+y>l&&(y=0);var m=d+(C-1+y)*4,b=o[p]-o[m],w=o[p+1]-o[m+1],A=o[p+2]-o[m+2],T=b,E=T>0?T:-T,M=w>0?w:-w,O=A>0?A:-A;if(M>E&&(T=w),O>E&&(T=A),T*=t,n){var I=o[p]+T,D=o[p+1]+T,k=o[p+2]+T;o[p]=I>255?255:I<0?0:I,o[p+1]=D>255?255:D<0?0:D,o[p+2]=k>255?255:k<0?0:k}else{var P=r-T;P<0?P=0:P>255&&(P=255),o[p]=o[p+1]=o[p+2]=P}}while(--C)}while(--f)};v.addGetterSetter(U,"embossStrength",.5,H(),v.afterSetFilter);v.addGetterSetter(U,"embossWhiteLevel",.5,H(),v.afterSetFilter);v.addGetterSetter(U,"embossDirection","top-left",null,v.afterSetFilter);v.addGetterSetter(U,"embossBlend",!1,null,v.afterSetFilter);function Bn(e,t,r,i,n){var s=r-t,a=n-i,o;return s===0?i+a/2:a===0?i:(o=(e-t)/s,o=a*o+i,o)}const Jg=function(e){var t=e.data,r=t.length,i=t[0],n=i,s,a=t[1],o=a,l,h=t[2],c=h,f,u,g=this.enhance();if(g!==0){for(u=0;u<r;u+=4)s=t[u+0],s<i?i=s:s>n&&(n=s),l=t[u+1],l<a?a=l:l>o&&(o=l),f=t[u+2],f<h?h=f:f>c&&(c=f);n===i&&(n=255,i=0),o===a&&(o=255,a=0),c===h&&(c=255,h=0);var d,C,p,y,m,b,w,A,T;for(g>0?(C=n+g*(255-n),p=i-g*(i-0),m=o+g*(255-o),b=a-g*(a-0),A=c+g*(255-c),T=h-g*(h-0)):(d=(n+i)*.5,C=n+g*(n-d),p=i+g*(i-d),y=(o+a)*.5,m=o+g*(o-y),b=a+g*(a-y),w=(c+h)*.5,A=c+g*(c-w),T=h+g*(h-w)),u=0;u<r;u+=4)t[u+0]=Bn(t[u+0],i,n,p,C),t[u+1]=Bn(t[u+1],a,o,b,m),t[u+2]=Bn(t[u+2],h,c,T,A)}};v.addGetterSetter(U,"enhance",0,H(),v.afterSetFilter);const Qg=function(e){var t=e.data,r=t.length,i,n;for(i=0;i<r;i+=4)n=.34*t[i]+.5*t[i+1]+.16*t[i+2],t[i]=n,t[i+1]=n,t[i+2]=n};v.addGetterSetter(U,"hue",0,H(),v.afterSetFilter);v.addGetterSetter(U,"saturation",0,H(),v.afterSetFilter);v.addGetterSetter(U,"luminance",0,H(),v.afterSetFilter);const Zg=function(e){var t=e.data,r=t.length,i=1,n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=this.luminance()*127,o,l=i*n*Math.cos(s*Math.PI/180),h=i*n*Math.sin(s*Math.PI/180),c=.299*i+.701*l+.167*h,f=.587*i-.587*l+.33*h,u=.114*i-.114*l-.497*h,g=.299*i-.299*l-.328*h,d=.587*i+.413*l+.035*h,C=.114*i-.114*l+.293*h,p=.299*i-.3*l+1.25*h,y=.587*i-.586*l-1.05*h,m=.114*i+.886*l-.2*h,b,w,A,T;for(o=0;o<r;o+=4)b=t[o+0],w=t[o+1],A=t[o+2],T=t[o+3],t[o+0]=c*b+f*w+u*A+a,t[o+1]=g*b+d*w+C*A+a,t[o+2]=p*b+y*w+m*A+a,t[o+3]=T},tp=function(e){var t=e.data,r=t.length,i=Math.pow(2,this.value()),n=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a,o=i*n*Math.cos(s*Math.PI/180),l=i*n*Math.sin(s*Math.PI/180),h=.299*i+.701*o+.167*l,c=.587*i-.587*o+.33*l,f=.114*i-.114*o-.497*l,u=.299*i-.299*o-.328*l,g=.587*i+.413*o+.035*l,d=.114*i-.114*o+.293*l,C=.299*i-.3*o+1.25*l,p=.587*i-.586*o-1.05*l,y=.114*i+.886*o-.2*l,m,b,w,A;for(a=0;a<r;a+=4)m=t[a+0],b=t[a+1],w=t[a+2],A=t[a+3],t[a+0]=h*m+c*b+f*w,t[a+1]=u*m+g*b+d*w,t[a+2]=C*m+p*b+y*w,t[a+3]=A};v.addGetterSetter(U,"hue",0,H(),v.afterSetFilter);v.addGetterSetter(U,"saturation",0,H(),v.afterSetFilter);v.addGetterSetter(U,"value",0,H(),v.afterSetFilter);const ep=function(e){var t=e.data,r=t.length,i;for(i=0;i<r;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]};var rp=function(e,t,r){var i=e.data,n=t.data,s=e.width,a=e.height,o=r.polarCenterX||s/2,l=r.polarCenterY||a/2,h,c,f,u=0,g=0,d=0,C=0,p,y=Math.sqrt(o*o+l*l);c=s-o,f=a-l,p=Math.sqrt(c*c+f*f),y=p>y?p:y;var m=a,b=s,w,A,T=360/b*Math.PI/180,E,M;for(A=0;A<b;A+=1)for(E=Math.sin(A*T),M=Math.cos(A*T),w=0;w<m;w+=1)c=Math.floor(o+y*w/m*M),f=Math.floor(l+y*w/m*E),h=(f*s+c)*4,u=i[h+0],g=i[h+1],d=i[h+2],C=i[h+3],h=(A+w*s)*4,n[h+0]=u,n[h+1]=g,n[h+2]=d,n[h+3]=C},ip=function(e,t,r){var i=e.data,n=t.data,s=e.width,a=e.height,o=r.polarCenterX||s/2,l=r.polarCenterY||a/2,h,c,f,u,g,d=0,C=0,p=0,y=0,m,b=Math.sqrt(o*o+l*l);c=s-o,f=a-l,m=Math.sqrt(c*c+f*f),b=m>b?m:b;var w=a,A=s,T,E,M=r.polarRotation||0,O,I;for(c=0;c<s;c+=1)for(f=0;f<a;f+=1)u=c-o,g=f-l,T=Math.sqrt(u*u+g*g)*w/b,E=(Math.atan2(g,u)*180/Math.PI+360+M)%360,E=E*A/360,O=Math.floor(E),I=Math.floor(T),h=(I*s+O)*4,d=i[h+0],C=i[h+1],p=i[h+2],y=i[h+3],h=(f*s+c)*4,n[h+0]=d,n[h+1]=C,n[h+2]=p,n[h+3]=y};const np=function(e){var t=e.width,r=e.height,i,n,s,a,o,l,h,c,f,u,g=Math.round(this.kaleidoscopePower()),d=Math.round(this.kaleidoscopeAngle()),C=Math.floor(t*(d%360)/360);if(!(g<1)){var p=x.createCanvasElement();p.width=t,p.height=r;var y=p.getContext("2d").getImageData(0,0,t,r);rp(e,y,{polarCenterX:t/2,polarCenterY:r/2});for(var m=t/Math.pow(2,g);m<=8;)m=m*2,g-=1;m=Math.ceil(m);var b=m,w=0,A=b,T=1;for(C+m>t&&(w=b,A=0,T=-1),n=0;n<r;n+=1)for(i=w;i!==A;i+=T)s=Math.round(i+C)%t,f=(t*n+s)*4,o=y.data[f+0],l=y.data[f+1],h=y.data[f+2],c=y.data[f+3],u=(t*n+i)*4,y.data[u+0]=o,y.data[u+1]=l,y.data[u+2]=h,y.data[u+3]=c;for(n=0;n<r;n+=1)for(b=Math.floor(m),a=0;a<g;a+=1){for(i=0;i<b+1;i+=1)f=(t*n+i)*4,o=y.data[f+0],l=y.data[f+1],h=y.data[f+2],c=y.data[f+3],u=(t*n+b*2-i-1)*4,y.data[u+0]=o,y.data[u+1]=l,y.data[u+2]=h,y.data[u+3]=c;b*=2}ip(y,e,{polarRotation:0})}};v.addGetterSetter(U,"kaleidoscopePower",2,H(),v.afterSetFilter);v.addGetterSetter(U,"kaleidoscopeAngle",0,H(),v.afterSetFilter);function Ni(e,t,r){var i=(r*e.width+t)*4,n=[];return n.push(e.data[i++],e.data[i++],e.data[i++],e.data[i++]),n}function Lr(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function sp(e){for(var t=[0,0,0],r=0;r<e.length;r++)t[0]+=e[r][0],t[1]+=e[r][1],t[2]+=e[r][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function ap(e,t){var r=Ni(e,0,0),i=Ni(e,e.width-1,0),n=Ni(e,0,e.height-1),s=Ni(e,e.width-1,e.height-1),a=t||10;if(Lr(r,i)<a&&Lr(i,s)<a&&Lr(s,n)<a&&Lr(n,r)<a){for(var o=sp([i,r,s,n]),l=[],h=0;h<e.width*e.height;h++){var c=Lr(o,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);l[h]=c<a?0:255}return l}}function op(e,t){for(var r=0;r<e.width*e.height;r++)e.data[4*r+3]=t[r]}function lp(e,t,r){for(var i=[1,1,1,1,0,1,1,1,1],n=Math.round(Math.sqrt(i.length)),s=Math.floor(n/2),a=[],o=0;o<r;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,f=0;f<n;f++)for(var u=0;u<n;u++){var g=o+f-s,d=l+u-s;if(g>=0&&g<r&&d>=0&&d<t){var C=g*t+d,p=i[f*n+u];c+=e[C]*p}}a[h]=c===255*8?255:0}return a}function hp(e,t,r){for(var i=[1,1,1,1,1,1,1,1,1],n=Math.round(Math.sqrt(i.length)),s=Math.floor(n/2),a=[],o=0;o<r;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,f=0;f<n;f++)for(var u=0;u<n;u++){var g=o+f-s,d=l+u-s;if(g>=0&&g<r&&d>=0&&d<t){var C=g*t+d,p=i[f*n+u];c+=e[C]*p}}a[h]=c>=255*4?255:0}return a}function cp(e,t,r){for(var i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],n=Math.round(Math.sqrt(i.length)),s=Math.floor(n/2),a=[],o=0;o<r;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,f=0;f<n;f++)for(var u=0;u<n;u++){var g=o+f-s,d=l+u-s;if(g>=0&&g<r&&d>=0&&d<t){var C=g*t+d,p=i[f*n+u];c+=e[C]*p}}a[h]=c}return a}const fp=function(e){var t=this.threshold(),r=ap(e,t);return r&&(r=lp(r,e.width,e.height),r=hp(r,e.width,e.height),r=cp(r,e.width,e.height),op(e,r)),e};v.addGetterSetter(U,"threshold",0,H(),v.afterSetFilter);const up=function(e){var t=this.noise()*255,r=e.data,i=r.length,n=t/2,s;for(s=0;s<i;s+=4)r[s+0]+=n-2*n*Math.random(),r[s+1]+=n-2*n*Math.random(),r[s+2]+=n-2*n*Math.random()};v.addGetterSetter(U,"noise",.2,H(),v.afterSetFilter);const dp=function(e){var t=Math.ceil(this.pixelSize()),r=e.width,i=e.height,n,s,a,o,l,h,c,f=Math.ceil(r/t),u=Math.ceil(i/t),g,d,C,p,y,m,b,w=e.data;if(t<=0){x.error("pixelSize value can not be <= 0");return}for(y=0;y<f;y+=1)for(m=0;m<u;m+=1){for(o=0,l=0,h=0,c=0,g=y*t,d=g+t,C=m*t,p=C+t,b=0,n=g;n<d;n+=1)if(!(n>=r))for(s=C;s<p;s+=1)s>=i||(a=(r*s+n)*4,o+=w[a+0],l+=w[a+1],h+=w[a+2],c+=w[a+3],b+=1);for(o=o/b,l=l/b,h=h/b,c=c/b,n=g;n<d;n+=1)if(!(n>=r))for(s=C;s<p;s+=1)s>=i||(a=(r*s+n)*4,w[a+0]=o,w[a+1]=l,w[a+2]=h,w[a+3]=c)}};v.addGetterSetter(U,"pixelSize",8,H(),v.afterSetFilter);const gp=function(e){var t=Math.round(this.levels()*254)+1,r=e.data,i=r.length,n=255/t,s;for(s=0;s<i;s+=1)r[s]=Math.floor(r[s]/n)*n};v.addGetterSetter(U,"levels",.5,H(),v.afterSetFilter);const pp=function(e){var t=e.data,r=t.length,i=this.red(),n=this.green(),s=this.blue(),a,o;for(a=0;a<r;a+=4)o=(.34*t[a]+.5*t[a+1]+.16*t[a+2])/255,t[a]=o*i,t[a+1]=o*n,t[a+2]=o*s,t[a+3]=t[a+3]};v.addGetterSetter(U,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(U,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(U,"blue",0,ql,v.afterSetFilter);const vp=function(e){var t=e.data,r=t.length,i=this.red(),n=this.green(),s=this.blue(),a=this.alpha(),o,l;for(o=0;o<r;o+=4)l=1-a,t[o]=i*a+t[o]*l,t[o+1]=n*a+t[o+1]*l,t[o+2]=s*a+t[o+2]*l};v.addGetterSetter(U,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(U,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(U,"blue",0,ql,v.afterSetFilter);v.addGetterSetter(U,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});const mp=function(e){var t=e.data,r=t.length,i,n,s,a;for(i=0;i<r;i+=4)n=t[i+0],s=t[i+1],a=t[i+2],t[i+0]=Math.min(255,n*.393+s*.769+a*.189),t[i+1]=Math.min(255,n*.349+s*.686+a*.168),t[i+2]=Math.min(255,n*.272+s*.534+a*.131)},_p=function(e){var t=e.data,r=e.width,i=e.height,n=r*4,s=i;do{var a=(s-1)*n,o=r;do{var l=a+(o-1)*4,h=t[l],c=t[l+1],f=t[l+2];h>127&&(h=255-h),c>127&&(c=255-c),f>127&&(f=255-f),t[l]=h,t[l+1]=c,t[l+2]=f}while(--o)}while(--s)},bp=function(e){var t=this.threshold()*255,r=e.data,i=r.length,n;for(n=0;n<i;n+=1)r[n]=r[n]<t?0:255};v.addGetterSetter(U,"threshold",.5,H(),v.afterSetFilter);const yp=no.Util._assign(no,{Arc:pe,Arrow:Ze,Circle:Er,Ellipse:Ne,Image:te,Label:ia,Tag:tr,Line:ve,Path:gt,Rect:pi,RegularPolygon:er,Ring:rr,Sprite:le,Star:Fe,Text:Ct,TextPath:Mt,Transformer:dt,Wedge:me,Filters:{Blur:Kg,Brighten:Xg,Contrast:$g,Emboss:qg,Enhance:Jg,Grayscale:Qg,HSL:Zg,HSV:tp,Invert:ep,Kaleidoscope:np,Mask:fp,Noise:up,Pixelate:dp,Posterize:gp,RGB:pp,RGBA:vp,Sepia:mp,Solarize:_p,Threshold:bp}});var Cp=Object.freeze(Object.defineProperty({__proto__:null,default:yp},Symbol.toStringTag,{value:"Module"})),Sp=Xl(Cp);/*!
 * vue-konva v3.0.0 - https://github.com/konvajs/vue-konva#readme
 * MIT Licensed
 */(function(e,t){(function(i,n){e.exports=n(ld,Sp)})(ad,function(r,i){return function(n){var s={};function a(o){if(s[o])return s[o].exports;var l=s[o]={i:o,l:!1,exports:{}};return n[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=n,a.c=s,a.d=function(o,l,h){a.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:h})},a.r=function(o){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,l){if(l&1&&(o=a(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var h=Object.create(null);if(a.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var c in o)a.d(h,c,function(f){return o[f]}.bind(null,c));return h},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s=2)}([function(n,s){n.exports=r},function(n,s){n.exports=i},function(n,s,a){n.exports=a(3)},function(n,s,a){a.r(s);var o=a(0),l=a(1),h=a.n(l);function c(P){if(!h.a.autoDrawEnabled){var L=P.getLayer()||P.getStage();L&&L.batchDraw()}}var f={key:!0,style:!0,elm:!0,isRootInsert:!0},u=".vue-konva-event";function g(P,L,X,Y){L===void 0&&(L={}),X===void 0&&(X={});var K=P.__konvaNode,Z={},nt=!1;for(var q in X)if(!f[q]){var st=q.slice(0,2)==="on",ft=X[q]!==L[q];if(st&&ft){var ot=q.substr(2).toLowerCase();ot.substr(0,7)==="content"&&(ot="content"+ot.substr(7,1).toUpperCase()+ot.substr(8)),K.off(ot+u,X[q])}var Rt=!L.hasOwnProperty(q);Rt&&K.setAttr(q,void 0)}for(var wt in L)if(!f[wt]){var Ft=wt.slice(0,2)==="on",It=X[wt]!==L[wt];if(Ft&&It){var Pt=wt.substr(2).toLowerCase();Pt.substr(0,7)==="content"&&(Pt="content"+Pt.substr(7,1).toUpperCase()+Pt.substr(8)),L[wt]&&(K.off(Pt+u),K.on(Pt+u,L[wt]))}!Ft&&(L[wt]!==X[wt]||Y&&L[wt]!==K.getAttr(wt))&&(nt=!0,Z[wt]=L[wt])}nt&&(K.setAttrs(Z),c(K))}var d="v";function C(P){function L(X){return X.__konvaNode?X:X.parent?L(X.parent):(console.error("vue-konva error: Can not find parent node"),{})}return L(P.parent)}function p(P){var L;return P!=null&&P.component?(P==null||(L=P.component)===null||L===void 0?void 0:L.__konvaNode)||p(P.component.subTree):null}function y(P){var L=P.el,X=P.component,Y=p(P);if((L==null?void 0:L.tagName)&&X&&!Y){var K=L&&L.tagName.toLowerCase();return console.error('vue-konva error: You are trying to render "'+K+'" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.'),null}return Y}function m(P){var L=[];return P.children&&P.children.forEach(function(X){!X.component&&Array.isArray(X.children)&&L.push.apply(L,X.children),X.component&&L.push(X)}),L}function b(P,L){var X=m(P),Y=[];X.forEach(function(Z){var nt=y(Z);nt&&Y.push(nt)});var K=!1;Y.forEach(function(Z,nt){Z.getZIndex()!==nt&&(Z.setZIndex(nt),K=!0)}),K&&c(L)}function w(){return w=Object.assign||function(P){for(var L=1;L<arguments.length;L++){var X=arguments[L];for(var Y in X)Object.prototype.hasOwnProperty.call(X,Y)&&(P[Y]=X[Y])}return P},w.apply(this,arguments)}var A={props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup:function(L,X){var Y=X.attrs,K=X.slots,Z=X.expose,nt=Object(o.getCurrentInstance)(),q=Object(o.reactive)({}),st=Object(o.ref)(null),ft=new window.Konva.Stage({width:L.config.width,height:L.config.height,container:document.createElement("div")});nt.__konvaNode=ft,wt();function ot(){return nt.__konvaNode}function Rt(){return nt.__konvaNode}function wt(){var Ft=q||{},It=w({},Y,L.config);g(nt,It,Ft,L.__useStrictMode),Object.assign(q,It)}return Object(o.onMounted)(function(){st.value.innerHTML="",ft.container(st.value),wt()}),Object(o.onUpdated)(function(){wt(),b(nt.subTree,ft)}),Object(o.onBeforeUnmount)(function(){ft.destroy()}),Object(o.watch)(function(){return L.config},wt,{deep:!0}),Z({getStage:Rt,getNode:ot}),function(){var Ft;return Object(o.h)("div",{ref:st},(Ft=K.default)===null||Ft===void 0?void 0:Ft.call(K))}}};function T(){return T=Object.assign||function(P){for(var L=1;L<arguments.length;L++){var X=arguments[L];for(var Y in X)Object.prototype.hasOwnProperty.call(X,Y)&&(P[Y]=X[Y])}return P},T.apply(this,arguments)}var E=".vue-konva-event",M={Group:!0,Layer:!0,FastLayer:!0,Label:!0},O=function(P){return{props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup:function(X,Y){var K=Y.attrs,Z=Y.slots,nt=Y.expose,q=Object(o.getCurrentInstance)(),st=Object(o.reactive)({}),ft=window.Konva[P];if(!ft){console.error("vue-konva error: Can not find node "+P);return}var ot=new ft;q.__konvaNode=ot,q.vnode.__konvaNode=ot,Ft();function Rt(){return q.__konvaNode}function wt(){return q.__konvaNode}function Ft(){var Pt={};for(var ir in q.vnode.props)ir.slice(0,2)==="on"&&(Pt[ir]=q.vnode.props[ir]);var _e=st||{},nr=T({},K,X.config,Pt);g(q,nr,_e,X.__useStrictMode),Object.assign(st,nr)}Object(o.onMounted)(function(){var Pt=C(q).__konvaNode;Pt.add(ot),c(ot)}),Object(o.onUnmounted)(function(){c(ot),ot.destroy(),ot.off(E)}),Object(o.onUpdated)(function(){Ft(),b(q.subTree,ot)}),Object(o.watch)(function(){return X.config},Ft,{deep:!0}),nt({getStage:wt,getNode:Rt});var It=M[P];return It?function(){var Pt;return Object(o.h)("template",{},(Pt=Z.default)===null||Pt===void 0?void 0:Pt.call(Z))}:function(){return null}}}};typeof window!="undefined"&&!window.Konva&&a(1);var I=["Layer","FastLayer","Group","Label","Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape","Transformer"],D=[{name:"Stage",component:A}].concat(I.map(function(P){return{name:P,component:O(P)}})),k={install:function(L,X){var Y=d;X&&X.prefix&&(Y=X.prefix),D.forEach(function(K){L.component(""+Y+K.name,K.component)})}};s.default=k}]).default})})($l);var wp=od($l.exports);export{Lt as F,wp as V,_t as a,zc as b,If as c,Vs as d,Ys as e,ed as f,mn as o,Wc as p,Rf as r,Du as u,Ds as w};
